<!DOCTYPE html><html lang="en" class="casper"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Zabbix 监控 Postgres 和 Redis | Zabbix 监控 Postgres 和 Redis</title><meta name="robots" content="index,follow"/><meta name="description" content="布署 Zabbix Agent，监控一下 Postgresql 和 Redis "/><meta name="twitter:card" content="summary_large_image"/><meta property="og:title" content="Zabbix 监控 Postgres 和 Redis | Zabbix 监控 Postgres 和 Redis"/><meta property="og:description" content="布署 Zabbix Agent，监控一下 Postgresql 和 Redis "/><meta property="og:url" content="https://fninit.com/posts/2020/zabbix-agent/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2020-02-28T06:22:13.000Z"/><meta property="og:image" content="https://fninit.com/site-meta.png"/><link rel="canonical" href="https://fninit.com/posts/2020/zabbix-agent/"/><link rel="preload" as="image" imageSrcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 16w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 32w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 48w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 64w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 96w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 128w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 256w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 384w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 640w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 750w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 828w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 1080w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 1200w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 1920w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 2048w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 3840w" imageSizes="
                              (max-width: 350px) 350px,
                              (max-width: 530px) 530px,
                              (max-width: 710px) 710px,
                              (max-width: 1170px) 1170px,
                              (max-width: 2110px) 2110px, 2000px
                            "/><meta name="next-head-count" content="14"/><link rel="alternate" type="application/rss+xml" title="RoninRo&#x27;s Blog RSS Feed" href="https://fninit.com/rss.xml"/><link rel="preload" href="/_next/static/css/4ac02ab48bb2a349.css" as="style"/><link rel="stylesheet" href="/_next/static/css/4ac02ab48bb2a349.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-5752944655d749a0.js" defer=""></script><script src="/_next/static/chunks/framework-e75f20a0d9e1f5eb.js" defer=""></script><script src="/_next/static/chunks/main-e6dfde739e3003a9.js" defer=""></script><script src="/_next/static/chunks/pages/_app-26430ffae28b5603.js" defer=""></script><script src="/_next/static/chunks/761-e0ebe2fd26a8af10.js" defer=""></script><script src="/_next/static/chunks/771-7cac59a0a901328d.js" defer=""></script><script src="/_next/static/chunks/747-48db26b6b4742ec5.js" defer=""></script><script src="/_next/static/chunks/501-12f7c6e56e1c082c.js" defer=""></script><script src="/_next/static/chunks/pages/%5B...slug%5D-8b5be30ea1b90f7b.js" defer=""></script><script src="/_next/static/ZAbLQ8zY8coJ5tEFPvS7P/_buildManifest.js" defer=""></script><script src="/_next/static/ZAbLQ8zY8coJ5tEFPvS7P/_ssgManifest.js" defer=""></script><script src="/_next/static/ZAbLQ8zY8coJ5tEFPvS7P/_middlewareManifest.js" defer=""></script></head><body class="post-template tag-zabbix"><script>
            (function(){
                window.isDark = localStorage.getItem('dark');
                if ( window.isDark === 'dark' ) {
                  document.body.classList.add('dark')
                } else if( window.isDark === undefined && window.matchMedia('(prefers-color-scheme: dark)').matches === true ){
                  document.body.classList.add('dark')
                }
            })()
          </script><div id="__next"><div class="site-wrapper"><header class="site-header"><div class="outer site-nav-main "><div class="inner"><nav class="site-nav"><div class="site-nav-left-wrapper"><div class="site-nav-left"><a class="site-nav-logo" href="/"><div style="height:${targetHeight}px;width:25.925925925925927px"><span style="box-sizing:border-box;display:block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;padding-top:81%"></span><img alt="RoninRo&#x27;s Blog" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="responsive" class="site-nav-logo" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="RoninRo&#x27;s Blog" sizes="100vw" srcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/logo.png 640w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/logo.png 750w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/logo.png 828w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/logo.png 1080w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/logo.png 1200w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/logo.png 1920w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/logo.png 2048w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/logo.png 3840w" src="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/logo.png" decoding="async" data-nimg="responsive" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="site-nav-logo" loading="lazy"/></noscript></span></div></a><div class="site-nav-content"><ul class="nav" role="menu"><li class="nav-home" role="menuitem"><div><a href="/">Home</a></div></li><li class="nav-about" role="menuitem"><div><a href="/about/">About</a></div></li></ul><span class="nav-post-title ">Zabbix 监控 Postgres 和 Redis</span></div></div></div><div class="site-nav-right"><div class="social-links"></div><button class="social-link social-link-tw" title="DarkMode" style="background-color:transparent"><svg viewBox="0 0 512 512"></svg></button></div></nav></div></div></header><main id="site-main" class="site-main outer "><div class="inner"><article class="post-full post tag-zabbix featured"><header class="post-full-header"><section class="post-full-tags"><a href="/tag/zabbix/">zabbix</a></section><h1 class="post-full-title">Zabbix 监控 Postgres 和 Redis</h1><p class="post-full-custom-excerpt">布署 Zabbix Agent，监控一下 Postgresql 和 Redis </p><div class="post-full-byline"><section class="post-full-byline-content"><ul class="author-list"></ul><section class="post-full-byline-meta"><h4 class="author-name"></h4><div class="byline-meta-content"><time class="byline-meta-date" dateTime="2020-02-28T06:22:13.000Z">28 February, 2020<!-- --> <!-- --></time><span class="byline-reading-time"><span class="bull">•</span> <!-- -->3 min read<!-- --></span></div></section></section></div></header><figure class="post-full-image" style="display:inherit"><span style="box-sizing:border-box;display:block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;padding-top:60.8%"></span><img alt="Zabbix 监控 Postgres 和 Redis" sizes="
                              (max-width: 350px) 350px,
                              (max-width: 530px) 530px,
                              (max-width: 710px) 710px,
                              (max-width: 1170px) 1170px,
                              (max-width: 2110px) 2110px, 2000px
                            " srcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 16w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 32w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 48w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 64w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 96w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 128w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 256w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 384w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 640w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 750w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 828w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 1080w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 1200w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 1920w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 2048w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png 3840w" src="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/admin-settings.png" decoding="async" data-nimg="responsive" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></span></figure><section class="post-full-content"><aside class="toc"><nav><h2>Table of Contents</h2><ul class="list"><li><a class="link">安装 Zabbix Agent 。</a><ul class="sub"><li><a class="link">Step1 添加 Zabbix 的存储库</a></li><li><a class="link">Step2 安装 Zabix Agent</a></li><li><a class="link">Step3 Zabbix Agent Configuration</a></li><li><a class="link">Step4 Open Port</a></li><li><a class="link">Step5 重启 Zabbix Agent</a></li></ul></li><li><a class="link">Zabbix + Postgresql</a></li><li><a class="link">Zabbix + Redis</a></li></ul></nav></aside><div class="post-content load-external-scripts"><blockquote>
<!-- --><p>非教程贴，布署完成后的回忆记录。</p>
<!-- --></blockquote>
<!-- --><ul>
<!-- --><li>Zabbix Agent 布署机器： CentOS 7+</li>
<!-- --><li>Zabbix Server 版本： 4.4.4</li>
<!-- --></ul>
<!-- --><h2 id="安装-zabbix-agent-"><a aria-hidden="true" tabindex="-1" href="#安装-zabbix-agent-"><span class="icon icon-link"></span></a>安装 Zabbix Agent 。<!-- --></h2>
<!-- --><h3 id="step1-添加-zabbix-的存储库"><a aria-hidden="true" tabindex="-1" href="#step1-添加-zabbix-的存储库"><span class="icon icon-link"></span></a>Step1 添加 Zabbix 的存储库<!-- --></h3>
<!-- --><p>不同版本的 Zabbix 存储库地址可以在 <!-- --><a href="https://www.zabbix.com/cn/download">https://www.zabbix.com/cn/download</a> 。找到<!-- --></p>
<!-- --><pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">CentOS/RHEL <!-- --><span class="token number">7</span>:
<!-- --></span><span class="code-line"><span class="token function">rpm</span> -Uvh https://repo.zabbix.com/zabbix/4.0/rhel/7/x86_64/zabbix-release-4.0-2.el7.noarch.rpm
<!-- --></span><span class="code-line">
</span><span class="code-line">CentOS/RHEL <!-- --><span class="token number">6</span>:
<!-- --></span><span class="code-line"><span class="token function">rpm</span> -Uvh https://repo.zabbix.com/zabbix/4.0/rhel/6/x86_64/zabbix-release-4.0-2.el6.noarch.rpm
<!-- --></span></code></pre>
<!-- --><h3 id="step2-安装-zabix-agent"><a aria-hidden="true" tabindex="-1" href="#step2-安装-zabix-agent"><span class="icon icon-link"></span></a>Step2 安装 Zabix Agent<!-- --></h3>
<!-- --><pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">yum <!-- --><span class="token function">install</span> zabbix-agent
<!-- --></span></code></pre>
<!-- --><h3 id="step3-zabbix-agent-configuration"><a aria-hidden="true" tabindex="-1" href="#step3-zabbix-agent-configuration"><span class="icon icon-link"></span></a>Step3 Zabbix Agent Configuration<!-- --></h3>
<!-- --><p>Zabbix Agent 安装成功后，就可以配置 Zabbix Agent 了。配置文件的地址在 <!-- --><code>/etc/zabbix/zabbix_agent.conf</code></p>
<!-- --><pre class="language-ini"><code class="language-ini code-highlight"><span class="code-line"><span class="token comment">#Server=[zabbix server ip]</span>
<!-- --></span><span class="code-line"><span class="token comment">#Hostname=[ Hostname of client system ]</span>
<!-- --></span><span class="code-line">
</span><span class="code-line"><span class="token key attr-name">Server</span><span class="token punctuation">=</span><span class="token value attr-value">192.168.1.100</span>
<!-- --></span><span class="code-line"><span class="token key attr-name">Hostname</span><span class="token punctuation">=</span><span class="token value attr-value">Server1</span>
<!-- --></span></code></pre>
<!-- --><h3 id="step4-open-port"><a aria-hidden="true" tabindex="-1" href="#step4-open-port"><span class="icon icon-link"></span></a>Step4 Open Port<!-- --></h3>
<!-- --><p>Zabbix Agent 使用 10050/tcp 端口。在防火墙中打开此端口。其中 192.168.1.100 是 Zabbix 服务器的 IP。</p>
<!-- --><pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># iptables -A INPUT -p tcp -s 192.168.1.100 --dport 10050 -m state --state NEW,ESTABLISHED -j ACCEPT</span>
<!-- --></span></code></pre>
<!-- --><blockquote>
<!-- --><p>像阿里云可能要通过 Web 后台配置开放端口。</p>
<!-- --></blockquote>
<!-- --><h3 id="step5-重启-zabbix-agent"><a aria-hidden="true" tabindex="-1" href="#step5-重启-zabbix-agent"><span class="icon icon-link"></span></a>Step5 重启 Zabbix Agent<!-- --></h3>
<!-- --><pre><code class="code-highlight"><span class="code-line">service zabbix-agent restart
</span></code></pre>
<!-- --><h2 id="zabbix--postgresql"><a aria-hidden="true" tabindex="-1" href="#zabbix--postgresql"><span class="icon icon-link"></span></a>Zabbix + Postgresql<!-- --></h2>
<!-- --><p>这里使用官方的配置方式: <!-- --><a href="https://www.zabbix.com/cn/integrations/postgresql">https://www.zabbix.com/cn/integrations/postgresql</a></p>
<!-- --><p><a href="https://git.zabbix.com/projects/ZBX/repos/zabbix/browse/templates/db/postgresql">源码</a></p>
<!-- --><ol>
<!-- --><li>创建对PostgreSQL服务器具有适当访问权限的只读zbx_monitor用户, PostgreSQL-11</li>
<!-- --></ol>
<!-- --><pre class="language-sql"><code class="language-sql code-highlight"><span class="code-line"><span class="token keyword">CREATE</span> <!-- --><span class="token keyword">USER</span> zbx_monitor <!-- --><span class="token keyword">WITH</span> PASSWORD <!-- --><span class="token string">&#x27;&lt;PASSWORD&gt;&#x27;</span> INHERIT<!-- --><span class="token punctuation">;</span>
<!-- --></span><span class="code-line"><span class="token keyword">GRANT</span> pg_monitor <!-- --><span class="token keyword">TO</span> zbx_monitor<!-- --><span class="token punctuation">;</span>
<!-- --></span></code></pre>
<!-- --><ol start="2">
<!-- --><li>下载上面的 postgresql 源码，并将 <!-- --><code>postgresql/</code> 复制到 <!-- --><code>/var/lib/zabbix/</code> 目录下。<!-- --></li>
<!-- --><li>复制 <!-- --><code>template_db_postgresql.conf</code> 配置文件在 <!-- --><code>/etc/zabbix/zabbix_agent.d/</code> 目录下，并确保 <!-- --><code>/etc/zabbix/zabbix_agent.conf</code> 中配置：<!-- --></li>
<!-- --></ol>
<!-- --><pre><code class="code-highlight"><span class="code-line">Include=/etc/zabbix/zabbix_agentd.d/
</span></code></pre>
<!-- --><ol start="4">
<!-- --><li>配置 <!-- --><code>pg_hba.conf</code></li>
<!-- --></ol>
<!-- --><pre><code class="code-highlight"><span class="code-line">host all zbx_monitor 127.0.0.1/32 trust
</span><span class="code-line">host all zbx_monitor 0.0.0.0/0 md5
</span><span class="code-line">host all zbx_monitor ::0/0 md5
</span></code></pre>
<!-- --><p>如何是要监控远程的服务器，则需要在 Zabbix agent 主目录下 <!-- --><code>/var/lib/zabbix/</code> 创建 <!-- --><code>.pgpass</code> ，并添加连接的具体信息。<!-- --></p>
<!-- --><ol start="5">
<!-- --><li>通过 Zabbix Web 导入 <!-- --><code>template_db_postgresql.xml</code> ，并链接到相应的主机上。如何成功的话很快就会有数据了。<!-- --></li>
<!-- --></ol>
<!-- --><pre><code class="code-highlight"><span class="code-line">&lt;REMOTE_HOST1&gt;:5432:postgres:zbx_monitor:&lt;PASSWORD&gt;
</span><span class="code-line">
</span><span class="code-line">&lt;REMOTE_HOST2&gt;:5432:postgres:zbx_monitor:&lt;PASSWORD&gt;
</span><span class="code-line">...
</span><span class="code-line">&lt;REMOTE_HOSTN&gt;:5432:postgres:zbx_monitor:&lt;PASSWORD&gt;
</span></code></pre>
<!-- --><p>或者</p>
<!-- --><pre><code class="code-highlight"><span class="code-line">*:5432:postgres:zbx_monitor:&lt;PASSWORD&gt;
</span></code></pre>
<!-- --><h2 id="zabbix--redis"><a aria-hidden="true" tabindex="-1" href="#zabbix--redis"><span class="icon icon-link"></span></a>Zabbix + Redis<!-- --></h2>
<!-- --><p>监控 Redis 主要是通过 redic-cli info 命令获取 Redis 的状态。</p>
<!-- --><pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">~<!-- --><span class="token comment"># cat /etc/zabbix/zbbix_agentd.d/redis.conf</span>
<!-- --></span><span class="code-line"><span class="token assign-left variable">UserParameter</span><span class="token operator">=</span>redis<!-- --><span class="token punctuation">[</span>*<!-- --><span class="token punctuation">]</span>,redis-cli -a password info <!-- --><span class="token operator"><span class="token file-descriptor important">2</span>&gt;<!-- --></span>/dev/null <!-- --><span class="token operator">|</span> <!-- --><span class="token function">grep</span> <!-- --><span class="token variable">$1</span><span class="token string">&quot;:&quot;</span> <!-- --><span class="token operator">|</span> <!-- --><span class="token function">cut</span> -d <!-- --><span class="token string">&#x27;:&#x27;</span> -f <!-- --><span class="token number">2</span>
<!-- --></span><span class="code-line"><span class="token assign-left variable">UserParameter</span><span class="token operator">=</span>redis-ping,redis-cli -a password <!-- --><span class="token function">ping</span> <!-- --><span class="token operator"><span class="token file-descriptor important">2</span>&gt;<!-- --></span>/dev/null <!-- --><span class="token operator">|</span> <!-- --><span class="token function">grep</span> -c PONG
<!-- --></span></code></pre>
<!-- --><p>模板文件：<!-- --><a href="https://gist.github.com/mjyi/09be985184c34b9957d5a1bba09b42b8">Template App Redis.xml</a></p></div></section><section class="post-full-content"><div class="post-full-comments"><div class="giscus" id="comments-container"></div></div></section></article></div></main><aside class="read-next outer"><div class="inner"><div class="read-next-feed"><article class="post-card post tag-vim "><a class="post-card-image-link" aria-label="[Vim] 使用 YouCompleteMe 对 Rust/Golang 代码补全" href="/posts/2021/vimrc/"><div class="post-card-image"><span style="box-sizing:border-box;display:block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:absolute;top:0;left:0;bottom:0;right:0"><img alt="[Vim] 使用 YouCompleteMe 对 Rust/Golang 代码补全" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="fill" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover"/><noscript><img alt="[Vim] 使用 YouCompleteMe 对 Rust/Golang 代码补全" sizes="100vw" srcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/sai-kiran-unsplash.jpg 640w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/sai-kiran-unsplash.jpg 750w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/sai-kiran-unsplash.jpg 828w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/sai-kiran-unsplash.jpg 1080w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/sai-kiran-unsplash.jpg 1200w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/sai-kiran-unsplash.jpg 1920w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/sai-kiran-unsplash.jpg 2048w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/sai-kiran-unsplash.jpg 3840w" src="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/sai-kiran-unsplash.jpg" decoding="async" data-nimg="fill" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></a><div class="post-card-content"><a class="post-card-content-link" href="/posts/2021/vimrc/"><header class="post-card-header"><div class="post-card-primary-tag">vim</div><h2 class="post-card-title">[Vim] 使用 YouCompleteMe 对 Rust/Golang 代码补全</h2></header><section class="post-card-excerpt"><p>YouCompleteMe 是 Vim 下的自动补全插件</p></section></a><footer class="post-card-meta"><ul class="author-list"><li class="author-list-item"><div class="author-name-tooltip">Roninro</div><a class="static-avatar" aria-label="Roninro" href="/author/roninro/"><span style="box-sizing:border-box;display:block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;padding-top:100%"></span><img alt="Roninro" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="responsive" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="Roninro" sizes="100vw" srcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 640w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 750w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 828w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 1080w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 1200w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 1920w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 2048w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 3840w" src="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg" decoding="async" data-nimg="responsive" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></a></li></ul><div class="post-card-byline-content"><span><span><a href="/author/roninro/">Roninro</a></span></span><span class="post-card-byline-date"><time dateTime="2021-01-22T10:07:01.000Z">22 Jan 2021<!-- --> <!-- --></time><span class="bull">• </span> <!-- -->2 min read<!-- --></span></div></footer></div></article><article class="post-card post tag-rust "><a class="post-card-image-link" aria-label="Mac 为 Linux 交叉编译 Rust 程序" href="/posts/2019/rust-cross-compile/"><div class="post-card-image"><span style="box-sizing:border-box;display:block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:absolute;top:0;left:0;bottom:0;right:0"><img alt="Mac 为 Linux 交叉编译 Rust 程序" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="fill" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover"/><noscript><img alt="Mac 为 Linux 交叉编译 Rust 程序" sizes="100vw" srcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 640w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 750w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 828w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 1080w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 1200w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 1920w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 2048w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 3840w" src="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg" decoding="async" data-nimg="fill" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></a><div class="post-card-content"><a class="post-card-content-link" href="/posts/2019/rust-cross-compile/"><header class="post-card-header"><div class="post-card-primary-tag">rust</div><h2 class="post-card-title">Mac 为 Linux 交叉编译 Rust 程序</h2></header><section class="post-card-excerpt"><p></p></section></a><footer class="post-card-meta"><ul class="author-list"><li class="author-list-item"><div class="author-name-tooltip">Roninro</div><a class="static-avatar" aria-label="Roninro" href="/author/roninro/"><span style="box-sizing:border-box;display:block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;padding-top:100%"></span><img alt="Roninro" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="responsive" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="Roninro" sizes="100vw" srcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 640w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 750w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 828w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 1080w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 1200w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 1920w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 2048w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 3840w" src="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg" decoding="async" data-nimg="responsive" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></a></li></ul><div class="post-card-byline-content"><span><span><a href="/author/roninro/">Roninro</a></span></span><span class="post-card-byline-date"><time dateTime="2019-12-27T03:27:32.000Z">27 Dec 2019<!-- --> <!-- --></time><span class="bull">• </span> <!-- -->1 min read<!-- --></span></div></footer></div></article></div></div></aside><footer class="site-footer outer"><div class="site-footer-content inner"><section class="copyright"><a href="https://fninit.com/">RoninRo&#x27;s Blog</a> © <!-- -->2022<!-- --></section><nav class="site-footer-nav"><a href="/">Latest Posts</a><a href="https://fninit.com" target="_blank" rel="noopener noreferrer">Roninro</a></nav></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"cmsData":{"settings":{"darkMode":{"defaultMode":"light","overrideOS":true},"nextImages":{"feature":true,"inline":true,"quality":80,"source":false},"rssFeed":true,"toc":{"enable":true,"maxDepth":2},"commenting":{"system":"giscus","disqusShortname":"","giscusConfig":{"repo":"roninro/blog","repoId":"MDEwOlJlcG9zaXRvcnkzMDkyNTUzODI","category":"Comments","categoryId":"DIC_kwDOEm7c1s4B_sst","mapping":"pathname","emitMetadata":false,"reactionsEnabled":true}},"siteUrl":"https://fninit.com","title":"RoninRo's Blog","description":"Thoughts, stories and ideas.","logo":"/images/logo.png","cover_image":"","facebook":"","twitter":"","lang":"en","navigation":[{"label":"Home","url":"/"},{"label":"About","url":"/about/"}],"secondary_navigation":[],"logoImage":{"url":"/images/logo.png","dimensions":{"width":500,"height":405}}},"post":{"slug":"/posts/2020/zabbix-agent","title":"Zabbix 监控 Postgres 和 Redis","date":"2020-02-28T06:22:13.000Z","excerpt":"布署 Zabbix Agent，监控一下 Postgresql 和 Redis ","draft":false,"page":false,"comment":true,"featureImage":{"url":"/images/admin-settings.png","dimensions":{"width":2000,"height":1216}},"toc":[{"id":"安装-zabbix-agent-","heading":"安装 Zabbix Agent 。","items":[{"id":"step1-添加-zabbix-的存储库","heading":"Step1 添加 Zabbix 的存储库"},{"id":"step2-安装-zabix-agent","heading":"Step2 安装 Zabix Agent"},{"id":"step3-zabbix-agent-configuration","heading":"Step3 Zabbix Agent Configuration"},{"id":"step4-open-port","heading":"Step4 Open Port"},{"id":"step5-重启-zabbix-agent","heading":"Step5 重启 Zabbix Agent"}]},{"id":"zabbix--postgresql","heading":"Zabbix + Postgresql"},{"id":"zabbix--redis","heading":"Zabbix + Redis"}],"tags":[{"name":"zabbix","slug":"zabbix","count":1}],"authors":[],"primary_tag":{"name":"zabbix","slug":"zabbix","count":1},"reading_time":"3 min read","mdxSource":"var Component=(()=\u003e{var h=Object.create;var l=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var r=a=\u003el(a,\"__esModule\",{value:!0});var N=(a,s)=\u003e()=\u003e(s||a((s={exports:{}}).exports,s),s.exports),x=(a,s)=\u003e{for(var i in s)l(a,i,{get:s[i],enumerable:!0})},t=(a,s,i,n)=\u003e{if(s\u0026\u0026typeof s==\"object\"||typeof s==\"function\")for(let c of b(s))!g.call(a,c)\u0026\u0026(i||c!==\"default\")\u0026\u0026l(a,c,{get:()=\u003es[c],enumerable:!(n=p(s,c))||n.enumerable});return a},u=(a,s)=\u003et(r(l(a!=null?h(m(a)):{},\"default\",!s\u0026\u0026a\u0026\u0026a.__esModule?{get:()=\u003ea.default,enumerable:!0}:{value:a,enumerable:!0})),a),k=(a=\u003e(s,i)=\u003ea\u0026\u0026a.get(s)||(i=t(r({}),s,1),a\u0026\u0026a.set(s,i),i))(typeof WeakMap!=\"undefined\"?new WeakMap:0);var o=N((A,d)=\u003e{d.exports=_jsx_runtime});var S={};x(S,{default:()=\u003e_,frontmatter:()=\u003ez});var e=u(o()),z={categories:[\"technology\"],date:\"2020-02-28T14:22:13+08:00\",excerpt:\"\\u5E03\\u7F72 Zabbix Agent\\uFF0C\\u76D1\\u63A7\\u4E00\\u4E0B Postgresql \\u548C Redis \",tags:[\"zabbix\"],title:\"Zabbix \\u76D1\\u63A7 Postgres \\u548C Redis\",toc:!0,feature_image:\"/images/admin-settings.png\"};function f(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(i,{})})):i();function i(){let n=Object.assign({blockquote:\"blockquote\",p:\"p\",ul:\"ul\",li:\"li\",h2:\"h2\",a:\"a\",span:\"span\",h3:\"h3\",pre:\"pre\",code:\"code\",ol:\"ol\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u975E\\u6559\\u7A0B\\u8D34\\uFF0C\\u5E03\\u7F72\\u5B8C\\u6210\\u540E\\u7684\\u56DE\\u5FC6\\u8BB0\\u5F55\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"Zabbix Agent \\u5E03\\u7F72\\u673A\\u5668\\uFF1A CentOS 7+\"}),`\n`,(0,e.jsx)(n.li,{children:\"Zabbix Server \\u7248\\u672C\\uFF1A 4.4.4\"}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u5B89\\u88C5-zabbix-agent-\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u5B89\\u88C5-zabbix-agent-\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u5B89\\u88C5 Zabbix Agent \\u3002\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"step1-\\u6DFB\\u52A0-zabbix-\\u7684\\u5B58\\u50A8\\u5E93\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#step1-\\u6DFB\\u52A0-zabbix-\\u7684\\u5B58\\u50A8\\u5E93\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Step1 \\u6DFB\\u52A0 Zabbix \\u7684\\u5B58\\u50A8\\u5E93\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u4E0D\\u540C\\u7248\\u672C\\u7684 Zabbix \\u5B58\\u50A8\\u5E93\\u5730\\u5740\\u53EF\\u4EE5\\u5728 \",(0,e.jsx)(n.a,{href:\"https://www.zabbix.com/cn/download\",children:\"https://www.zabbix.com/cn/download\"}),\" \\u3002\\u627E\\u5230\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"CentOS/RHEL \",(0,e.jsx)(n.span,{className:\"token number\",children:\"7\"}),`:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"rpm\"}),` -Uvh https://repo.zabbix.com/zabbix/4.0/rhel/7/x86_64/zabbix-release-4.0-2.el7.noarch.rpm\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"CentOS/RHEL \",(0,e.jsx)(n.span,{className:\"token number\",children:\"6\"}),`:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"rpm\"}),` -Uvh https://repo.zabbix.com/zabbix/4.0/rhel/6/x86_64/zabbix-release-4.0-2.el6.noarch.rpm\n`]})]})}),`\n`,(0,e.jsxs)(n.h3,{id:\"step2-\\u5B89\\u88C5-zabix-agent\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#step2-\\u5B89\\u88C5-zabix-agent\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Step2 \\u5B89\\u88C5 Zabix Agent\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"yum \",(0,e.jsx)(n.span,{className:\"token function\",children:\"install\"}),` zabbix-agent\n`]})})}),`\n`,(0,e.jsxs)(n.h3,{id:\"step3-zabbix-agent-configuration\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#step3-zabbix-agent-configuration\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Step3 Zabbix Agent Configuration\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Zabbix Agent \\u5B89\\u88C5\\u6210\\u529F\\u540E\\uFF0C\\u5C31\\u53EF\\u4EE5\\u914D\\u7F6E Zabbix Agent \\u4E86\\u3002\\u914D\\u7F6E\\u6587\\u4EF6\\u7684\\u5730\\u5740\\u5728 \",(0,e.jsx)(n.code,{children:\"/etc/zabbix/zabbix_agent.conf\"})]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-ini\",children:(0,e.jsxs)(n.code,{className:\"language-ini code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"#Server=[zabbix server ip]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"#Hostname=[ Hostname of client system ]\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key attr-name\",children:\"Server\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token value attr-value\",children:\"192.168.1.100\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key attr-name\",children:\"Hostname\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token value attr-value\",children:\"Server1\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.h3,{id:\"step4-open-port\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#step4-open-port\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Step4 Open Port\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Zabbix Agent \\u4F7F\\u7528 10050/tcp \\u7AEF\\u53E3\\u3002\\u5728\\u9632\\u706B\\u5899\\u4E2D\\u6253\\u5F00\\u6B64\\u7AEF\\u53E3\\u3002\\u5176\\u4E2D 192.168.1.100 \\u662F Zabbix \\u670D\\u52A1\\u5668\\u7684 IP\\u3002\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# iptables -A INPUT -p tcp -s 192.168.1.100 --dport 10050 -m state --state NEW,ESTABLISHED -j ACCEPT\"}),`\n`]})})}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u50CF\\u963F\\u91CC\\u4E91\\u53EF\\u80FD\\u8981\\u901A\\u8FC7 Web \\u540E\\u53F0\\u914D\\u7F6E\\u5F00\\u653E\\u7AEF\\u53E3\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"step5-\\u91CD\\u542F-zabbix-agent\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#step5-\\u91CD\\u542F-zabbix-agent\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Step5 \\u91CD\\u542F Zabbix Agent\"]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`service zabbix-agent restart\n`})})}),`\n`,(0,e.jsxs)(n.h2,{id:\"zabbix--postgresql\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#zabbix--postgresql\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Zabbix + Postgresql\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u8FD9\\u91CC\\u4F7F\\u7528\\u5B98\\u65B9\\u7684\\u914D\\u7F6E\\u65B9\\u5F0F: \",(0,e.jsx)(n.a,{href:\"https://www.zabbix.com/cn/integrations/postgresql\",children:\"https://www.zabbix.com/cn/integrations/postgresql\"})]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://git.zabbix.com/projects/ZBX/repos/zabbix/browse/templates/db/postgresql\",children:\"\\u6E90\\u7801\"})}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u521B\\u5EFA\\u5BF9PostgreSQL\\u670D\\u52A1\\u5668\\u5177\\u6709\\u9002\\u5F53\\u8BBF\\u95EE\\u6743\\u9650\\u7684\\u53EA\\u8BFBzbx_monitor\\u7528\\u6237, PostgreSQL-11\"}),`\n`]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-sql\",children:(0,e.jsxs)(n.code,{className:\"language-sql code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CREATE\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"USER\"}),\" zbx_monitor \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WITH\"}),\" PASSWORD \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'\u003cPASSWORD\u003e'\"}),\" INHERIT\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"GRANT\"}),\" pg_monitor \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"TO\"}),\" zbx_monitor\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.ol,{start:\"2\",children:[`\n`,(0,e.jsxs)(n.li,{children:[\"\\u4E0B\\u8F7D\\u4E0A\\u9762\\u7684 postgresql \\u6E90\\u7801\\uFF0C\\u5E76\\u5C06 \",(0,e.jsx)(n.code,{children:\"postgresql/\"}),\" \\u590D\\u5236\\u5230 \",(0,e.jsx)(n.code,{children:\"/var/lib/zabbix/\"}),\" \\u76EE\\u5F55\\u4E0B\\u3002\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"\\u590D\\u5236 \",(0,e.jsx)(n.code,{children:\"template_db_postgresql.conf\"}),\" \\u914D\\u7F6E\\u6587\\u4EF6\\u5728 \",(0,e.jsx)(n.code,{children:\"/etc/zabbix/zabbix_agent.d/\"}),\" \\u76EE\\u5F55\\u4E0B\\uFF0C\\u5E76\\u786E\\u4FDD \",(0,e.jsx)(n.code,{children:\"/etc/zabbix/zabbix_agent.conf\"}),\" \\u4E2D\\u914D\\u7F6E\\uFF1A\"]}),`\n`]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`Include=/etc/zabbix/zabbix_agentd.d/\n`})})}),`\n`,(0,e.jsxs)(n.ol,{start:\"4\",children:[`\n`,(0,e.jsxs)(n.li,{children:[\"\\u914D\\u7F6E \",(0,e.jsx)(n.code,{children:\"pg_hba.conf\"})]}),`\n`]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`host all zbx_monitor 127.0.0.1/32 trust\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`host all zbx_monitor 0.0.0.0/0 md5\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`host all zbx_monitor ::0/0 md5\n`})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5982\\u4F55\\u662F\\u8981\\u76D1\\u63A7\\u8FDC\\u7A0B\\u7684\\u670D\\u52A1\\u5668\\uFF0C\\u5219\\u9700\\u8981\\u5728 Zabbix agent \\u4E3B\\u76EE\\u5F55\\u4E0B \",(0,e.jsx)(n.code,{children:\"/var/lib/zabbix/\"}),\" \\u521B\\u5EFA \",(0,e.jsx)(n.code,{children:\".pgpass\"}),\" \\uFF0C\\u5E76\\u6DFB\\u52A0\\u8FDE\\u63A5\\u7684\\u5177\\u4F53\\u4FE1\\u606F\\u3002\"]}),`\n`,(0,e.jsxs)(n.ol,{start:\"5\",children:[`\n`,(0,e.jsxs)(n.li,{children:[\"\\u901A\\u8FC7 Zabbix Web \\u5BFC\\u5165 \",(0,e.jsx)(n.code,{children:\"template_db_postgresql.xml\"}),\" \\uFF0C\\u5E76\\u94FE\\u63A5\\u5230\\u76F8\\u5E94\\u7684\\u4E3B\\u673A\\u4E0A\\u3002\\u5982\\u4F55\\u6210\\u529F\\u7684\\u8BDD\\u5F88\\u5FEB\\u5C31\\u4F1A\\u6709\\u6570\\u636E\\u4E86\\u3002\"]}),`\n`]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`\u003cREMOTE_HOST1\u003e:5432:postgres:zbx_monitor:\u003cPASSWORD\u003e\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\u003cREMOTE_HOST2\u003e:5432:postgres:zbx_monitor:\u003cPASSWORD\u003e\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`...\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\u003cREMOTE_HOSTN\u003e:5432:postgres:zbx_monitor:\u003cPASSWORD\u003e\n`})]})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6216\\u8005\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`*:5432:postgres:zbx_monitor:\u003cPASSWORD\u003e\n`})})}),`\n`,(0,e.jsxs)(n.h2,{id:\"zabbix--redis\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#zabbix--redis\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Zabbix + Redis\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u76D1\\u63A7 Redis \\u4E3B\\u8981\\u662F\\u901A\\u8FC7 redic-cli info \\u547D\\u4EE4\\u83B7\\u53D6 Redis \\u7684\\u72B6\\u6001\\u3002\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"~\",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# cat /etc/zabbix/zbbix_agentd.d/redis.conf\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token assign-left variable\",children:\"UserParameter\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\"redis\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"*\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\",redis-cli -a password info \",(0,e.jsxs)(n.span,{className:\"token operator\",children:[(0,e.jsx)(n.span,{className:\"token file-descriptor important\",children:\"2\"}),\"\u003e\"]}),\"/dev/null \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"grep\"}),\" \",(0,e.jsx)(n.span,{className:\"token variable\",children:\"$1\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\":\"'}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"cut\"}),\" -d \",(0,e.jsx)(n.span,{className:\"token string\",children:\"':'\"}),\" -f \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token assign-left variable\",children:\"UserParameter\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\"redis-ping,redis-cli -a password \",(0,e.jsx)(n.span,{className:\"token function\",children:\"ping\"}),\" \",(0,e.jsxs)(n.span,{className:\"token operator\",children:[(0,e.jsx)(n.span,{className:\"token file-descriptor important\",children:\"2\"}),\"\u003e\"]}),\"/dev/null \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"grep\"}),` -c PONG\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u6A21\\u677F\\u6587\\u4EF6\\uFF1A\",(0,e.jsx)(n.a,{href:\"https://gist.github.com/mjyi/09be985184c34b9957d5a1bba09b42b8\",children:\"Template App Redis.xml\"})]})]})}}var _=f;return k(S);})();\n;return Component;"},"isPost":true,"seoImage":{"url":"https://fninit.com/site-meta.png","dimensions":{"width":1120,"height":768}},"previewPosts":[],"prevPost":{"slug":"/posts/2021/vimrc","title":"[Vim] 使用 YouCompleteMe 对 Rust/Golang 代码补全","date":"2021-01-22T10:07:01.000Z","excerpt":"YouCompleteMe 是 Vim 下的自动补全插件","draft":false,"page":false,"comment":true,"featureImage":{"url":"/images/sai-kiran-unsplash.jpg","dimensions":{"width":1536,"height":1152}},"toc":null,"tags":[{"name":"vim","slug":"vim"}],"authors":[{"slug":"roninro","name":"Roninro","cover_image":"/images/publication-cover.png","profileImage":{"url":"/images/avatar.jpg","dimensions":{"width":1080,"height":1080}},"location":"THE INTERNET","bio":"Software Development Engineer","twitter":"@xxxxx","facebook":"xxxxxx"}],"primary_tag":{"name":"vim","slug":"vim"},"reading_time":"2 min read"},"nextPost":{"slug":"/posts/2019/rust-cross-compile","title":"Mac 为 Linux 交叉编译 Rust 程序","date":"2019-12-27T03:27:32.000Z","excerpt":null,"draft":false,"page":false,"comment":true,"featureImage":{"url":"/images/wOZ0yyfTV5w-unsplash.jpg","dimensions":{"width":2000,"height":1333}},"toc":[{"id":"在-mac-上进行交叉编译","heading":"在 Mac 上进行交叉编译"}],"tags":[{"name":"rust","slug":"rust"}],"authors":[{"slug":"roninro","name":"Roninro","cover_image":"/images/publication-cover.png","profileImage":{"url":"/images/avatar.jpg","dimensions":{"width":1080,"height":1080}},"location":"THE INTERNET","bio":"Software Development Engineer","twitter":"@xxxxx","facebook":"xxxxxx"}],"primary_tag":{"name":"rust","slug":"rust"},"reading_time":"1 min read"},"bodyClass":"post-template tag-zabbix"}},"__N_SSG":true},"page":"/[...slug]","query":{"slug":["posts","2020","zabbix-agent"]},"buildId":"ZAbLQ8zY8coJ5tEFPvS7P","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>