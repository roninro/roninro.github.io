<!DOCTYPE html><html lang="en" class="casper"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>读:《Objective-C高级编程》之GCD | 读:《Objective-C高级编程》之GCD</title><meta name="robots" content="index,follow"/><meta name="description" content="Thoughts, stories and ideas."/><meta name="twitter:card" content="summary_large_image"/><meta property="og:title" content="读:《Objective-C高级编程》之GCD | 读:《Objective-C高级编程》之GCD"/><meta property="og:description" content="Thoughts, stories and ideas."/><meta property="og:url" content="https://fninit.com/posts/2017/objc-gcd/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2017-01-17T00:00:00.000Z"/><meta property="article:author" content="Roninro"/><meta property="og:image" content="https://fninit.com/site-meta.png"/><link rel="canonical" href="https://fninit.com/posts/2017/objc-gcd/"/><link rel="preload" as="image" imageSrcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 16w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 32w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 48w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 64w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 96w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 128w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 256w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 384w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 640w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 750w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 828w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 1080w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 1200w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 1920w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 2048w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 3840w" imageSizes="
                              (max-width: 350px) 350px,
                              (max-width: 530px) 530px,
                              (max-width: 710px) 710px,
                              (max-width: 1170px) 1170px,
                              (max-width: 2110px) 2110px, 2000px
                            "/><meta name="next-head-count" content="15"/><link rel="alternate" type="application/rss+xml" title="RoninRo&#x27;s Blog RSS Feed" href="https://fninit.com/rss.xml"/><link rel="preload" href="/_next/static/css/4ac02ab48bb2a349.css" as="style"/><link rel="stylesheet" href="/_next/static/css/4ac02ab48bb2a349.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-5752944655d749a0.js" defer=""></script><script src="/_next/static/chunks/framework-e75f20a0d9e1f5eb.js" defer=""></script><script src="/_next/static/chunks/main-e6dfde739e3003a9.js" defer=""></script><script src="/_next/static/chunks/pages/_app-26430ffae28b5603.js" defer=""></script><script src="/_next/static/chunks/761-e0ebe2fd26a8af10.js" defer=""></script><script src="/_next/static/chunks/771-7cac59a0a901328d.js" defer=""></script><script src="/_next/static/chunks/747-48db26b6b4742ec5.js" defer=""></script><script src="/_next/static/chunks/501-12f7c6e56e1c082c.js" defer=""></script><script src="/_next/static/chunks/pages/%5B...slug%5D-8b5be30ea1b90f7b.js" defer=""></script><script src="/_next/static/mUxI9hmOGA1s-AlyreIBF/_buildManifest.js" defer=""></script><script src="/_next/static/mUxI9hmOGA1s-AlyreIBF/_ssgManifest.js" defer=""></script><script src="/_next/static/mUxI9hmOGA1s-AlyreIBF/_middlewareManifest.js" defer=""></script></head><body class="post-template tag-ios tag-gcd"><script>
            (function(){
                window.isDark = localStorage.getItem('dark');
                if ( window.isDark === 'dark' ) {
                  document.body.classList.add('dark')
                } else if( window.isDark === undefined && window.matchMedia('(prefers-color-scheme: dark)').matches === true ){
                  document.body.classList.add('dark')
                }
            })()
          </script><div id="__next"><div class="site-wrapper"><header class="site-header"><div class="outer site-nav-main "><div class="inner"><nav class="site-nav"><div class="site-nav-left-wrapper"><div class="site-nav-left"><a class="site-nav-logo" href="/"><div style="height:${targetHeight}px;width:25.925925925925927px"><span style="box-sizing:border-box;display:block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;padding-top:81%"></span><img alt="RoninRo&#x27;s Blog" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="responsive" class="site-nav-logo" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="RoninRo&#x27;s Blog" sizes="100vw" srcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/logo.png 640w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/logo.png 750w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/logo.png 828w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/logo.png 1080w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/logo.png 1200w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/logo.png 1920w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/logo.png 2048w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/logo.png 3840w" src="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/logo.png" decoding="async" data-nimg="responsive" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="site-nav-logo" loading="lazy"/></noscript></span></div></a><div class="site-nav-content"><ul class="nav" role="menu"><li class="nav-home" role="menuitem"><div><a href="/">Home</a></div></li><li class="nav-about" role="menuitem"><div><a href="/about/">About</a></div></li></ul><span class="nav-post-title ">读:《Objective-C高级编程》之GCD</span></div></div></div><div class="site-nav-right"><div class="social-links"></div><button class="social-link social-link-tw" title="DarkMode" style="background-color:transparent"><svg viewBox="0 0 512 512"></svg></button></div></nav></div></div></header><main id="site-main" class="site-main outer "><div class="inner"><article class="post-full post tag-ios tag-gcd featured"><header class="post-full-header"><section class="post-full-tags"><a href="/tag/ios/">iOS</a></section><h1 class="post-full-title">读:《Objective-C高级编程》之GCD</h1><div class="post-full-byline"><section class="post-full-byline-content"><ul class="author-list"><li class="author-list-item"><div class="author-card "><div class="author-profile-image"><span style="box-sizing:border-box;display:block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;padding-top:100%"></span><img alt="Roninro" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="responsive" class="author-profile-image" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="Roninro" sizes="100vw" srcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 640w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 750w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 828w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 1080w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 1200w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 1920w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 2048w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 3840w" src="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg" decoding="async" data-nimg="responsive" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="author-profile-image" loading="lazy"/></noscript></span></div><div class="author-info"><div class="bio"><h2>Roninro</h2><p>Software Development Engineer</p><p><a href="/author/roninro/">More posts</a> <!-- -->by<!-- --> <!-- -->Roninro<!-- -->.<!-- --></p></div></div></div><a class="author-avatar" aria-label="Roninro" href="/author/roninro/"><span style="box-sizing:border-box;display:block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;padding-top:100%"></span><img alt="Roninro" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="responsive" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="Roninro" sizes="100vw" srcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 640w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 750w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 828w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 1080w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 1200w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 1920w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 2048w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 3840w" src="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg" decoding="async" data-nimg="responsive" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></a></li></ul><section class="post-full-byline-meta"><h4 class="author-name"><span><a href="/author/roninro/">Roninro</a></span></h4><div class="byline-meta-content"><time class="byline-meta-date" dateTime="2017-01-17T00:00:00.000Z">17 January, 2017<!-- --> <!-- --></time><span class="byline-reading-time"><span class="bull">•</span> <!-- -->13 min read<!-- --></span></div></section></section></div></header><figure class="post-full-image" style="display:inherit"><span style="box-sizing:border-box;display:block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;padding-top:66.64999999999999%"></span><img alt="读:《Objective-C高级编程》之GCD" sizes="
                              (max-width: 350px) 350px,
                              (max-width: 530px) 530px,
                              (max-width: 710px) 710px,
                              (max-width: 1170px) 1170px,
                              (max-width: 2110px) 2110px, 2000px
                            " srcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 16w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 32w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 48w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 64w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 96w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 128w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 256w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 384w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 640w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 750w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 828w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 1080w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 1200w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 1920w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 2048w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg 3840w" src="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/wOZ0yyfTV5w-unsplash.jpg" decoding="async" data-nimg="responsive" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></span></figure><section class="post-full-content"><div class="post-content load-external-scripts"><h1 id="什么是gcd"><a aria-hidden="true" tabindex="-1" href="#什么是gcd"><span class="icon icon-link"></span></a>什么是GCD<!-- --></h1>
<!-- --><blockquote>
<!-- --><p><code>Grand Central Dispatch(GCD)</code>是异步执任务的技术之一。一般将应用程序中记述的线程管理用的代码在系统级中实现。开发只需要定义想执行并追加到适当的<!-- --><code>Dispatch Queue</code> 中，<!-- --><code>GCD</code>就能生成必要的线程并计划执行任务，由于线程管理是作为系统的一部分来实现的，因此可统一管理，也可以执行任务，这样就比以前的线程更有效率。<!-- --></p>
<!-- --></blockquote>
<!-- --><h1 id="关于多线程编程"><a aria-hidden="true" tabindex="-1" href="#关于多线程编程"><span class="icon icon-link"></span></a>关于多线程编程<!-- --></h1>
<!-- --><p>线程是操作系统能够进行运算调度的最小单位。它被包含在进程之中，是进程中的实际运作单位。一条线程指的是进程中一个单一顺序的控制流。
一个<!-- --><code>CPU</code> 一次只能执行一个命令，不能执行某处分开的并列的两个命令。因此通过<!-- --><code>CPU</code>执行的<!-- --><code>CPU命令</code>就好比一条无分叉的大道，其执行不会出现分歧。<!-- --></p>
<!-- --><p><code>OS X</code>和<!-- --><code>iOS</code>的核心<!-- --><code>XNU内核</code>在发生操作系统事件时，会切换执行路径，执行中的状态，例如<!-- --><code>CPU</code>的寄存器等信息保存到各自路径专用的内存块中，从切换目标路径专用的内存块中，复原<!-- --><code>CPU</code>寄存器等信息，继续执行切换路径的<!-- --><code>CPU</code>命令行。这就称为<!-- --><code>上下文切换</code>。<!-- --></p>
<!-- --><p>由于使用多线程的程序可以在某个线程和其他线程之间反复多次的进行上下文切换，因此看上去就好像1个<!-- --><code>CPU</code>核能够并列的执行多个线程一样，而且在具有多个<!-- --><code>CPU</code>核的情况下，就是真的提供多个<!-- --><code>CPU</code>核并行执行多个线程的技术。<!-- --></p>
<!-- --><p>这种利用多线程编程的技术就称为“多线程编程”。</p>
<!-- --><p>但是，多线程编程实际上是一种易发生各种问题的编程技术。比如多个线程更新相同的资源会导致数据的不一致（数据竞争）、停止等待事件的线程会导致多个线程相互持续等待（死锁）、使用太多线程会消耗大量内存等。</p>
<!-- --><h1 id="gcd-的-api"><a aria-hidden="true" tabindex="-1" href="#gcd-的-api"><span class="icon icon-link"></span></a>GCD 的 API<!-- --></h1>
<!-- --><h2 id="dispatch-queue"><a aria-hidden="true" tabindex="-1" href="#dispatch-queue"><span class="icon icon-link"></span></a>Dispatch Queue<!-- --></h2>
<!-- --><pre class="language-objectivec"><code class="language-objectivec code-highlight"><span class="code-line"><span class="token function">dispatch_async</span><span class="token punctuation">(</span>dispatch_queue_t  _Nonnull queue<!-- --><span class="token punctuation">,</span> <!-- --><span class="token operator">^</span><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">   <!-- --><span class="token comment">// doSomething     </span>
<!-- --></span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span></code></pre>
<!-- --><p><code>Dispatch Queue</code>, 是执行处理的等待队列。<!-- --></p>
<!-- --><p>使用Block语法定义<!-- --><code>想执行的任务</code>，通过<!-- --><code>dispatch_async</code>函数追加赋值在变量queue的<!-- --><code>Dispatch Queue</code>中。仅这样就可以使指定的<!-- --><code>Block</code>在另外一个线程执行。<!-- --></p>
<!-- --><p><code>Dispatch Queue</code>按照FIFO（First-In-First-Out）执行处理。<!-- --></p>
<!-- --><p><code>Dispatch Queue</code>有两种：<!-- --></p>
<!-- --><table><thead><tr><th>Dispatch Queue</th><th>说明</th></tr></thead><tbody><tr><td>Serial Dispatch Queue</td><td>等待现在执行中处理结果</td></tr><tr><td>Concurrent Dispatch Queue</td><td>不等待现在执行中处理结果</td></tr></tbody></table>
<!-- --><h2 id="dispatch_queue_create"><a aria-hidden="true" tabindex="-1" href="#dispatch_queue_create"><span class="icon icon-link"></span></a>dispatch_queue_create<!-- --></h2>
<!-- --><p>通过<!-- --><code>dispatch_queue_create</code>生成Dispatch Queue。<!-- --></p>
<!-- --><p>如下生成一个 Serial Dispatch Queue：</p>
<!-- --><pre class="language-objectivec"><code class="language-objectivec code-highlight"><span class="code-line"><span class="token function">dispatch_queue_create</span><span class="token punctuation">(</span><span class="token keyword">const</span> <!-- --><span class="token keyword">char</span> <!-- --><span class="token operator">*</span> _Nullable label<!-- --><span class="token punctuation">,</span> dispatch_queue_attr_t  _Nullable attr<!-- --><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">
</span><span class="code-line">dispatch_queue_t mySerialDispatchQueue <!-- --><span class="token operator">=</span> <!-- --><span class="token function">dispatch_queue_create</span><span class="token punctuation">(</span><span class="token string">&quot;com.example.gcd.mySerialDispatchQueue&quot;</span><span class="token punctuation">,</span> <!-- --><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span></code></pre>
<!-- --><p>第一个参数指定<!-- --><code>Dispatch Queue</code>的名称，第二个参数指定<!-- --><code>NULL/DISPATCH_QUEUE_SERIAL</code> 生成<!-- --><code>Serial Dispatch Queue</code>。。生成<!-- --><code>Concurrent Dispatch Queue</code>时，将第二个参数指定为<!-- --><code>DISPATCH_QUEUE_CONCURRENT</code>，如下：<!-- --></p>
<!-- --><pre class="language-objectivec"><code class="language-objectivec code-highlight"><span class="code-line">dispatch_queue_t myConcurretnDispatchQueue <!-- --><span class="token operator">=</span> <!-- --><span class="token function">dispatch_queue_create</span><span class="token punctuation">(</span><span class="token string">&quot;com.example.gcd.myConCurrentDispatchQueue&quot;</span><span class="token punctuation">,</span> DISPATCH_QUEUE_CONCURRENT<!-- --><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">
</span></code></pre>
<!-- --><p>dispatch_queue_create 函数的返回值为表示Dispatch Queuede的 dispatch_queue_t类型。</p>
<!-- --><p><code>Serial Dispatch Queue</code> 一次只能执行一个追加任务。系统对一个<!-- --><code>Serial Dispatch Queue</code>只生成一并使用一个线程，如果生成2000个<!-- --><code>Serial Dispatch Queue</code>，那么就生成2000个线程。如果过多使用多线程就会消耗大量内存，引起大量的上下文切换，大幅度降低系统的响应性能。<!-- --></p>
<!-- --><p>只在为了避免多线程编程问题之一——多个线程更新相同资源导致数据竞争时，使用<!-- --><code>Serial Dispatch Queue</code></p>
<!-- --><p>下面分别添加几个block到两个队列中：
Serial Dispatch Queue</p>
<!-- --><pre class="language-objectivec"><code class="language-objectivec code-highlight"><span class="code-line">	dispatch_queue_t mySerialDispatchQueue <!-- --><span class="token operator">=</span> <!-- --><span class="token function">dispatch_queue_create</span><span class="token punctuation">(</span><span class="token string">&quot;com.example.gcd.mySerialDispatchQueue&quot;</span><span class="token punctuation">,</span> <!-- --><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token function">dispatch_async</span><span class="token punctuation">(</span>mySerialDispatchQueue<!-- --><span class="token punctuation">,</span> <!-- --><span class="token operator">^</span><span class="token punctuation">{</span> <!-- --><span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;blcok1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token function">dispatch_async</span><span class="token punctuation">(</span>mySerialDispatchQueue<!-- --><span class="token punctuation">,</span> <!-- --><span class="token operator">^</span><span class="token punctuation">{</span> <!-- --><span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;block2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token function">dispatch_async</span><span class="token punctuation">(</span>mySerialDispatchQueue<!-- --><span class="token punctuation">,</span> <!-- --><span class="token operator">^</span><span class="token punctuation">{</span> <!-- --><span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;block3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token function">dispatch_async</span><span class="token punctuation">(</span>mySerialDispatchQueue<!-- --><span class="token punctuation">,</span> <!-- --><span class="token operator">^</span><span class="token punctuation">{</span> <!-- --><span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;block4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<!-- --></span></code></pre>
<!-- --><p>输出：</p>
<!-- --><pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token number">2017</span>-01-19 <!-- --><span class="token number">20</span>:23:50.599 gcd<!-- --><span class="token punctuation">[</span><span class="token number">13765</span>:2856357<!-- --><span class="token punctuation">]</span> blcok1
<!-- --></span><span class="code-line"><span class="token number">2017</span>-01-19 <!-- --><span class="token number">20</span>:23:50.599 gcd<!-- --><span class="token punctuation">[</span><span class="token number">13765</span>:2856357<!-- --><span class="token punctuation">]</span> block2
<!-- --></span><span class="code-line"><span class="token number">2017</span>-01-19 <!-- --><span class="token number">20</span>:23:50.599 gcd<!-- --><span class="token punctuation">[</span><span class="token number">13765</span>:2856357<!-- --><span class="token punctuation">]</span> block3
<!-- --></span><span class="code-line"><span class="token number">2017</span>-01-19 <!-- --><span class="token number">20</span>:23:50.599 gcd<!-- --><span class="token punctuation">[</span><span class="token number">13765</span>:2856357<!-- --><span class="token punctuation">]</span> block4
<!-- --></span></code></pre>
<!-- --><p>Concurrent Dispatch Queue</p>
<!-- --><pre class="language-objectivec"><code class="language-objectivec code-highlight"><span class="code-line">    dispatch_queue_t myConcurretnDispatchQueue <!-- --><span class="token operator">=</span> <!-- --><span class="token function">dispatch_queue_create</span><span class="token punctuation">(</span><span class="token string">&quot;com.example.gcd.myConcurretnDispatchQueue&quot;</span><span class="token punctuation">,</span> DISPATCH_QUEUE_CONCURRENT<!-- --><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token function">dispatch_async</span><span class="token punctuation">(</span>myConcurretnDispatchQueue<!-- --><span class="token punctuation">,</span> <!-- --><span class="token operator">^</span><span class="token punctuation">{</span> <!-- --><span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;blcok1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token function">dispatch_async</span><span class="token punctuation">(</span>myConcurretnDispatchQueue<!-- --><span class="token punctuation">,</span> <!-- --><span class="token operator">^</span><span class="token punctuation">{</span> <!-- --><span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;block2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token function">dispatch_async</span><span class="token punctuation">(</span>myConcurretnDispatchQueue<!-- --><span class="token punctuation">,</span> <!-- --><span class="token operator">^</span><span class="token punctuation">{</span> <!-- --><span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;block3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token function">dispatch_async</span><span class="token punctuation">(</span>myConcurretnDispatchQueue<!-- --><span class="token punctuation">,</span> <!-- --><span class="token operator">^</span><span class="token punctuation">{</span> <!-- --><span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;block4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<!-- --></span></code></pre>
<!-- --><p>输出：</p>
<!-- --><pre><code class="code-highlight"><span class="code-line">2017-01-19 20:25:17.937 gcd[13811:2867322] blcok1
</span><span class="code-line">2017-01-19 20:25:17.937 gcd[13811:2867323] block3
</span><span class="code-line">2017-01-19 20:25:17.937 gcd[13811:2867325] block2
</span><span class="code-line">2017-01-19 20:25:17.937 gcd[13811:2867366] block4
</span><span class="code-line">...
</span></code></pre>
<!-- --><p>在 iOS 6+ 和 Mac OS X 10.8+ ARC 可以管理GCD.在此之前，用下面代码释放gcd</p>
<!-- --><pre class="language-objectivec"><code class="language-objectivec code-highlight"><span class="code-line"><span class="token function">dispatch_release</span><span class="token punctuation">(</span>queue<!-- --><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span></code></pre>
<!-- --><h2 id="main-dispatch-queueglobal-dispatch-queue"><a aria-hidden="true" tabindex="-1" href="#main-dispatch-queueglobal-dispatch-queue"><span class="icon icon-link"></span></a>Main Dispatch Queue/Global Dispatch Queue<!-- --></h2>
<!-- --><p>Main Dispatch Queue 是在主线程中执行的Dispatch Queue。 是Serial Dispatch Queue。
追加到 Main Dispatch Queue 的处理实在主线程的RunLoop 中执行，由于是在主线程中执行，因此要将用户界面更新等一些必须在主线程中执行的处理追加<!-- --><code>Main Dispatch Queue</code>。
Global Dispatch Queue 是所有应用程序能够使用的 Concurrent Dispatch Queue。没必要通过dispatch_queue_create 逐个生成Concurrent Dispatch Queue。只要的Global Dispatch Queue中使用即可。<!-- --></p>
<!-- --><pre class="language-objectivec"><code class="language-objectivec code-highlight"><span class="code-line"><span class="token comment">//	Main Dispatch Queue</span>
<!-- --></span><span class="code-line">    dispatch_queue_t mainQueue <!-- --><span class="token operator">=</span> <!-- --><span class="token function">dispatch_get_main_queue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token comment">/*
</span></span><span class="code-line"><span class="token comment">     * Global Dispatch Queue 优先级从高到低
</span></span><span class="code-line"><span class="token comment">	 */</span>
<!-- --></span><span class="code-line">
</span><span class="code-line">    dispatch_queue_t globalQueueHigh <!-- --><span class="token operator">=</span> <!-- --><span class="token function">dispatch_get_global_queue</span><span class="token punctuation">(</span>DISPATCH_QUEUE_PRIORITY_HIGH<!-- --><span class="token punctuation">,</span> <!-- --><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">
</span><span class="code-line">    dispatch_queue_t globalQueueDefault <!-- --><span class="token operator">=</span> <!-- --><span class="token function">dispatch_get_global_queue</span><span class="token punctuation">(</span>DISPATCH_QUEUE_PRIORITY_DEFAULT<!-- --><span class="token punctuation">,</span> <!-- --><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">
</span><span class="code-line">    dispatch_queue_t globalQueueLow <!-- --><span class="token operator">=</span> <!-- --><span class="token function">dispatch_get_global_queue</span><span class="token punctuation">(</span>DISPATCH_QUEUE_PRIORITY_LOW<!-- --><span class="token punctuation">,</span> <!-- --><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">
</span><span class="code-line">    dispatch_queue_t globalQueueBackground <!-- --><span class="token operator">=</span> <!-- --><span class="token function">dispatch_get_global_queue</span><span class="token punctuation">(</span>DISPATCH_QUEUE_PRIORITY_BACKGROUND<!-- --><span class="token punctuation">,</span> <!-- --><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span></code></pre>
<!-- --><p>下面是最常见的Main Dispatch Queue和Global Dispatch Queue的使用方法。</p>
<!-- --><pre class="language-objectivec"><code class="language-objectivec code-highlight"><span class="code-line">	<!-- --><span class="token function">dispatch_async</span><span class="token punctuation">(</span><span class="token function">dispatch_get_global_queue</span><span class="token punctuation">(</span>DISPATCH_QUEUE_PRIORITY_DEFAULT<!-- --><span class="token punctuation">,</span> <!-- --><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <!-- --><span class="token operator">^</span><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">       <!-- --><span class="token comment">/*
</span></span><span class="code-line"><span class="token comment">        *   可并行的处理
</span></span><span class="code-line"><span class="token comment">        */</span>
<!-- --></span><span class="code-line">        <!-- --><span class="token function">dispatch_async</span><span class="token punctuation">(</span><span class="token function">dispatch_get_main_queue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <!-- --><span class="token operator">^</span><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">            <!-- --><span class="token comment">//只能在主线程中执行的处理</span>
<!-- --></span><span class="code-line">        <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">
</span></code></pre>
<!-- --><h2 id="dispatch_set_target_queue"><a aria-hidden="true" tabindex="-1" href="#dispatch_set_target_queue"><span class="icon icon-link"></span></a>dispatch_set_target_queue<!-- --></h2>
<!-- --><p>dispatch_set_target_queue函数是变更生成的<!-- --><code>Dispatch Queue</code>的优先级。<!-- --></p>
<!-- --><p>修改用户队列的目标队列，使多个serial queue在目标queue上一次只有一个执行。</p>
<!-- --><pre class="language-objectivec"><code class="language-objectivec code-highlight"><span class="code-line"> <!-- --><span class="token comment">// dispatch_set_target_queue(&lt;#dispatch_object_t  _Nonnull object#&gt;, dispatch_queue_t  _Nullable queue)</span>
<!-- --></span><span class="code-line">
</span><span class="code-line">   dispatch_queue_t globalDispatchQueueBackground <!-- --><span class="token operator">=</span> <!-- --><span class="token function">dispatch_get_global_queue</span><span class="token punctuation">(</span>DISPATCH_QUEUE_PRIORITY_BACKGROUND<!-- --><span class="token punctuation">,</span> <!-- --><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">
</span><span class="code-line">   <!-- --><span class="token function">dispatch_set_target_queue</span><span class="token punctuation">(</span>mySerialDispatchQueue<!-- --><span class="token punctuation">,</span> globalDispatchQueueBackground<!-- --><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span></code></pre>
<!-- --><p>指定要变更执行优先级的Dispatch Queue 为 dispatch_set_target_queue函数的第一个参数，指定与要使用的执行优先级相同优先级的Global Dispatch Queue为第二个参数（目标）。第一个参数如果指定系统提供的Main Dispatch Queue 和 Global Dispatch Queue 则不知道会出现什么情况。因为你不能给系统的queue设置权限，所以这些均不可指定。</p>
<!-- --><p>一般都是把一个任务放到一个串行的queue中，如果这个任务被拆分了，被放置到多个串行的queue中，但实际还是需要这个任务同步执行，那么就会有问题，因为多个串行queue之间是并行的。这时使用dispatch_set_target_queue将多个串行的queue指定到了同一目标，那么着多个串行queue在目标queue上就是同步执行的，不再是并行执行。</p>
<!-- --><h2 id="dispatch_after"><a aria-hidden="true" tabindex="-1" href="#dispatch_after"><span class="icon icon-link"></span></a>dispatch_after<!-- --></h2>
<!-- --><pre class="language-objectivec"><code class="language-objectivec code-highlight"><span class="code-line">    dispatch_time_t time <!-- --><span class="token operator">=</span> <!-- --><span class="token function">dispatch_time</span><span class="token punctuation">(</span>DISPATCH_TIME_NOW<!-- --><span class="token punctuation">,</span><span class="token punctuation">(</span>int64_t<!-- --><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span> <!-- --><span class="token operator">*</span> NSEC_PER_SEC<!-- --><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">     <!-- --><span class="token function">dispatch_after</span><span class="token punctuation">(</span><span class="token function">dispatch_time</span><span class="token punctuation">(</span>DISPATCH_TIME_NOW<!-- --><span class="token punctuation">,</span> <!-- --><span class="token punctuation">(</span>int64_t<!-- --><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">33</span> <!-- --><span class="token operator">*</span> NSEC_PER_SEC<!-- --><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <!-- --><span class="token function">dispatch_get_main_queue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <!-- --><span class="token operator">^</span><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">        <!-- --><span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;waited at least three seconds&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">
</span></code></pre>
<!-- --><p>dispatch_after 函数并不是在指定时间后执行，只是在指定时间追加处理到Dispatch Queue中。</p>
<!-- --><p>第一个参数是指定时间用的dispatch_time_t 类型的值。使用dispatch_time 或者dispatch_walltimeb</p>
<!-- --><p>第二个参数指定要追加处理的Dispatch Queuede，第三个参数指定执行处理的block。</p>
<!-- --><h2 id="dispatch-group"><a aria-hidden="true" tabindex="-1" href="#dispatch-group"><span class="icon icon-link"></span></a>Dispatch Group<!-- --></h2>
<!-- --><p>在追加到<!-- --><code>Dispatch Queue</code>中的多个处理全部结束后执行结束处理。<!-- --></p>
<!-- --><ul>
<!-- --><li>将执行的处理全部追加到 一个<!-- --><code>Serial Dispatch Queue</code>中，并在最后追加结束处理。<!-- --></li>
<!-- --><li>但是在并行队列中可以使用<!-- --><code>Dispatch Group</code>实现。<!-- --></li>
<!-- --></ul>
<!-- --><p>Target：追加3个<!-- --><code>block</code>到<!-- --><code>Global Dispatch Queue</code> 中，这些<!-- --><code>Block</code>如果全部执行完成，就会执行<!-- --><code>Main Dispatch Queue</code>中结束处理的<!-- --><code>Block</code>。<!-- --></p>
<!-- --><pre class="language-objectivec"><code class="language-objectivec code-highlight"><span class="code-line">    dispatch_group_t group <!-- --><span class="token operator">=</span> <!-- --><span class="token function">dispatch_group_create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">    dispatch_queue_t queue <!-- --><span class="token operator">=</span> <!-- --><span class="token function">dispatch_get_global_queue</span><span class="token punctuation">(</span>DISPATCH_QUEUE_PRIORITY_DEFAULT<!-- --><span class="token punctuation">,</span> <!-- --><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token function">dispatch_group_async</span><span class="token punctuation">(</span>group<!-- --><span class="token punctuation">,</span> queue<!-- --><span class="token punctuation">,</span> <!-- --><span class="token operator">^</span><span class="token punctuation">{</span>  <!-- --><span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;blk0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token function">dispatch_group_async</span><span class="token punctuation">(</span>group<!-- --><span class="token punctuation">,</span> queue<!-- --><span class="token punctuation">,</span> <!-- --><span class="token operator">^</span><span class="token punctuation">{</span>  <!-- --><span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;blk1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token function">dispatch_group_async</span><span class="token punctuation">(</span>group<!-- --><span class="token punctuation">,</span> queue<!-- --><span class="token punctuation">,</span> <!-- --><span class="token operator">^</span><span class="token punctuation">{</span>  <!-- --><span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;blk2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token function">dispatch_group_async</span><span class="token punctuation">(</span>group<!-- --><span class="token punctuation">,</span> queue<!-- --><span class="token punctuation">,</span> <!-- --><span class="token operator">^</span><span class="token punctuation">{</span>  <!-- --><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <!-- --><span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;blk3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token function">dispatch_group_async</span><span class="token punctuation">(</span>group<!-- --><span class="token punctuation">,</span> queue<!-- --><span class="token punctuation">,</span> <!-- --><span class="token operator">^</span><span class="token punctuation">{</span>  <!-- --><span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;blk4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token function">dispatch_group_notify</span><span class="token punctuation">(</span>group<!-- --><span class="token punctuation">,</span> <!-- --><span class="token function">dispatch_get_main_queue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <!-- --><span class="token operator">^</span><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">        <!-- --><span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;over&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">
</span></code></pre>
<!-- --><p><strong>解析：</strong> 向并行线程追加处理，多个线程并行执行，所以执行的顺序不定。 但是<!-- --><code>”over”</code>一定是最后执行的。另外，也可以使用<!-- --><code>dispatch_group_wait</code>函数，仅等待全部处理执行结束。<!-- --></p>
<!-- --><pre class="language-objectivec"><code class="language-objectivec code-highlight"><span class="code-line">    dispatch_group_t group <!-- --><span class="token operator">=</span> <!-- --><span class="token function">dispatch_group_create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">    dispatch_queue_t queue <!-- --><span class="token operator">=</span> <!-- --><span class="token function">dispatch_get_global_queue</span><span class="token punctuation">(</span>DISPATCH_QUEUE_PRIORITY_DEFAULT<!-- --><span class="token punctuation">,</span> <!-- --><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token function">dispatch_group_async</span><span class="token punctuation">(</span>group<!-- --><span class="token punctuation">,</span> queue<!-- --><span class="token punctuation">,</span> <!-- --><span class="token operator">^</span><span class="token punctuation">{</span>  <!-- --><span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;blk0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token function">dispatch_group_async</span><span class="token punctuation">(</span>group<!-- --><span class="token punctuation">,</span> queue<!-- --><span class="token punctuation">,</span> <!-- --><span class="token operator">^</span><span class="token punctuation">{</span>  <!-- --><span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;blk1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token function">dispatch_group_async</span><span class="token punctuation">(</span>group<!-- --><span class="token punctuation">,</span> queue<!-- --><span class="token punctuation">,</span> <!-- --><span class="token operator">^</span><span class="token punctuation">{</span>  <!-- --><span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;blk2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token function">dispatch_group_async</span><span class="token punctuation">(</span>group<!-- --><span class="token punctuation">,</span> queue<!-- --><span class="token punctuation">,</span> <!-- --><span class="token operator">^</span><span class="token punctuation">{</span>  <!-- --><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <!-- --><span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;blk3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token function">dispatch_group_async</span><span class="token punctuation">(</span>group<!-- --><span class="token punctuation">,</span> queue<!-- --><span class="token punctuation">,</span> <!-- --><span class="token operator">^</span><span class="token punctuation">{</span>  <!-- --><span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;blk4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token function">dispatch_group_wait</span><span class="token punctuation">(</span>group<!-- --><span class="token punctuation">,</span> DISPATCH_TIME_FOREVER<!-- --><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;over&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">
</span></code></pre>
<!-- --><p><code>dispatch_group_wait</code>的二个参数是等待的时间。如果返回值为0，则表示所有的任务执行完毕。否则，group中仍有任务在执行。<!-- --></p>
<!-- --><h2 id="dispatch_barrier_async"><a aria-hidden="true" tabindex="-1" href="#dispatch_barrier_async"><span class="icon icon-link"></span></a>dispatch_barrier_async<!-- --></h2>
<!-- --><p>在访问数据库或文件时，使用<!-- --><code>Serial Dispatch Queue</code>能避免数据竞争的问题。<!-- --></p>
<!-- --><p>写入处理确实不能与其他的写入处理以及包含读取处理的其他某些处理并行执行。但是如果读取处理只是与读取处理并行执行，那么多个并行执行就不会发生问题。</p>
<!-- --><p>首先<!-- --><code>dispatch_queue</code>生成函数<!-- --><code>Concurrent Dispatch Queue</code>,在<!-- --><code>dispatch_async</code>中追加读取操作。<!-- --></p>
<!-- --><pre class="language-objectivec"><code class="language-objectivec code-highlight"><span class="code-line">dispatch_queue_t <!-- --><span class="token operator">=</span> queue <!-- --><span class="token operator">=</span> <!-- --><span class="token function">dispatch_queue_create</span><span class="token punctuation">(</span><span class="token string">&quot;com.example.gcd.ForBarrier&quot;</span><span class="token punctuation">,</span> DISPATCH_QUEUE_CONCURRENT<!-- --><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line"><span class="token function">dispatch_async</span><span class="token punctuation">(</span>queue<!-- --><span class="token punctuation">,</span> blk0_for_reading<!-- --><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line"><span class="token function">dispatch_async</span><span class="token punctuation">(</span>queue<!-- --><span class="token punctuation">,</span> blk2_for_reading<!-- --><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line"><span class="token function">dispatch_async</span><span class="token punctuation">(</span>queue<!-- --><span class="token punctuation">,</span> blk3_for_reading<!-- --><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line"><span class="token function">dispatch_barrier_async</span><span class="token punctuation">(</span>queue<!-- --><span class="token punctuation">,</span> blk_for_writing<!-- --><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line"><span class="token function">dispatch_async</span><span class="token punctuation">(</span>queue<!-- --><span class="token punctuation">,</span> blk4_for_reading<!-- --><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line"><span class="token function">dispatch_async</span><span class="token punctuation">(</span>queue<!-- --><span class="token punctuation">,</span> blk5_for_reading<!-- --><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line"><span class="token function">dispatch_async</span><span class="token punctuation">(</span>queue<!-- --><span class="token punctuation">,</span> blk6_for_reading<!-- --><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span></code></pre>
<!-- --><h2 id="dispatch_sync"><a aria-hidden="true" tabindex="-1" href="#dispatch_sync"><span class="icon icon-link"></span></a>dispatch_sync<!-- --></h2>
<!-- --><p><code>dispatch_async</code>函数是<!-- --><code>非同步</code>的，即将指定的Block<!-- --><code>非同步</code>的加入到指定的<!-- --><code>Dispatch Queue</code>中，<!-- --><code>dispatch_sync</code>函数不做任何等待。<!-- --></p>
<!-- --><p><code>dispatch_sync</code>函数<!-- --><code>同步</code>的将Block追加到<!-- --><code>Dispatch Queue</code>中，在Block结束之前，函数会一直等待。<!-- --></p>
<!-- --><p>经常使用的一种情形是：执行<!-- --><code>Main Dispatch Queue</code>时，使用另外的线程<!-- --><code>Global Dispatch Queue</code>进行处理，处理结束后立即使用所得到的结果。<!-- --></p>
<!-- --><pre class="language-objectivec"><code class="language-objectivec code-highlight"><span class="code-line"><span class="token function">dispatch_async</span><span class="token punctuation">(</span><span class="token function">dispatch_get_global_queue</span><span class="token punctuation">(</span>DISPATCH_QUEUE_PRIORITY_DEFAULT<!-- --><span class="token punctuation">,</span> <!-- --><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">^</span><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">  <!-- --><span class="token comment">/*
</span></span><span class="code-line"><span class="token comment">   处理
</span></span><span class="code-line"><span class="token comment">   */</span>
<!-- --></span><span class="code-line">   <!-- --><span class="token function">dispatch_sync</span><span class="token punctuation">(</span><span class="token function">dispatch_get_main_queue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <!-- --><span class="token operator">^</span><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">     <!-- --><span class="token comment">// 主线程操作，如刷新UI</span>
<!-- --></span><span class="code-line">     <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">  <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span></code></pre>
<!-- --><p>一旦调用<!-- --><code>dispatch_sync</code>函数，那么在指定的处理结束之前，该函数都不会返回。也是因为这个特性，在使用不当时，便会造成一个严重的问题，即<!-- --><code>死锁</code>。<!-- --></p>
<!-- --><p>例如在主线程中使用：</p>
<!-- --><pre class="language-objectivec"><code class="language-objectivec code-highlight"><span class="code-line"><span class="token function">dispatch_sync</span><span class="token punctuation">(</span><span class="token function">dispatch_get_main_queue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <!-- --><span class="token operator">^</span><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">  <!-- --><span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;Hello????&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">  <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span></code></pre>
<!-- --><h2 id="dispatch_apply"><a aria-hidden="true" tabindex="-1" href="#dispatch_apply"><span class="icon icon-link"></span></a>dispatch_apply<!-- --></h2>
<!-- --><p><code>dispatch_apply</code>函数是<!-- --><code>dispatch_sync</code>和<!-- --><code>Dispatch Group</code>的关联API。
它按指定的次数将指定的<!-- --><code>Block</code>追加到指定的<!-- --><code>Dispatch Queue</code>,并等待全部处理执行结束。<!-- --></p>
<!-- --><pre class="language-objectivec"><code class="language-objectivec code-highlight"><span class="code-line">dispatch_queue queue <!-- --><span class="token operator">=</span> <!-- --><span class="token function">dispatch_get_global_queue</span><span class="token punctuation">(</span>DISPATCH_QUEUE_PRIORITY_DEFAULT<!-- --><span class="token punctuation">,</span> <!-- --><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line"><span class="token function">dispatch_apply</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> queue<!-- --><span class="token punctuation">,</span> <!-- --><span class="token operator">^</span><span class="token punctuation">(</span>size_t index<!-- --><span class="token punctuation">)</span><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">  <!-- --><span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;%zu&quot;</span><span class="token punctuation">,</span>index<!-- --><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">  <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span><span class="code-line">  <!-- --><span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;Done&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <!-- --><span class="token comment">// 最后执行！</span>
<!-- --></span></code></pre>
<!-- --><h2 id="dispatch_suspenddispatch_resume"><a aria-hidden="true" tabindex="-1" href="#dispatch_suspenddispatch_resume"><span class="icon icon-link"></span></a>dispatch_suspend/dispatch_resume<!-- --></h2>
<!-- --><p><code>dispatch_suspend</code>挂起指定的<!-- --><code>Dispatch Queue</code>。
‵‵‵
dispatch_suspend(queue);
‵‵‵
<!-- --><code>dispatch_resume</code>恢复指定的<!-- --><code>Dispatch Queue</code>。<!-- --></p>
<!-- --><h2 id="dispatch_once"><a aria-hidden="true" tabindex="-1" href="#dispatch_once"><span class="icon icon-link"></span></a>dispatch_once<!-- --></h2>
<!-- --><pre><code class="code-highlight"><span class="code-line">static int initialized = NO;
</span><span class="code-line">if (initialized == NO) {
</span><span class="code-line">    /*
</span><span class="code-line">     * 初始化
</span><span class="code-line">     */
</span><span class="code-line">}
</span></code></pre>
<!-- --><pre class="language-objectivec"><code class="language-objectivec code-highlight"><span class="code-line"><span class="token keyword">static</span> dispatch_once_t pred<!-- --><span class="token punctuation">;</span>
<!-- --></span><span class="code-line"><span class="token function">dispatch_once</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>pred<!-- --><span class="token punctuation">,</span> <!-- --><span class="token operator">^</span><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">   <!-- --><span class="token comment">/*
</span></span><span class="code-line"><span class="token comment">    * 初始化
</span></span><span class="code-line"><span class="token comment">    */</span>
<!-- --></span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --></span></code></pre>
<!-- --><p>通过<!-- --><code>dispatch_once</code> 函数，代码即使在多线程环境下执行，也可保证百分之百安全。<!-- --></p>
<!-- --><p>第一组代码在大多数情况下也是安全的。但在多核CPU中，在正在更新的表示是否初始化的标志变量时，读取，就有可能多次执行初始化处理。而用<!-- --><code>dispatch_once</code>函数初始化就不必担心这样的问题。<!-- --></p>
<!-- --><p><a href="http://www.dreamingwish.com/article/gcd-guide-dispatch-once-1.html">GCD外传：dispatch_once(上)</a></p></div></section><section class="post-full-content"><div class="post-full-comments"><div class="giscus" id="comments-container"></div></div></section></article></div></main><aside class="read-next outer"><div class="inner"><div class="read-next-feed"><article class="read-next-card"><header class="read-next-card-header"><h3><span>More in</span> <!-- --><a href="/tag/ios/">iOS</a></h3></header><div class="read-next-card-content"><ul><li><h4><a href="/posts/2016/arc-in-swift/">Swift:Automatic Reference Counting in Swift</a></h4><div class="read-next-card-meta"><p><time dateTime="2016-12-30T00:00:00.000Z">30 December, 2016</time> – <!-- -->24 min read<!-- --></p></div></li><li><h4><a href="/posts/2016/ios-remotenotification/">iOS:关于iOS的推送</a></h4><div class="read-next-card-meta"><p><time dateTime="2016-12-23T00:00:00.000Z">23 December, 2016</time> – <!-- -->5 min read<!-- --></p></div></li><li><h4><a href="/posts/2017/ios-carthage/">Carthage 的简单使用</a></h4><div class="read-next-card-meta"><p><time dateTime="2017-06-19T12:57:37.000Z">19 June, 2017</time> – <!-- -->2 min read<!-- --></p></div></li></ul></div><footer class="read-next-card-footer"><a href="/tag/ios/">See all 12 posts<!-- --> <!-- -->→<!-- --></a></footer></article><article class="post-card post tag-runtime tag-ios "><a class="post-card-image-link" aria-label="Objective-C Runtime" href="/posts/2017/objc-runtime/"><div class="post-card-image"><span style="box-sizing:border-box;display:block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:absolute;top:0;left:0;bottom:0;right:0"><img alt="Objective-C Runtime" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="fill" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover"/><noscript><img alt="Objective-C Runtime" sizes="100vw" srcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 640w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 750w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 828w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 1080w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 1200w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 1920w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 2048w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 3840w" src="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg" decoding="async" data-nimg="fill" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></a><div class="post-card-content"><a class="post-card-content-link" href="/posts/2017/objc-runtime/"><header class="post-card-header"><div class="post-card-primary-tag">runtime</div><h2 class="post-card-title">Objective-C Runtime</h2></header><section class="post-card-excerpt"><p></p></section></a><footer class="post-card-meta"><ul class="author-list"><li class="author-list-item"><div class="author-name-tooltip">Roninro</div><a class="static-avatar" aria-label="Roninro" href="/author/roninro/"><span style="box-sizing:border-box;display:block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;padding-top:100%"></span><img alt="Roninro" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="responsive" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="Roninro" sizes="100vw" srcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 640w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 750w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 828w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 1080w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 1200w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 1920w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 2048w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 3840w" src="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg" decoding="async" data-nimg="responsive" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></a></li></ul><div class="post-card-byline-content"><span><span><a href="/author/roninro/">Roninro</a></span></span><span class="post-card-byline-date"><time dateTime="2017-05-24T00:00:00.000Z">24 May 2017<!-- --> <!-- --></time><span class="bull">• </span> <!-- -->3 min read<!-- --></span></div></footer></div></article><article class="post-card post tag-ios tag-swift "><a class="post-card-image-link" aria-label="Swift:Automatic Reference Counting in Swift" href="/posts/2016/arc-in-swift/"><div class="post-card-image"><span style="box-sizing:border-box;display:block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:absolute;top:0;left:0;bottom:0;right:0"><img alt="Swift:Automatic Reference Counting in Swift" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="fill" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover"/><noscript><img alt="Swift:Automatic Reference Counting in Swift" sizes="100vw" srcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/altumcode-unsplash.webp 640w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/altumcode-unsplash.webp 750w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/altumcode-unsplash.webp 828w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/altumcode-unsplash.webp 1080w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/altumcode-unsplash.webp 1200w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/altumcode-unsplash.webp 1920w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/altumcode-unsplash.webp 2048w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/altumcode-unsplash.webp 3840w" src="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/altumcode-unsplash.webp" decoding="async" data-nimg="fill" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></a><div class="post-card-content"><a class="post-card-content-link" href="/posts/2016/arc-in-swift/"><header class="post-card-header"><div class="post-card-primary-tag">iOS</div><h2 class="post-card-title">Swift:Automatic Reference Counting in Swift</h2></header><section class="post-card-excerpt"><p></p></section></a><footer class="post-card-meta"><ul class="author-list"><li class="author-list-item"><div class="author-name-tooltip">Roninro</div><a class="static-avatar" aria-label="Roninro" href="/author/roninro/"><span style="box-sizing:border-box;display:block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;padding-top:100%"></span><img alt="Roninro" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="responsive" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="Roninro" sizes="100vw" srcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 640w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 750w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 828w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 1080w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 1200w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 1920w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 2048w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 3840w" src="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg" decoding="async" data-nimg="responsive" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></a></li></ul><div class="post-card-byline-content"><span><span><a href="/author/roninro/">Roninro</a></span></span><span class="post-card-byline-date"><time dateTime="2016-12-30T00:00:00.000Z">30 Dec 2016<!-- --> <!-- --></time><span class="bull">• </span> <!-- -->24 min read<!-- --></span></div></footer></div></article></div></div></aside><footer class="site-footer outer"><div class="site-footer-content inner"><section class="copyright"><a href="https://fninit.com/">RoninRo&#x27;s Blog</a> © <!-- -->2022<!-- --></section><nav class="site-footer-nav"><a href="/">Latest Posts</a><a href="https://fninit.com" target="_blank" rel="noopener noreferrer">Roninro</a></nav></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"cmsData":{"settings":{"darkMode":{"defaultMode":"light","overrideOS":true},"nextImages":{"feature":true,"inline":true,"quality":80,"source":false},"rssFeed":true,"toc":{"enable":true,"maxDepth":2},"commenting":{"system":"giscus","disqusShortname":"","giscusConfig":{"repo":"roninro/blog","repoId":"MDEwOlJlcG9zaXRvcnkzMDkyNTUzODI","category":"Comments","categoryId":"DIC_kwDOEm7c1s4B_sst","mapping":"pathname","emitMetadata":false,"reactionsEnabled":true}},"siteUrl":"https://fninit.com","title":"RoninRo's Blog","description":"Thoughts, stories and ideas.","logo":"/images/logo.png","cover_image":"","facebook":"","twitter":"","lang":"en","navigation":[{"label":"Home","url":"/"},{"label":"About","url":"/about/"}],"secondary_navigation":[],"logoImage":{"url":"/images/logo.png","dimensions":{"width":500,"height":405}}},"post":{"slug":"/posts/2017/objc-gcd","title":"读:《Objective-C高级编程》之GCD","date":"2017-01-17T00:00:00.000Z","excerpt":null,"draft":false,"page":false,"comment":true,"featureImage":{"url":"/images/wOZ0yyfTV5w-unsplash.jpg","dimensions":{"width":2000,"height":1333}},"toc":null,"tags":[{"name":"iOS","slug":"ios","count":12},{"name":"gcd","slug":"gcd"}],"authors":[{"slug":"roninro","name":"Roninro","cover_image":"/images/publication-cover.png","profileImage":{"url":"/images/avatar.jpg","dimensions":{"width":1080,"height":1080}},"location":"THE INTERNET","bio":"Software Development Engineer","twitter":"@xxxxx","facebook":"xxxxxx"}],"primary_tag":{"name":"iOS","slug":"ios","count":12},"reading_time":"13 min read","mdxSource":"var Component=(()=\u003e{var u=Object.create;var l=Object.defineProperty;var r=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var i=a=\u003el(a,\"__esModule\",{value:!0});var k=(a,c)=\u003e()=\u003e(c||a((c={exports:{}}).exports,c),c.exports),_=(a,c)=\u003e{for(var s in c)l(a,s,{get:c[s],enumerable:!0})},o=(a,c,s,e)=\u003e{if(c\u0026\u0026typeof c==\"object\"||typeof c==\"function\")for(let t of h(c))!N.call(a,t)\u0026\u0026(s||t!==\"default\")\u0026\u0026l(a,t,{get:()=\u003ec[t],enumerable:!(e=r(c,t))||e.enumerable});return a},g=(a,c)=\u003eo(i(l(a!=null?u(m(a)):{},\"default\",!c\u0026\u0026a\u0026\u0026a.__esModule?{get:()=\u003ea.default,enumerable:!0}:{value:a,enumerable:!0})),a),b=(a=\u003e(c,s)=\u003ea\u0026\u0026a.get(c)||(s=o(i({}),c,1),a\u0026\u0026a.set(c,s),s))(typeof WeakMap!=\"undefined\"?new WeakMap:0);var d=k((S,p)=\u003e{p.exports=_jsx_runtime});var Q={};_(Q,{default:()=\u003eq,frontmatter:()=\u003ef});var n=g(d()),f={categories:[\"iOS\"],date:new Date(14846112e5),tags:[\"iOS\",\"gcd\"],title:\"\\u8BFB:\\u300AObjective-C\\u9AD8\\u7EA7\\u7F16\\u7A0B\\u300B\\u4E4BGCD\",authors:[\"Roninro\"],feature_image:\"/images/wOZ0yyfTV5w-unsplash.jpg\"};function D(a={}){let{wrapper:c}=a.components||{};return c?(0,n.jsx)(c,Object.assign({},a,{children:(0,n.jsx)(s,{})})):s();function s(){let e=Object.assign({h1:\"h1\",a:\"a\",span:\"span\",blockquote:\"blockquote\",p:\"p\",code:\"code\",h2:\"h2\",pre:\"pre\",table:\"table\",thead:\"thead\",tr:\"tr\",th:\"th\",tbody:\"tbody\",td:\"td\",ul:\"ul\",li:\"li\",strong:\"strong\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.h1,{id:\"\\u4EC0\\u4E48\\u662Fgcd\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u4EC0\\u4E48\\u662Fgcd\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u4EC0\\u4E48\\u662FGCD\"]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"Grand Central Dispatch(GCD)\"}),\"\\u662F\\u5F02\\u6B65\\u6267\\u4EFB\\u52A1\\u7684\\u6280\\u672F\\u4E4B\\u4E00\\u3002\\u4E00\\u822C\\u5C06\\u5E94\\u7528\\u7A0B\\u5E8F\\u4E2D\\u8BB0\\u8FF0\\u7684\\u7EBF\\u7A0B\\u7BA1\\u7406\\u7528\\u7684\\u4EE3\\u7801\\u5728\\u7CFB\\u7EDF\\u7EA7\\u4E2D\\u5B9E\\u73B0\\u3002\\u5F00\\u53D1\\u53EA\\u9700\\u8981\\u5B9A\\u4E49\\u60F3\\u6267\\u884C\\u5E76\\u8FFD\\u52A0\\u5230\\u9002\\u5F53\\u7684\",(0,n.jsx)(e.code,{children:\"Dispatch Queue\"}),\" \\u4E2D\\uFF0C\",(0,n.jsx)(e.code,{children:\"GCD\"}),\"\\u5C31\\u80FD\\u751F\\u6210\\u5FC5\\u8981\\u7684\\u7EBF\\u7A0B\\u5E76\\u8BA1\\u5212\\u6267\\u884C\\u4EFB\\u52A1\\uFF0C\\u7531\\u4E8E\\u7EBF\\u7A0B\\u7BA1\\u7406\\u662F\\u4F5C\\u4E3A\\u7CFB\\u7EDF\\u7684\\u4E00\\u90E8\\u5206\\u6765\\u5B9E\\u73B0\\u7684\\uFF0C\\u56E0\\u6B64\\u53EF\\u7EDF\\u4E00\\u7BA1\\u7406\\uFF0C\\u4E5F\\u53EF\\u4EE5\\u6267\\u884C\\u4EFB\\u52A1\\uFF0C\\u8FD9\\u6837\\u5C31\\u6BD4\\u4EE5\\u524D\\u7684\\u7EBF\\u7A0B\\u66F4\\u6709\\u6548\\u7387\\u3002\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.h1,{id:\"\\u5173\\u4E8E\\u591A\\u7EBF\\u7A0B\\u7F16\\u7A0B\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u5173\\u4E8E\\u591A\\u7EBF\\u7A0B\\u7F16\\u7A0B\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u5173\\u4E8E\\u591A\\u7EBF\\u7A0B\\u7F16\\u7A0B\"]}),`\n`,(0,n.jsxs)(e.p,{children:[`\\u7EBF\\u7A0B\\u662F\\u64CD\\u4F5C\\u7CFB\\u7EDF\\u80FD\\u591F\\u8FDB\\u884C\\u8FD0\\u7B97\\u8C03\\u5EA6\\u7684\\u6700\\u5C0F\\u5355\\u4F4D\\u3002\\u5B83\\u88AB\\u5305\\u542B\\u5728\\u8FDB\\u7A0B\\u4E4B\\u4E2D\\uFF0C\\u662F\\u8FDB\\u7A0B\\u4E2D\\u7684\\u5B9E\\u9645\\u8FD0\\u4F5C\\u5355\\u4F4D\\u3002\\u4E00\\u6761\\u7EBF\\u7A0B\\u6307\\u7684\\u662F\\u8FDB\\u7A0B\\u4E2D\\u4E00\\u4E2A\\u5355\\u4E00\\u987A\\u5E8F\\u7684\\u63A7\\u5236\\u6D41\\u3002\n\\u4E00\\u4E2A`,(0,n.jsx)(e.code,{children:\"CPU\"}),\" \\u4E00\\u6B21\\u53EA\\u80FD\\u6267\\u884C\\u4E00\\u4E2A\\u547D\\u4EE4\\uFF0C\\u4E0D\\u80FD\\u6267\\u884C\\u67D0\\u5904\\u5206\\u5F00\\u7684\\u5E76\\u5217\\u7684\\u4E24\\u4E2A\\u547D\\u4EE4\\u3002\\u56E0\\u6B64\\u901A\\u8FC7\",(0,n.jsx)(e.code,{children:\"CPU\"}),\"\\u6267\\u884C\\u7684\",(0,n.jsx)(e.code,{children:\"CPU\\u547D\\u4EE4\"}),\"\\u5C31\\u597D\\u6BD4\\u4E00\\u6761\\u65E0\\u5206\\u53C9\\u7684\\u5927\\u9053\\uFF0C\\u5176\\u6267\\u884C\\u4E0D\\u4F1A\\u51FA\\u73B0\\u5206\\u6B67\\u3002\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"OS X\"}),\"\\u548C\",(0,n.jsx)(e.code,{children:\"iOS\"}),\"\\u7684\\u6838\\u5FC3\",(0,n.jsx)(e.code,{children:\"XNU\\u5185\\u6838\"}),\"\\u5728\\u53D1\\u751F\\u64CD\\u4F5C\\u7CFB\\u7EDF\\u4E8B\\u4EF6\\u65F6\\uFF0C\\u4F1A\\u5207\\u6362\\u6267\\u884C\\u8DEF\\u5F84\\uFF0C\\u6267\\u884C\\u4E2D\\u7684\\u72B6\\u6001\\uFF0C\\u4F8B\\u5982\",(0,n.jsx)(e.code,{children:\"CPU\"}),\"\\u7684\\u5BC4\\u5B58\\u5668\\u7B49\\u4FE1\\u606F\\u4FDD\\u5B58\\u5230\\u5404\\u81EA\\u8DEF\\u5F84\\u4E13\\u7528\\u7684\\u5185\\u5B58\\u5757\\u4E2D\\uFF0C\\u4ECE\\u5207\\u6362\\u76EE\\u6807\\u8DEF\\u5F84\\u4E13\\u7528\\u7684\\u5185\\u5B58\\u5757\\u4E2D\\uFF0C\\u590D\\u539F\",(0,n.jsx)(e.code,{children:\"CPU\"}),\"\\u5BC4\\u5B58\\u5668\\u7B49\\u4FE1\\u606F\\uFF0C\\u7EE7\\u7EED\\u6267\\u884C\\u5207\\u6362\\u8DEF\\u5F84\\u7684\",(0,n.jsx)(e.code,{children:\"CPU\"}),\"\\u547D\\u4EE4\\u884C\\u3002\\u8FD9\\u5C31\\u79F0\\u4E3A\",(0,n.jsx)(e.code,{children:\"\\u4E0A\\u4E0B\\u6587\\u5207\\u6362\"}),\"\\u3002\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u7531\\u4E8E\\u4F7F\\u7528\\u591A\\u7EBF\\u7A0B\\u7684\\u7A0B\\u5E8F\\u53EF\\u4EE5\\u5728\\u67D0\\u4E2A\\u7EBF\\u7A0B\\u548C\\u5176\\u4ED6\\u7EBF\\u7A0B\\u4E4B\\u95F4\\u53CD\\u590D\\u591A\\u6B21\\u7684\\u8FDB\\u884C\\u4E0A\\u4E0B\\u6587\\u5207\\u6362\\uFF0C\\u56E0\\u6B64\\u770B\\u4E0A\\u53BB\\u5C31\\u597D\\u50CF1\\u4E2A\",(0,n.jsx)(e.code,{children:\"CPU\"}),\"\\u6838\\u80FD\\u591F\\u5E76\\u5217\\u7684\\u6267\\u884C\\u591A\\u4E2A\\u7EBF\\u7A0B\\u4E00\\u6837\\uFF0C\\u800C\\u4E14\\u5728\\u5177\\u6709\\u591A\\u4E2A\",(0,n.jsx)(e.code,{children:\"CPU\"}),\"\\u6838\\u7684\\u60C5\\u51B5\\u4E0B\\uFF0C\\u5C31\\u662F\\u771F\\u7684\\u63D0\\u4F9B\\u591A\\u4E2A\",(0,n.jsx)(e.code,{children:\"CPU\"}),\"\\u6838\\u5E76\\u884C\\u6267\\u884C\\u591A\\u4E2A\\u7EBF\\u7A0B\\u7684\\u6280\\u672F\\u3002\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u8FD9\\u79CD\\u5229\\u7528\\u591A\\u7EBF\\u7A0B\\u7F16\\u7A0B\\u7684\\u6280\\u672F\\u5C31\\u79F0\\u4E3A\\u201C\\u591A\\u7EBF\\u7A0B\\u7F16\\u7A0B\\u201D\\u3002\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u4F46\\u662F\\uFF0C\\u591A\\u7EBF\\u7A0B\\u7F16\\u7A0B\\u5B9E\\u9645\\u4E0A\\u662F\\u4E00\\u79CD\\u6613\\u53D1\\u751F\\u5404\\u79CD\\u95EE\\u9898\\u7684\\u7F16\\u7A0B\\u6280\\u672F\\u3002\\u6BD4\\u5982\\u591A\\u4E2A\\u7EBF\\u7A0B\\u66F4\\u65B0\\u76F8\\u540C\\u7684\\u8D44\\u6E90\\u4F1A\\u5BFC\\u81F4\\u6570\\u636E\\u7684\\u4E0D\\u4E00\\u81F4\\uFF08\\u6570\\u636E\\u7ADE\\u4E89\\uFF09\\u3001\\u505C\\u6B62\\u7B49\\u5F85\\u4E8B\\u4EF6\\u7684\\u7EBF\\u7A0B\\u4F1A\\u5BFC\\u81F4\\u591A\\u4E2A\\u7EBF\\u7A0B\\u76F8\\u4E92\\u6301\\u7EED\\u7B49\\u5F85\\uFF08\\u6B7B\\u9501\\uFF09\\u3001\\u4F7F\\u7528\\u592A\\u591A\\u7EBF\\u7A0B\\u4F1A\\u6D88\\u8017\\u5927\\u91CF\\u5185\\u5B58\\u7B49\\u3002\"}),`\n`,(0,n.jsxs)(e.h1,{id:\"gcd-\\u7684-api\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#gcd-\\u7684-api\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"GCD \\u7684 API\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"dispatch-queue\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#dispatch-queue\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Dispatch Queue\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-objectivec\",children:(0,n.jsxs)(e.code,{className:\"language-objectivec code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_async\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"dispatch_queue_t  _Nonnull queue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"^\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"   \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// doSomething     \"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"Dispatch Queue\"}),\", \\u662F\\u6267\\u884C\\u5904\\u7406\\u7684\\u7B49\\u5F85\\u961F\\u5217\\u3002\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u4F7F\\u7528Block\\u8BED\\u6CD5\\u5B9A\\u4E49\",(0,n.jsx)(e.code,{children:\"\\u60F3\\u6267\\u884C\\u7684\\u4EFB\\u52A1\"}),\"\\uFF0C\\u901A\\u8FC7\",(0,n.jsx)(e.code,{children:\"dispatch_async\"}),\"\\u51FD\\u6570\\u8FFD\\u52A0\\u8D4B\\u503C\\u5728\\u53D8\\u91CFqueue\\u7684\",(0,n.jsx)(e.code,{children:\"Dispatch Queue\"}),\"\\u4E2D\\u3002\\u4EC5\\u8FD9\\u6837\\u5C31\\u53EF\\u4EE5\\u4F7F\\u6307\\u5B9A\\u7684\",(0,n.jsx)(e.code,{children:\"Block\"}),\"\\u5728\\u53E6\\u5916\\u4E00\\u4E2A\\u7EBF\\u7A0B\\u6267\\u884C\\u3002\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"Dispatch Queue\"}),\"\\u6309\\u7167FIFO\\uFF08First-In-First-Out\\uFF09\\u6267\\u884C\\u5904\\u7406\\u3002\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"Dispatch Queue\"}),\"\\u6709\\u4E24\\u79CD\\uFF1A\"]}),`\n`,(0,n.jsxs)(e.table,{children:[(0,n.jsx)(e.thead,{children:(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.th,{children:\"Dispatch Queue\"}),(0,n.jsx)(e.th,{children:\"\\u8BF4\\u660E\"})]})}),(0,n.jsxs)(e.tbody,{children:[(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:\"Serial Dispatch Queue\"}),(0,n.jsx)(e.td,{children:\"\\u7B49\\u5F85\\u73B0\\u5728\\u6267\\u884C\\u4E2D\\u5904\\u7406\\u7ED3\\u679C\"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:\"Concurrent Dispatch Queue\"}),(0,n.jsx)(e.td,{children:\"\\u4E0D\\u7B49\\u5F85\\u73B0\\u5728\\u6267\\u884C\\u4E2D\\u5904\\u7406\\u7ED3\\u679C\"})]})]})]}),`\n`,(0,n.jsxs)(e.h2,{id:\"dispatch_queue_create\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#dispatch_queue_create\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"dispatch_queue_create\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u901A\\u8FC7\",(0,n.jsx)(e.code,{children:\"dispatch_queue_create\"}),\"\\u751F\\u6210Dispatch Queue\\u3002\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5982\\u4E0B\\u751F\\u6210\\u4E00\\u4E2A Serial Dispatch Queue\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-objectivec\",children:(0,n.jsxs)(e.code,{className:\"language-objectivec code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_queue_create\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"char\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),\" _Nullable label\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" dispatch_queue_attr_t  _Nullable attr\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"dispatch_queue_t mySerialDispatchQueue \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_queue_create\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"com.example.gcd.mySerialDispatchQueue\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token constant\",children:\"NULL\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u7B2C\\u4E00\\u4E2A\\u53C2\\u6570\\u6307\\u5B9A\",(0,n.jsx)(e.code,{children:\"Dispatch Queue\"}),\"\\u7684\\u540D\\u79F0\\uFF0C\\u7B2C\\u4E8C\\u4E2A\\u53C2\\u6570\\u6307\\u5B9A\",(0,n.jsx)(e.code,{children:\"NULL/DISPATCH_QUEUE_SERIAL\"}),\" \\u751F\\u6210\",(0,n.jsx)(e.code,{children:\"Serial Dispatch Queue\"}),\"\\u3002\\u3002\\u751F\\u6210\",(0,n.jsx)(e.code,{children:\"Concurrent Dispatch Queue\"}),\"\\u65F6\\uFF0C\\u5C06\\u7B2C\\u4E8C\\u4E2A\\u53C2\\u6570\\u6307\\u5B9A\\u4E3A\",(0,n.jsx)(e.code,{children:\"DISPATCH_QUEUE_CONCURRENT\"}),\"\\uFF0C\\u5982\\u4E0B\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-objectivec\",children:(0,n.jsxs)(e.code,{className:\"language-objectivec code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"dispatch_queue_t myConcurretnDispatchQueue \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_queue_create\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"com.example.gcd.myConCurrentDispatchQueue\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" DISPATCH_QUEUE_CONCURRENT\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`})]})}),`\n`,(0,n.jsx)(e.p,{children:\"dispatch_queue_create \\u51FD\\u6570\\u7684\\u8FD4\\u56DE\\u503C\\u4E3A\\u8868\\u793ADispatch Queuede\\u7684 dispatch_queue_t\\u7C7B\\u578B\\u3002\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"Serial Dispatch Queue\"}),\" \\u4E00\\u6B21\\u53EA\\u80FD\\u6267\\u884C\\u4E00\\u4E2A\\u8FFD\\u52A0\\u4EFB\\u52A1\\u3002\\u7CFB\\u7EDF\\u5BF9\\u4E00\\u4E2A\",(0,n.jsx)(e.code,{children:\"Serial Dispatch Queue\"}),\"\\u53EA\\u751F\\u6210\\u4E00\\u5E76\\u4F7F\\u7528\\u4E00\\u4E2A\\u7EBF\\u7A0B\\uFF0C\\u5982\\u679C\\u751F\\u62102000\\u4E2A\",(0,n.jsx)(e.code,{children:\"Serial Dispatch Queue\"}),\"\\uFF0C\\u90A3\\u4E48\\u5C31\\u751F\\u62102000\\u4E2A\\u7EBF\\u7A0B\\u3002\\u5982\\u679C\\u8FC7\\u591A\\u4F7F\\u7528\\u591A\\u7EBF\\u7A0B\\u5C31\\u4F1A\\u6D88\\u8017\\u5927\\u91CF\\u5185\\u5B58\\uFF0C\\u5F15\\u8D77\\u5927\\u91CF\\u7684\\u4E0A\\u4E0B\\u6587\\u5207\\u6362\\uFF0C\\u5927\\u5E45\\u5EA6\\u964D\\u4F4E\\u7CFB\\u7EDF\\u7684\\u54CD\\u5E94\\u6027\\u80FD\\u3002\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u53EA\\u5728\\u4E3A\\u4E86\\u907F\\u514D\\u591A\\u7EBF\\u7A0B\\u7F16\\u7A0B\\u95EE\\u9898\\u4E4B\\u4E00\\u2014\\u2014\\u591A\\u4E2A\\u7EBF\\u7A0B\\u66F4\\u65B0\\u76F8\\u540C\\u8D44\\u6E90\\u5BFC\\u81F4\\u6570\\u636E\\u7ADE\\u4E89\\u65F6\\uFF0C\\u4F7F\\u7528\",(0,n.jsx)(e.code,{children:\"Serial Dispatch Queue\"})]}),`\n`,(0,n.jsx)(e.p,{children:`\\u4E0B\\u9762\\u5206\\u522B\\u6DFB\\u52A0\\u51E0\\u4E2Ablock\\u5230\\u4E24\\u4E2A\\u961F\\u5217\\u4E2D\\uFF1A\nSerial Dispatch Queue`}),`\n`,(0,n.jsx)(e.pre,{className:\"language-objectivec\",children:(0,n.jsxs)(e.code,{className:\"language-objectivec code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\tdispatch_queue_t mySerialDispatchQueue \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_queue_create\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"com.example.gcd.mySerialDispatchQueue\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token constant\",children:\"NULL\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_async\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"mySerialDispatchQueue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"^\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"NSLog\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'@\"blcok1\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_async\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"mySerialDispatchQueue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"^\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"NSLog\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'@\"block2\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_async\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"mySerialDispatchQueue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"^\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"NSLog\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'@\"block3\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_async\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"mySerialDispatchQueue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"^\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"NSLog\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'@\"block4\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),`\n`]})]})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u8F93\\u51FA\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"language-bash code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token number\",children:\"2017\"}),\"-01-19 \",(0,n.jsx)(e.span,{className:\"token number\",children:\"20\"}),\":23:50.599 gcd\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"13765\"}),\":2856357\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),` blcok1\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token number\",children:\"2017\"}),\"-01-19 \",(0,n.jsx)(e.span,{className:\"token number\",children:\"20\"}),\":23:50.599 gcd\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"13765\"}),\":2856357\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),` block2\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token number\",children:\"2017\"}),\"-01-19 \",(0,n.jsx)(e.span,{className:\"token number\",children:\"20\"}),\":23:50.599 gcd\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"13765\"}),\":2856357\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),` block3\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token number\",children:\"2017\"}),\"-01-19 \",(0,n.jsx)(e.span,{className:\"token number\",children:\"20\"}),\":23:50.599 gcd\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"13765\"}),\":2856357\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),` block4\n`]})]})}),`\n`,(0,n.jsx)(e.p,{children:\"Concurrent Dispatch Queue\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-objectivec\",children:(0,n.jsxs)(e.code,{className:\"language-objectivec code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    dispatch_queue_t myConcurretnDispatchQueue \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_queue_create\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"com.example.gcd.myConcurretnDispatchQueue\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" DISPATCH_QUEUE_CONCURRENT\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_async\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"myConcurretnDispatchQueue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"^\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"NSLog\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'@\"blcok1\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_async\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"myConcurretnDispatchQueue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"^\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"NSLog\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'@\"block2\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_async\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"myConcurretnDispatchQueue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"^\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"NSLog\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'@\"block3\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_async\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"myConcurretnDispatchQueue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"^\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"NSLog\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'@\"block4\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),`\n`]})]})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u8F93\\u51FA\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"code-highlight\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`2017-01-19 20:25:17.937 gcd[13811:2867322] blcok1\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`2017-01-19 20:25:17.937 gcd[13811:2867323] block3\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`2017-01-19 20:25:17.937 gcd[13811:2867325] block2\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`2017-01-19 20:25:17.937 gcd[13811:2867366] block4\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`...\n`})]})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5728 iOS 6+ \\u548C Mac OS X 10.8+ ARC \\u53EF\\u4EE5\\u7BA1\\u7406GCD.\\u5728\\u6B64\\u4E4B\\u524D\\uFF0C\\u7528\\u4E0B\\u9762\\u4EE3\\u7801\\u91CA\\u653Egcd\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-objectivec\",children:(0,n.jsx)(e.code,{className:\"language-objectivec code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_release\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"queue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})})}),`\n`,(0,n.jsxs)(e.h2,{id:\"main-dispatch-queueglobal-dispatch-queue\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#main-dispatch-queueglobal-dispatch-queue\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Main Dispatch Queue/Global Dispatch Queue\"]}),`\n`,(0,n.jsxs)(e.p,{children:[`Main Dispatch Queue \\u662F\\u5728\\u4E3B\\u7EBF\\u7A0B\\u4E2D\\u6267\\u884C\\u7684Dispatch Queue\\u3002 \\u662FSerial Dispatch Queue\\u3002\n\\u8FFD\\u52A0\\u5230 Main Dispatch Queue \\u7684\\u5904\\u7406\\u5B9E\\u5728\\u4E3B\\u7EBF\\u7A0B\\u7684RunLoop \\u4E2D\\u6267\\u884C\\uFF0C\\u7531\\u4E8E\\u662F\\u5728\\u4E3B\\u7EBF\\u7A0B\\u4E2D\\u6267\\u884C\\uFF0C\\u56E0\\u6B64\\u8981\\u5C06\\u7528\\u6237\\u754C\\u9762\\u66F4\\u65B0\\u7B49\\u4E00\\u4E9B\\u5FC5\\u987B\\u5728\\u4E3B\\u7EBF\\u7A0B\\u4E2D\\u6267\\u884C\\u7684\\u5904\\u7406\\u8FFD\\u52A0`,(0,n.jsx)(e.code,{children:\"Main Dispatch Queue\"}),`\\u3002\nGlobal Dispatch Queue \\u662F\\u6240\\u6709\\u5E94\\u7528\\u7A0B\\u5E8F\\u80FD\\u591F\\u4F7F\\u7528\\u7684 Concurrent Dispatch Queue\\u3002\\u6CA1\\u5FC5\\u8981\\u901A\\u8FC7dispatch_queue_create \\u9010\\u4E2A\\u751F\\u6210Concurrent Dispatch Queue\\u3002\\u53EA\\u8981\\u7684Global Dispatch Queue\\u4E2D\\u4F7F\\u7528\\u5373\\u53EF\\u3002`]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-objectivec\",children:(0,n.jsxs)(e.code,{className:\"language-objectivec code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"//\tMain Dispatch Queue\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    dispatch_queue_t mainQueue \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_get_main_queue\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:`/*\n`})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token comment\",children:`     * Global Dispatch Queue \\u4F18\\u5148\\u7EA7\\u4ECE\\u9AD8\\u5230\\u4F4E\n`})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"\t */\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    dispatch_queue_t globalQueueHigh \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_get_global_queue\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"DISPATCH_QUEUE_PRIORITY_HIGH\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    dispatch_queue_t globalQueueDefault \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_get_global_queue\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"DISPATCH_QUEUE_PRIORITY_DEFAULT\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    dispatch_queue_t globalQueueLow \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_get_global_queue\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"DISPATCH_QUEUE_PRIORITY_LOW\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    dispatch_queue_t globalQueueBackground \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_get_global_queue\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"DISPATCH_QUEUE_PRIORITY_BACKGROUND\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u4E0B\\u9762\\u662F\\u6700\\u5E38\\u89C1\\u7684Main Dispatch Queue\\u548CGlobal Dispatch Queue\\u7684\\u4F7F\\u7528\\u65B9\\u6CD5\\u3002\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-objectivec\",children:(0,n.jsxs)(e.code,{className:\"language-objectivec code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_async\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_get_global_queue\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"DISPATCH_QUEUE_PRIORITY_DEFAULT\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"^\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"       \",(0,n.jsx)(e.span,{className:\"token comment\",children:`/*\n`})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token comment\",children:`        *   \\u53EF\\u5E76\\u884C\\u7684\\u5904\\u7406\n`})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"        */\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_async\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_get_main_queue\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"^\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"//\\u53EA\\u80FD\\u5728\\u4E3B\\u7EBF\\u7A0B\\u4E2D\\u6267\\u884C\\u7684\\u5904\\u7406\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`})]})}),`\n`,(0,n.jsxs)(e.h2,{id:\"dispatch_set_target_queue\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#dispatch_set_target_queue\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"dispatch_set_target_queue\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"dispatch_set_target_queue\\u51FD\\u6570\\u662F\\u53D8\\u66F4\\u751F\\u6210\\u7684\",(0,n.jsx)(e.code,{children:\"Dispatch Queue\"}),\"\\u7684\\u4F18\\u5148\\u7EA7\\u3002\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u4FEE\\u6539\\u7528\\u6237\\u961F\\u5217\\u7684\\u76EE\\u6807\\u961F\\u5217\\uFF0C\\u4F7F\\u591A\\u4E2Aserial queue\\u5728\\u76EE\\u6807queue\\u4E0A\\u4E00\\u6B21\\u53EA\\u6709\\u4E00\\u4E2A\\u6267\\u884C\\u3002\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-objectivec\",children:(0,n.jsxs)(e.code,{className:\"language-objectivec code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\" \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// dispatch_set_target_queue(\u003c#dispatch_object_t  _Nonnull object#\u003e, dispatch_queue_t  _Nullable queue)\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"   dispatch_queue_t globalDispatchQueueBackground \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_get_global_queue\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"DISPATCH_QUEUE_PRIORITY_BACKGROUND\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"   \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_set_target_queue\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"mySerialDispatchQueue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" globalDispatchQueueBackground\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u6307\\u5B9A\\u8981\\u53D8\\u66F4\\u6267\\u884C\\u4F18\\u5148\\u7EA7\\u7684Dispatch Queue \\u4E3A dispatch_set_target_queue\\u51FD\\u6570\\u7684\\u7B2C\\u4E00\\u4E2A\\u53C2\\u6570\\uFF0C\\u6307\\u5B9A\\u4E0E\\u8981\\u4F7F\\u7528\\u7684\\u6267\\u884C\\u4F18\\u5148\\u7EA7\\u76F8\\u540C\\u4F18\\u5148\\u7EA7\\u7684Global Dispatch Queue\\u4E3A\\u7B2C\\u4E8C\\u4E2A\\u53C2\\u6570\\uFF08\\u76EE\\u6807\\uFF09\\u3002\\u7B2C\\u4E00\\u4E2A\\u53C2\\u6570\\u5982\\u679C\\u6307\\u5B9A\\u7CFB\\u7EDF\\u63D0\\u4F9B\\u7684Main Dispatch Queue \\u548C Global Dispatch Queue \\u5219\\u4E0D\\u77E5\\u9053\\u4F1A\\u51FA\\u73B0\\u4EC0\\u4E48\\u60C5\\u51B5\\u3002\\u56E0\\u4E3A\\u4F60\\u4E0D\\u80FD\\u7ED9\\u7CFB\\u7EDF\\u7684queue\\u8BBE\\u7F6E\\u6743\\u9650\\uFF0C\\u6240\\u4EE5\\u8FD9\\u4E9B\\u5747\\u4E0D\\u53EF\\u6307\\u5B9A\\u3002\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u4E00\\u822C\\u90FD\\u662F\\u628A\\u4E00\\u4E2A\\u4EFB\\u52A1\\u653E\\u5230\\u4E00\\u4E2A\\u4E32\\u884C\\u7684queue\\u4E2D\\uFF0C\\u5982\\u679C\\u8FD9\\u4E2A\\u4EFB\\u52A1\\u88AB\\u62C6\\u5206\\u4E86\\uFF0C\\u88AB\\u653E\\u7F6E\\u5230\\u591A\\u4E2A\\u4E32\\u884C\\u7684queue\\u4E2D\\uFF0C\\u4F46\\u5B9E\\u9645\\u8FD8\\u662F\\u9700\\u8981\\u8FD9\\u4E2A\\u4EFB\\u52A1\\u540C\\u6B65\\u6267\\u884C\\uFF0C\\u90A3\\u4E48\\u5C31\\u4F1A\\u6709\\u95EE\\u9898\\uFF0C\\u56E0\\u4E3A\\u591A\\u4E2A\\u4E32\\u884Cqueue\\u4E4B\\u95F4\\u662F\\u5E76\\u884C\\u7684\\u3002\\u8FD9\\u65F6\\u4F7F\\u7528dispatch_set_target_queue\\u5C06\\u591A\\u4E2A\\u4E32\\u884C\\u7684queue\\u6307\\u5B9A\\u5230\\u4E86\\u540C\\u4E00\\u76EE\\u6807\\uFF0C\\u90A3\\u4E48\\u7740\\u591A\\u4E2A\\u4E32\\u884Cqueue\\u5728\\u76EE\\u6807queue\\u4E0A\\u5C31\\u662F\\u540C\\u6B65\\u6267\\u884C\\u7684\\uFF0C\\u4E0D\\u518D\\u662F\\u5E76\\u884C\\u6267\\u884C\\u3002\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"dispatch_after\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#dispatch_after\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"dispatch_after\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-objectivec\",children:(0,n.jsxs)(e.code,{className:\"language-objectivec code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    dispatch_time_t time \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_time\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"DISPATCH_TIME_NOW\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"int64_t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"3\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),\" NSEC_PER_SEC\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"     \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_after\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_time\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"DISPATCH_TIME_NOW\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"int64_t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"33\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),\" NSEC_PER_SEC\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_get_main_queue\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"^\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token function\",children:\"NSLog\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'@\"waited at least three seconds\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`})]})}),`\n`,(0,n.jsx)(e.p,{children:\"dispatch_after \\u51FD\\u6570\\u5E76\\u4E0D\\u662F\\u5728\\u6307\\u5B9A\\u65F6\\u95F4\\u540E\\u6267\\u884C\\uFF0C\\u53EA\\u662F\\u5728\\u6307\\u5B9A\\u65F6\\u95F4\\u8FFD\\u52A0\\u5904\\u7406\\u5230Dispatch Queue\\u4E2D\\u3002\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u7B2C\\u4E00\\u4E2A\\u53C2\\u6570\\u662F\\u6307\\u5B9A\\u65F6\\u95F4\\u7528\\u7684dispatch_time_t \\u7C7B\\u578B\\u7684\\u503C\\u3002\\u4F7F\\u7528dispatch_time \\u6216\\u8005dispatch_walltimeb\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u7B2C\\u4E8C\\u4E2A\\u53C2\\u6570\\u6307\\u5B9A\\u8981\\u8FFD\\u52A0\\u5904\\u7406\\u7684Dispatch Queuede\\uFF0C\\u7B2C\\u4E09\\u4E2A\\u53C2\\u6570\\u6307\\u5B9A\\u6267\\u884C\\u5904\\u7406\\u7684block\\u3002\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"dispatch-group\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#dispatch-group\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Dispatch Group\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5728\\u8FFD\\u52A0\\u5230\",(0,n.jsx)(e.code,{children:\"Dispatch Queue\"}),\"\\u4E2D\\u7684\\u591A\\u4E2A\\u5904\\u7406\\u5168\\u90E8\\u7ED3\\u675F\\u540E\\u6267\\u884C\\u7ED3\\u675F\\u5904\\u7406\\u3002\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"\\u5C06\\u6267\\u884C\\u7684\\u5904\\u7406\\u5168\\u90E8\\u8FFD\\u52A0\\u5230 \\u4E00\\u4E2A\",(0,n.jsx)(e.code,{children:\"Serial Dispatch Queue\"}),\"\\u4E2D\\uFF0C\\u5E76\\u5728\\u6700\\u540E\\u8FFD\\u52A0\\u7ED3\\u675F\\u5904\\u7406\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\u4F46\\u662F\\u5728\\u5E76\\u884C\\u961F\\u5217\\u4E2D\\u53EF\\u4EE5\\u4F7F\\u7528\",(0,n.jsx)(e.code,{children:\"Dispatch Group\"}),\"\\u5B9E\\u73B0\\u3002\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Target\\uFF1A\\u8FFD\\u52A03\\u4E2A\",(0,n.jsx)(e.code,{children:\"block\"}),\"\\u5230\",(0,n.jsx)(e.code,{children:\"Global Dispatch Queue\"}),\" \\u4E2D\\uFF0C\\u8FD9\\u4E9B\",(0,n.jsx)(e.code,{children:\"Block\"}),\"\\u5982\\u679C\\u5168\\u90E8\\u6267\\u884C\\u5B8C\\u6210\\uFF0C\\u5C31\\u4F1A\\u6267\\u884C\",(0,n.jsx)(e.code,{children:\"Main Dispatch Queue\"}),\"\\u4E2D\\u7ED3\\u675F\\u5904\\u7406\\u7684\",(0,n.jsx)(e.code,{children:\"Block\"}),\"\\u3002\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-objectivec\",children:(0,n.jsxs)(e.code,{className:\"language-objectivec code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    dispatch_group_t group \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_group_create\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    dispatch_queue_t queue \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_get_global_queue\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"DISPATCH_QUEUE_PRIORITY_DEFAULT\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_group_async\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"group\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" queue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"^\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"NSLog\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'@\"blk0\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_group_async\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"group\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" queue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"^\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"NSLog\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'@\"blk1\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_group_async\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"group\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" queue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"^\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"NSLog\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'@\"blk2\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_group_async\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"group\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" queue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"^\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"sleep\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"3\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"NSLog\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'@\"blk3\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_group_async\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"group\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" queue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"^\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"NSLog\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'@\"blk4\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_group_notify\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"group\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_get_main_queue\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"^\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token function\",children:\"NSLog\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'@\"over\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`})]})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u89E3\\u6790\\uFF1A\"}),\" \\u5411\\u5E76\\u884C\\u7EBF\\u7A0B\\u8FFD\\u52A0\\u5904\\u7406\\uFF0C\\u591A\\u4E2A\\u7EBF\\u7A0B\\u5E76\\u884C\\u6267\\u884C\\uFF0C\\u6240\\u4EE5\\u6267\\u884C\\u7684\\u987A\\u5E8F\\u4E0D\\u5B9A\\u3002 \\u4F46\\u662F\",(0,n.jsx)(e.code,{children:\"\\u201Dover\\u201D\"}),\"\\u4E00\\u5B9A\\u662F\\u6700\\u540E\\u6267\\u884C\\u7684\\u3002\\u53E6\\u5916\\uFF0C\\u4E5F\\u53EF\\u4EE5\\u4F7F\\u7528\",(0,n.jsx)(e.code,{children:\"dispatch_group_wait\"}),\"\\u51FD\\u6570\\uFF0C\\u4EC5\\u7B49\\u5F85\\u5168\\u90E8\\u5904\\u7406\\u6267\\u884C\\u7ED3\\u675F\\u3002\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-objectivec\",children:(0,n.jsxs)(e.code,{className:\"language-objectivec code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    dispatch_group_t group \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_group_create\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    dispatch_queue_t queue \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_get_global_queue\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"DISPATCH_QUEUE_PRIORITY_DEFAULT\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_group_async\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"group\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" queue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"^\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"NSLog\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'@\"blk0\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_group_async\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"group\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" queue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"^\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"NSLog\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'@\"blk1\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_group_async\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"group\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" queue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"^\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"NSLog\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'@\"blk2\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_group_async\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"group\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" queue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"^\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"sleep\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"3\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"NSLog\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'@\"blk3\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_group_async\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"group\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" queue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"^\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"NSLog\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'@\"blk4\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_group_wait\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"group\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" DISPATCH_TIME_FOREVER\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"NSLog\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'@\"over\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`})]})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"dispatch_group_wait\"}),\"\\u7684\\u4E8C\\u4E2A\\u53C2\\u6570\\u662F\\u7B49\\u5F85\\u7684\\u65F6\\u95F4\\u3002\\u5982\\u679C\\u8FD4\\u56DE\\u503C\\u4E3A0\\uFF0C\\u5219\\u8868\\u793A\\u6240\\u6709\\u7684\\u4EFB\\u52A1\\u6267\\u884C\\u5B8C\\u6BD5\\u3002\\u5426\\u5219\\uFF0Cgroup\\u4E2D\\u4ECD\\u6709\\u4EFB\\u52A1\\u5728\\u6267\\u884C\\u3002\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"dispatch_barrier_async\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#dispatch_barrier_async\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"dispatch_barrier_async\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5728\\u8BBF\\u95EE\\u6570\\u636E\\u5E93\\u6216\\u6587\\u4EF6\\u65F6\\uFF0C\\u4F7F\\u7528\",(0,n.jsx)(e.code,{children:\"Serial Dispatch Queue\"}),\"\\u80FD\\u907F\\u514D\\u6570\\u636E\\u7ADE\\u4E89\\u7684\\u95EE\\u9898\\u3002\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5199\\u5165\\u5904\\u7406\\u786E\\u5B9E\\u4E0D\\u80FD\\u4E0E\\u5176\\u4ED6\\u7684\\u5199\\u5165\\u5904\\u7406\\u4EE5\\u53CA\\u5305\\u542B\\u8BFB\\u53D6\\u5904\\u7406\\u7684\\u5176\\u4ED6\\u67D0\\u4E9B\\u5904\\u7406\\u5E76\\u884C\\u6267\\u884C\\u3002\\u4F46\\u662F\\u5982\\u679C\\u8BFB\\u53D6\\u5904\\u7406\\u53EA\\u662F\\u4E0E\\u8BFB\\u53D6\\u5904\\u7406\\u5E76\\u884C\\u6267\\u884C\\uFF0C\\u90A3\\u4E48\\u591A\\u4E2A\\u5E76\\u884C\\u6267\\u884C\\u5C31\\u4E0D\\u4F1A\\u53D1\\u751F\\u95EE\\u9898\\u3002\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u9996\\u5148\",(0,n.jsx)(e.code,{children:\"dispatch_queue\"}),\"\\u751F\\u6210\\u51FD\\u6570\",(0,n.jsx)(e.code,{children:\"Concurrent Dispatch Queue\"}),\",\\u5728\",(0,n.jsx)(e.code,{children:\"dispatch_async\"}),\"\\u4E2D\\u8FFD\\u52A0\\u8BFB\\u53D6\\u64CD\\u4F5C\\u3002\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-objectivec\",children:(0,n.jsxs)(e.code,{className:\"language-objectivec code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"dispatch_queue_t \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" queue \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_queue_create\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"com.example.gcd.ForBarrier\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" DISPATCH_QUEUE_CONCURRENT\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_async\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"queue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" blk0_for_reading\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_async\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"queue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" blk2_for_reading\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_async\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"queue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" blk3_for_reading\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_barrier_async\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"queue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" blk_for_writing\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_async\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"queue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" blk4_for_reading\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_async\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"queue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" blk5_for_reading\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_async\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"queue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" blk6_for_reading\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.h2,{id:\"dispatch_sync\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#dispatch_sync\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"dispatch_sync\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"dispatch_async\"}),\"\\u51FD\\u6570\\u662F\",(0,n.jsx)(e.code,{children:\"\\u975E\\u540C\\u6B65\"}),\"\\u7684\\uFF0C\\u5373\\u5C06\\u6307\\u5B9A\\u7684Block\",(0,n.jsx)(e.code,{children:\"\\u975E\\u540C\\u6B65\"}),\"\\u7684\\u52A0\\u5165\\u5230\\u6307\\u5B9A\\u7684\",(0,n.jsx)(e.code,{children:\"Dispatch Queue\"}),\"\\u4E2D\\uFF0C\",(0,n.jsx)(e.code,{children:\"dispatch_sync\"}),\"\\u51FD\\u6570\\u4E0D\\u505A\\u4EFB\\u4F55\\u7B49\\u5F85\\u3002\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"dispatch_sync\"}),\"\\u51FD\\u6570\",(0,n.jsx)(e.code,{children:\"\\u540C\\u6B65\"}),\"\\u7684\\u5C06Block\\u8FFD\\u52A0\\u5230\",(0,n.jsx)(e.code,{children:\"Dispatch Queue\"}),\"\\u4E2D\\uFF0C\\u5728Block\\u7ED3\\u675F\\u4E4B\\u524D\\uFF0C\\u51FD\\u6570\\u4F1A\\u4E00\\u76F4\\u7B49\\u5F85\\u3002\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u7ECF\\u5E38\\u4F7F\\u7528\\u7684\\u4E00\\u79CD\\u60C5\\u5F62\\u662F\\uFF1A\\u6267\\u884C\",(0,n.jsx)(e.code,{children:\"Main Dispatch Queue\"}),\"\\u65F6\\uFF0C\\u4F7F\\u7528\\u53E6\\u5916\\u7684\\u7EBF\\u7A0B\",(0,n.jsx)(e.code,{children:\"Global Dispatch Queue\"}),\"\\u8FDB\\u884C\\u5904\\u7406\\uFF0C\\u5904\\u7406\\u7ED3\\u675F\\u540E\\u7ACB\\u5373\\u4F7F\\u7528\\u6240\\u5F97\\u5230\\u7684\\u7ED3\\u679C\\u3002\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-objectivec\",children:(0,n.jsxs)(e.code,{className:\"language-objectivec code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_async\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_get_global_queue\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"DISPATCH_QUEUE_PRIORITY_DEFAULT\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"^\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token comment\",children:`/*\n`})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token comment\",children:`   \\u5904\\u7406\n`})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"   */\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"   \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_sync\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_get_main_queue\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"^\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"     \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// \\u4E3B\\u7EBF\\u7A0B\\u64CD\\u4F5C\\uFF0C\\u5982\\u5237\\u65B0UI\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"     \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u4E00\\u65E6\\u8C03\\u7528\",(0,n.jsx)(e.code,{children:\"dispatch_sync\"}),\"\\u51FD\\u6570\\uFF0C\\u90A3\\u4E48\\u5728\\u6307\\u5B9A\\u7684\\u5904\\u7406\\u7ED3\\u675F\\u4E4B\\u524D\\uFF0C\\u8BE5\\u51FD\\u6570\\u90FD\\u4E0D\\u4F1A\\u8FD4\\u56DE\\u3002\\u4E5F\\u662F\\u56E0\\u4E3A\\u8FD9\\u4E2A\\u7279\\u6027\\uFF0C\\u5728\\u4F7F\\u7528\\u4E0D\\u5F53\\u65F6\\uFF0C\\u4FBF\\u4F1A\\u9020\\u6210\\u4E00\\u4E2A\\u4E25\\u91CD\\u7684\\u95EE\\u9898\\uFF0C\\u5373\",(0,n.jsx)(e.code,{children:\"\\u6B7B\\u9501\"}),\"\\u3002\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u4F8B\\u5982\\u5728\\u4E3B\\u7EBF\\u7A0B\\u4E2D\\u4F7F\\u7528\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-objectivec\",children:(0,n.jsxs)(e.code,{className:\"language-objectivec code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_sync\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_get_main_queue\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"^\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"NSLog\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'@\"Hello????\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.h2,{id:\"dispatch_apply\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#dispatch_apply\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"dispatch_apply\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"dispatch_apply\"}),\"\\u51FD\\u6570\\u662F\",(0,n.jsx)(e.code,{children:\"dispatch_sync\"}),\"\\u548C\",(0,n.jsx)(e.code,{children:\"Dispatch Group\"}),`\\u7684\\u5173\\u8054API\\u3002\n\\u5B83\\u6309\\u6307\\u5B9A\\u7684\\u6B21\\u6570\\u5C06\\u6307\\u5B9A\\u7684`,(0,n.jsx)(e.code,{children:\"Block\"}),\"\\u8FFD\\u52A0\\u5230\\u6307\\u5B9A\\u7684\",(0,n.jsx)(e.code,{children:\"Dispatch Queue\"}),\",\\u5E76\\u7B49\\u5F85\\u5168\\u90E8\\u5904\\u7406\\u6267\\u884C\\u7ED3\\u675F\\u3002\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-objectivec\",children:(0,n.jsxs)(e.code,{className:\"language-objectivec code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"dispatch_queue queue \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_get_global_queue\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"DISPATCH_QUEUE_PRIORITY_DEFAULT\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_apply\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"10\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" queue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"^\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"size_t index\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"NSLog\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'@\"%zu\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\"index\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"NSLog\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'@\"Done\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// \\u6700\\u540E\\u6267\\u884C\\uFF01\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.h2,{id:\"dispatch_suspenddispatch_resume\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#dispatch_suspenddispatch_resume\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"dispatch_suspend/dispatch_resume\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"dispatch_suspend\"}),\"\\u6302\\u8D77\\u6307\\u5B9A\\u7684\",(0,n.jsx)(e.code,{children:\"Dispatch Queue\"}),`\\u3002\n\\u2035\\u2035\\u2035\ndispatch_suspend(queue);\n\\u2035\\u2035\\u2035\n`,(0,n.jsx)(e.code,{children:\"dispatch_resume\"}),\"\\u6062\\u590D\\u6307\\u5B9A\\u7684\",(0,n.jsx)(e.code,{children:\"Dispatch Queue\"}),\"\\u3002\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"dispatch_once\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#dispatch_once\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"dispatch_once\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"code-highlight\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`static int initialized = NO;\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`if (initialized == NO) {\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`    /*\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`     * \\u521D\\u59CB\\u5316\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`     */\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`}\n`})]})}),`\n`,(0,n.jsx)(e.pre,{className:\"language-objectivec\",children:(0,n.jsxs)(e.code,{className:\"language-objectivec code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"static\"}),\" dispatch_once_t pred\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"dispatch_once\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u0026\"}),\"pred\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"^\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"   \",(0,n.jsx)(e.span,{className:\"token comment\",children:`/*\n`})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token comment\",children:`    * \\u521D\\u59CB\\u5316\n`})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"    */\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u901A\\u8FC7\",(0,n.jsx)(e.code,{children:\"dispatch_once\"}),\" \\u51FD\\u6570\\uFF0C\\u4EE3\\u7801\\u5373\\u4F7F\\u5728\\u591A\\u7EBF\\u7A0B\\u73AF\\u5883\\u4E0B\\u6267\\u884C\\uFF0C\\u4E5F\\u53EF\\u4FDD\\u8BC1\\u767E\\u5206\\u4E4B\\u767E\\u5B89\\u5168\\u3002\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u7B2C\\u4E00\\u7EC4\\u4EE3\\u7801\\u5728\\u5927\\u591A\\u6570\\u60C5\\u51B5\\u4E0B\\u4E5F\\u662F\\u5B89\\u5168\\u7684\\u3002\\u4F46\\u5728\\u591A\\u6838CPU\\u4E2D\\uFF0C\\u5728\\u6B63\\u5728\\u66F4\\u65B0\\u7684\\u8868\\u793A\\u662F\\u5426\\u521D\\u59CB\\u5316\\u7684\\u6807\\u5FD7\\u53D8\\u91CF\\u65F6\\uFF0C\\u8BFB\\u53D6\\uFF0C\\u5C31\\u6709\\u53EF\\u80FD\\u591A\\u6B21\\u6267\\u884C\\u521D\\u59CB\\u5316\\u5904\\u7406\\u3002\\u800C\\u7528\",(0,n.jsx)(e.code,{children:\"dispatch_once\"}),\"\\u51FD\\u6570\\u521D\\u59CB\\u5316\\u5C31\\u4E0D\\u5FC5\\u62C5\\u5FC3\\u8FD9\\u6837\\u7684\\u95EE\\u9898\\u3002\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"http://www.dreamingwish.com/article/gcd-guide-dispatch-once-1.html\",children:\"GCD\\u5916\\u4F20\\uFF1Adispatch_once(\\u4E0A)\"})})]})}}var q=D;return b(Q);})();\n;return Component;"},"isPost":true,"seoImage":{"url":"https://fninit.com/site-meta.png","dimensions":{"width":1120,"height":768}},"previewPosts":[{"slug":"/posts/2016/arc-in-swift","title":"Swift:Automatic Reference Counting in Swift","date":"2016-12-30T00:00:00.000Z","excerpt":null,"draft":false,"page":false,"comment":true,"featureImage":{"url":"/images/altumcode-unsplash.webp","dimensions":{"width":1858,"height":1308}},"toc":null,"tags":[{"name":"iOS","slug":"ios"},{"name":"Swift","slug":"swift"}],"authors":[{"slug":"roninro","name":"Roninro","cover_image":"/images/publication-cover.png","profileImage":{"url":"/images/avatar.jpg","dimensions":{"width":1080,"height":1080}},"location":"THE INTERNET","bio":"Software Development Engineer","twitter":"@xxxxx","facebook":"xxxxxx"}],"primary_tag":{"name":"iOS","slug":"ios"},"reading_time":"24 min read"},{"slug":"/posts/2016/ios-remotenotification","title":"iOS:关于iOS的推送","date":"2016-12-23T00:00:00.000Z","excerpt":null,"draft":false,"page":false,"comment":true,"featureImage":{"url":"/images/faisal-waheed-unsplash.webp","dimensions":{"width":2000,"height":1333}},"toc":null,"tags":[{"name":"iOS","slug":"ios"}],"authors":[{"slug":"roninro","name":"Roninro","cover_image":"/images/publication-cover.png","profileImage":{"url":"/images/avatar.jpg","dimensions":{"width":1080,"height":1080}},"location":"THE INTERNET","bio":"Software Development Engineer","twitter":"@xxxxx","facebook":"xxxxxx"}],"primary_tag":{"name":"iOS","slug":"ios"},"reading_time":"5 min read"},{"slug":"/posts/2017/ios-carthage","title":"Carthage 的简单使用","date":"2017-06-19T12:57:37.000Z","excerpt":null,"draft":false,"page":false,"comment":true,"featureImage":{"url":"/images/dNjMqj4emkc-unsplash.jpg","dimensions":{"width":2000,"height":1333}},"toc":null,"tags":[{"name":"iOS","slug":"ios"}],"authors":[{"slug":"roninro","name":"Roninro","cover_image":"/images/publication-cover.png","profileImage":{"url":"/images/avatar.jpg","dimensions":{"width":1080,"height":1080}},"location":"THE INTERNET","bio":"Software Development Engineer","twitter":"@xxxxx","facebook":"xxxxxx"}],"primary_tag":{"name":"iOS","slug":"ios"},"reading_time":"2 min read"}],"prevPost":{"slug":"/posts/2017/objc-runtime","title":"Objective-C Runtime","date":"2017-05-24T00:00:00.000Z","excerpt":null,"draft":true,"page":false,"comment":true,"featureImage":{"url":"/images/ian-keefe-unsplash.jpg","dimensions":{"width":2000,"height":1333}},"toc":null,"tags":[{"name":"runtime","slug":"runtime"},{"name":"iOS","slug":"ios"}],"authors":[{"slug":"roninro","name":"Roninro","cover_image":"/images/publication-cover.png","profileImage":{"url":"/images/avatar.jpg","dimensions":{"width":1080,"height":1080}},"location":"THE INTERNET","bio":"Software Development Engineer","twitter":"@xxxxx","facebook":"xxxxxx"}],"primary_tag":{"name":"runtime","slug":"runtime"},"reading_time":"3 min read"},"nextPost":{"slug":"/posts/2016/arc-in-swift","title":"Swift:Automatic Reference Counting in Swift","date":"2016-12-30T00:00:00.000Z","excerpt":null,"draft":false,"page":false,"comment":true,"featureImage":{"url":"/images/altumcode-unsplash.webp","dimensions":{"width":1858,"height":1308}},"toc":null,"tags":[{"name":"iOS","slug":"ios"},{"name":"Swift","slug":"swift"}],"authors":[{"slug":"roninro","name":"Roninro","cover_image":"/images/publication-cover.png","profileImage":{"url":"/images/avatar.jpg","dimensions":{"width":1080,"height":1080}},"location":"THE INTERNET","bio":"Software Development Engineer","twitter":"@xxxxx","facebook":"xxxxxx"}],"primary_tag":{"name":"iOS","slug":"ios"},"reading_time":"24 min read"},"bodyClass":"post-template tag-ios tag-gcd"}},"__N_SSG":true},"page":"/[...slug]","query":{"slug":["posts","2017","objc-gcd"]},"buildId":"mUxI9hmOGA1s-AlyreIBF","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>