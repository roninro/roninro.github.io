<!DOCTYPE html><html lang="en" class="casper"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>iOS 高级教程：用 MVVM 处理复杂的TableView | iOS 高级教程：用 MVVM 处理复杂的TableView</title><meta name="robots" content="index,follow"/><meta name="description" content="在本文，我们将讨论如何 用 Model-View-ViewModel(MVVM) 模式来组织 table view 代码。MVVM 是一种架构模型，它使用数据模型表示视图状态。我们可以使用很多 Swift 技术， 使 UI 逻辑包装成数据模型。例如使用协议和闭包简化 table view 中的代码。"/><meta name="twitter:card" content="summary_large_image"/><meta property="og:title" content="iOS 高级教程：用 MVVM 处理复杂的TableView | iOS 高级教程：用 MVVM 处理复杂的TableView"/><meta property="og:description" content="在本文，我们将讨论如何 用 Model-View-ViewModel(MVVM) 模式来组织 table view 代码。MVVM 是一种架构模型，它使用数据模型表示视图状态。我们可以使用很多 Swift 技术， 使 UI 逻辑包装成数据模型。例如使用协议和闭包简化 table view 中的代码。"/><meta property="og:url" content="https://fninit.com/posts/2019/ios-mvvm-tableview/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2019-05-16T02:15:54.000Z"/><meta property="article:author" content="Roninro"/><meta property="og:image" content="https://fninit.com/site-meta.png"/><link rel="canonical" href="https://fninit.com/posts/2019/ios-mvvm-tableview/"/><link rel="preload" as="image" imageSrcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 16w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 32w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 48w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 64w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 96w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 128w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 256w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 384w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 640w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 750w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 828w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 1080w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 1200w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 1920w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 2048w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 3840w" imageSizes="
                              (max-width: 350px) 350px,
                              (max-width: 530px) 530px,
                              (max-width: 710px) 710px,
                              (max-width: 1170px) 1170px,
                              (max-width: 2110px) 2110px, 2000px
                            "/><meta name="next-head-count" content="15"/><link rel="alternate" type="application/rss+xml" title="RoninRo&#x27;s Blog RSS Feed" href="https://fninit.com/rss.xml"/><link rel="preload" href="/_next/static/css/4ac02ab48bb2a349.css" as="style"/><link rel="stylesheet" href="/_next/static/css/4ac02ab48bb2a349.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-5752944655d749a0.js" defer=""></script><script src="/_next/static/chunks/framework-e75f20a0d9e1f5eb.js" defer=""></script><script src="/_next/static/chunks/main-e6dfde739e3003a9.js" defer=""></script><script src="/_next/static/chunks/pages/_app-26430ffae28b5603.js" defer=""></script><script src="/_next/static/chunks/761-e0ebe2fd26a8af10.js" defer=""></script><script src="/_next/static/chunks/771-7cac59a0a901328d.js" defer=""></script><script src="/_next/static/chunks/747-48db26b6b4742ec5.js" defer=""></script><script src="/_next/static/chunks/501-12f7c6e56e1c082c.js" defer=""></script><script src="/_next/static/chunks/pages/%5B...slug%5D-8b5be30ea1b90f7b.js" defer=""></script><script src="/_next/static/MSSxhpDAKLCq65cBS8UNC/_buildManifest.js" defer=""></script><script src="/_next/static/MSSxhpDAKLCq65cBS8UNC/_ssgManifest.js" defer=""></script><script src="/_next/static/MSSxhpDAKLCq65cBS8UNC/_middlewareManifest.js" defer=""></script></head><body class="post-template tag-ios"><script>
            (function(){
                window.isDark = localStorage.getItem('dark');
                if ( window.isDark === 'dark' ) {
                  document.body.classList.add('dark')
                } else if( window.isDark === undefined && window.matchMedia('(prefers-color-scheme: dark)').matches === true ){
                  document.body.classList.add('dark')
                }
            })()
          </script><div id="__next"><div class="site-wrapper"><header class="site-header"><div class="outer site-nav-main "><div class="inner"><nav class="site-nav"><div class="site-nav-left-wrapper"><div class="site-nav-left"><a class="site-nav-logo" href="/"><div style="height:${targetHeight}px;width:25.925925925925927px"><span style="box-sizing:border-box;display:block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;padding-top:81%"></span><img alt="RoninRo&#x27;s Blog" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="responsive" class="site-nav-logo" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="RoninRo&#x27;s Blog" sizes="100vw" srcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/logo.png 640w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/logo.png 750w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/logo.png 828w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/logo.png 1080w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/logo.png 1200w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/logo.png 1920w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/logo.png 2048w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/logo.png 3840w" src="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/logo.png" decoding="async" data-nimg="responsive" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="site-nav-logo" loading="lazy"/></noscript></span></div></a><div class="site-nav-content"><ul class="nav" role="menu"><li class="nav-home" role="menuitem"><div><a href="/">Home</a></div></li><li class="nav-about" role="menuitem"><div><a href="/about/">About</a></div></li></ul><span class="nav-post-title ">iOS 高级教程：用 MVVM 处理复杂的TableView</span></div></div></div><div class="site-nav-right"><div class="social-links"></div><button class="social-link social-link-tw" title="DarkMode" style="background-color:transparent"><svg viewBox="0 0 512 512"></svg></button></div></nav></div></div></header><main id="site-main" class="site-main outer "><div class="inner"><article class="post-full post tag-ios featured"><header class="post-full-header"><section class="post-full-tags"><a href="/tag/ios/">iOS</a></section><h1 class="post-full-title">iOS 高级教程：用 MVVM 处理复杂的TableView</h1><p class="post-full-custom-excerpt">在本文，我们将讨论如何 用 Model-View-ViewModel(MVVM) 模式来组织 table view 代码。MVVM 是一种架构模型，它使用数据模型表示视图状态。我们可以使用很多 Swift 技术， 使 UI 逻辑包装成数据模型。例如使用协议和闭包简化 table view 中的代码。</p><div class="post-full-byline"><section class="post-full-byline-content"><ul class="author-list"><li class="author-list-item"><div class="author-card "><div class="author-profile-image"><span style="box-sizing:border-box;display:block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;padding-top:100%"></span><img alt="Roninro" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="responsive" class="author-profile-image" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="Roninro" sizes="100vw" srcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 640w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 750w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 828w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 1080w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 1200w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 1920w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 2048w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 3840w" src="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg" decoding="async" data-nimg="responsive" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="author-profile-image" loading="lazy"/></noscript></span></div><div class="author-info"><div class="bio"><h2>Roninro</h2><p>Software Development Engineer</p><p><a href="/author/roninro/">More posts</a> <!-- -->by<!-- --> <!-- -->Roninro<!-- -->.<!-- --></p></div></div></div><a class="author-avatar" aria-label="Roninro" href="/author/roninro/"><span style="box-sizing:border-box;display:block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;padding-top:100%"></span><img alt="Roninro" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="responsive" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="Roninro" sizes="100vw" srcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 640w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 750w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 828w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 1080w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 1200w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 1920w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 2048w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 3840w" src="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg" decoding="async" data-nimg="responsive" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></a></li></ul><section class="post-full-byline-meta"><h4 class="author-name"><span><a href="/author/roninro/">Roninro</a></span></h4><div class="byline-meta-content"><time class="byline-meta-date" dateTime="2019-05-16T02:15:54.000Z">16 May, 2019<!-- --> <!-- --></time><span class="byline-reading-time"><span class="bull">•</span> <!-- -->17 min read<!-- --></span></div></section></section></div></header><figure class="post-full-image" style="display:inherit"><span style="box-sizing:border-box;display:block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;padding-top:66.64999999999999%"></span><img alt="iOS 高级教程：用 MVVM 处理复杂的TableView" sizes="
                              (max-width: 350px) 350px,
                              (max-width: 530px) 530px,
                              (max-width: 710px) 710px,
                              (max-width: 1170px) 1170px,
                              (max-width: 2110px) 2110px, 2000px
                            " srcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 16w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 32w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 48w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 64w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 96w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 128w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 256w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 384w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 640w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 750w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 828w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 1080w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 1200w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 1920w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 2048w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg 3840w" src="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/ian-keefe-unsplash.jpg" decoding="async" data-nimg="responsive" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></span></figure><section class="post-full-content"><aside class="toc"><nav><h2>Table of Contents</h2><ul class="list"><li><a class="link">Newsfeed App</a><ul class="sub"><li><a class="link">MemberCell</a></li><li><a class="link">PhotoCell</a></li></ul></li><li><a class="link">开始</a></li><li><a class="link">分拆 cell UI 设定</a></li><li><a class="link">为 Cell 设计 ViewModel</a></li><li><a class="link">利用 Protocol 减少冗余</a></li><li><a class="link">更多的 Protocol</a></li><li><a class="link">处理业务逻辑</a></li><li><a class="link">Summary</a></li><li><a class="link">相关文章</a></li></ul></nav></aside><div class="post-content load-external-scripts"><blockquote>
<!-- --><p>原文：<!-- --><a href="https://flawlessapp.io/blog/advanced-mvvm-tableview-tutorial/#viewmodel">Advanced iOS tutorial: Use MVVM to tackle complicated TableView</a></p>
<!-- --></blockquote>
<!-- --><p>在本文，我们将讨论如何 用 Model-View-ViewModel(MVVM) 模式来组织 table view 代码。
MVVM 是一种架构模型，它使用数据模型表示视图状态。我们可以使用很多 Swift 技术， 使 UI 逻辑包装成数据模型。例如使用协议和闭包简化 table view 中的代码。建议查看 <!-- --><a href="https://medium.com/flawless-app-stories/how-to-use-a-model-view-viewmodel-architecture-for-ios-46963c67be1b">文章</a> 以全面了解 MVVM 模式。<!-- --></p>
<!-- --><h2 id="newsfeed-app"><a aria-hidden="true" tabindex="-1" href="#newsfeed-app"><span class="icon icon-link"></span></a>Newsfeed App<!-- --></h2>
<!-- --><p>今天，我们将要做一个 newsfeed app 。App 主页是一个墙（wall）。在墙上，有两种 feed ，一种是照片的 feed，一种是用户的 feed。
我们包含介绍以下用例：</p>
<!-- --><ol>
<!-- --><li>tableView 正确显示 Member 的单元格和 Photo 的单元格。</li>
<!-- --><li>“+” 按钮显示在等待 follow-a-member API 的响应时的加载。</li>
<!-- --></ol>
<!-- --><ul>
<!-- --><li>当用户按下 Photo 单元格时触发 open-detail 事件。</li>
<!-- --></ul>
<!-- --><p>界面如下：</p>
<!-- --><div><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%27300%27%20height=%27534%27/%3e"/></span><img alt="" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="" srcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/media/mvvm-screen.gif 1x, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/media/mvvm-screen.gif 2x" src="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/media/mvvm-screen.gif" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div>
<!-- --><h3 id="membercell"><a aria-hidden="true" tabindex="-1" href="#membercell"><span class="icon icon-link"></span></a>MemberCell<!-- --></h3>
<!-- --><p>member cell 可以推荐一些你可以想要关注的用户，你可以点击 Cell 上的 <!-- --><strong>+</strong> 按钮，Cell 有 3种状态：<!-- --></p>
<!-- --><ul>
<!-- --><li>
<!-- --><div>Normal
<!-- --><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%271000%27%20height=%27129%27/%3e"/></span><img alt="" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="" srcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/media/state_normal-3.png 1x, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/media/state_normal-3.png 2x" src="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/media/state_normal-3.png" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div>
<!-- --></li>
<!-- --><li>
<!-- --><div>Loading
<!-- --><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%271000%27%20height=%27129%27/%3e"/></span><img alt="" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="" srcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/media/state_checked-3.png 1x, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/media/state_checked-3.png 2x" src="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/media/state_checked-3.png" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div>
<!-- --></li>
<!-- --><li>
<!-- --><div>Checked
<!-- --><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%271000%27%20height=%27129%27/%3e"/></span><img alt="" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="" srcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/media/state_loading-3.png 1x, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/media/state_loading-3.png 2x" src="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/media/state_loading-3.png" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div>
<!-- --></li>
<!-- --></ul>
<!-- --><h3 id="photocell"><a aria-hidden="true" tabindex="-1" href="#photocell"><span class="icon icon-link"></span></a>PhotoCell<!-- --></h3>
<!-- --><p>第二个 cell 会展示照片跟它的标题与介绍，用户点击了这个 cell 就会打开照片的详细介绍。</p>
<!-- --><div><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%271000%27%20height=%27129%27/%3e"/></span><img alt="" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="" srcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/media/state_normal-3.png 1x, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/media/state_normal-3.png 2x" src="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/media/state_normal-3.png" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div>
<!-- --><p>我们假设 API 的响应被解析为两种 model: Member 和 Photo.</p>
<!-- --><p>你可以在 Github 上找到这个项目的完整代码：<!-- --><a href="https://github.com/koromiko/TheGreatWall">GitHub – koromiko/TheGreatWall: Using MVVM to tackle complicated feed view</a>。<!-- --></p>
<!-- --><h2 id="开始"><a aria-hidden="true" tabindex="-1" href="#开始"><span class="icon icon-link"></span></a>开始<!-- --></h2>
<!-- --><p>我们新建一个 FeedListViewController ，并将它设置为 tableView 的 dataSource，这个 viewController 大概会长这个样子：</p>
<!-- --><pre class="language-swift"><code class="language-swift code-highlight"><span class="code-line"><span class="token keyword">var</span> feeds<!-- --><span class="token punctuation">:</span> <!-- --><span class="token punctuation">[</span><span class="token class-name">Feed</span><span class="token punctuation">]</span> <!-- --><span class="token operator">=</span> <!-- --><span class="token punctuation">[</span><span class="token class-name">Feed</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<!-- --></span><span class="code-line"> 
</span><span class="code-line"><span class="token keyword">var</span> tableView<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">UITableView</span>
<!-- --></span><span class="code-line"> 
</span><span class="code-line"><span class="token keyword">func</span> <!-- --><span class="token function-definition function">viewDidLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">        <!-- --><span class="token keyword">self</span><span class="token punctuation">.</span>service<!-- --><span class="token punctuation">.</span>fetchFeeds <!-- --><span class="token punctuation">{</span> <!-- --><span class="token punctuation">[</span><span class="token keyword">weak</span> <!-- --><span class="token keyword">self</span><span class="token punctuation">]</span> feeds <!-- --><span class="token keyword">in</span> 
<!-- --></span><span class="code-line">            <!-- --><span class="token keyword">self</span><span class="token operator">?</span><span class="token punctuation">.</span>feeds <!-- --><span class="token operator">=</span> feeds
<!-- --></span><span class="code-line">            <!-- --><span class="token keyword">self</span><span class="token operator">?</span><span class="token punctuation">.</span>tableView<!-- --><span class="token punctuation">.</span><span class="token function">reloadData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<!-- --></span><span class="code-line">        <!-- --><span class="token punctuation">}</span>
<!-- --></span><span class="code-line"><span class="token punctuation">}</span>
<!-- --></span><span class="code-line"> 
</span><span class="code-line"><span class="token keyword">func</span> <!-- --><span class="token function-definition function">tableView</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> tableView<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">UITableView</span><span class="token punctuation">,</span> numberOfRowsInSection section<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">Int</span><span class="token punctuation">)</span> <!-- --><span class="token operator">-&gt;</span> <!-- --><span class="token class-name">Int</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">return</span> feeds<!-- --><span class="token punctuation">.</span>count
<!-- --></span><span class="code-line"><span class="token punctuation">}</span>
<!-- --></span><span class="code-line"> 
</span><span class="code-line"><span class="token keyword">func</span> <!-- --><span class="token function-definition function">tableView</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> tableView<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">UITableView</span><span class="token punctuation">,</span> cellForRowAt indexPath<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">IndexPath</span><span class="token punctuation">)</span> <!-- --><span class="token operator">-&gt;</span> <!-- --><span class="token class-name">UITableViewCell</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">let</span> feed <!-- --><span class="token operator">=</span> feeds<!-- --><span class="token punctuation">[</span>indexPath<!-- --><span class="token punctuation">.</span>row<!-- --><span class="token punctuation">]</span>
<!-- --></span><span class="code-line"> 
</span><span class="code-line">    <!-- --><span class="token keyword">if</span> <!-- --><span class="token keyword">let</span> memberFeed <!-- --><span class="token operator">=</span> feed <!-- --><span class="token keyword">as</span><span class="token operator">?</span> <!-- --><span class="token class-name">Member</span><span class="token punctuation">,</span> <!-- --><span class="token keyword">let</span> cell <!-- --><span class="token operator">=</span> tableView<!-- --><span class="token punctuation">.</span><span class="token function">dequeueReusableCell</span><span class="token punctuation">(</span>withIdentifier<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">MemberCell</span><span class="token punctuation">.</span><span class="token function">cellIdentifier</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <!-- --><span class="token keyword">for</span><span class="token punctuation">:</span> indexPath<!-- --><span class="token punctuation">)</span> <!-- --><span class="token keyword">as</span><span class="token operator">?</span> <!-- --><span class="token class-name">MemberCell</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">        cell<!-- --><span class="token punctuation">.</span>nameLabel<!-- --><span class="token punctuation">.</span>text <!-- --><span class="token operator">=</span> memberFeed<!-- --><span class="token punctuation">.</span>name
<!-- --></span><span class="code-line">        cell<!-- --><span class="token punctuation">.</span>profileImageView<!-- --><span class="token punctuation">.</span>image <!-- --><span class="token operator">=</span> memberFeed<!-- --><span class="token punctuation">.</span>image
<!-- --></span><span class="code-line">        cell<!-- --><span class="token punctuation">.</span>addBtn<!-- --><span class="token punctuation">.</span>isSelected <!-- --><span class="token operator">=</span> memberFeed<!-- --><span class="token punctuation">.</span>isFollwing
<!-- --></span><span class="code-line">        <!-- --><span class="token keyword">return</span> cell
<!-- --></span><span class="code-line">    <!-- --><span class="token punctuation">}</span> <!-- --><span class="token keyword">else</span> <!-- --><span class="token keyword">if</span> <!-- --><span class="token keyword">let</span> photoFeed <!-- --><span class="token operator">=</span> feed <!-- --><span class="token keyword">as</span><span class="token operator">?</span> <!-- --><span class="token class-name">Photo</span><span class="token punctuation">,</span> <!-- --><span class="token keyword">let</span> cell <!-- --><span class="token operator">=</span> tableView<!-- --><span class="token punctuation">.</span><span class="token function">dequeueReusableCell</span><span class="token punctuation">(</span>withIdentifier<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">PhotoCell</span><span class="token punctuation">.</span><span class="token function">cellIdentifier</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <!-- --><span class="token keyword">for</span><span class="token punctuation">:</span> indexPath<!-- --><span class="token punctuation">)</span> <!-- --><span class="token keyword">as</span><span class="token operator">?</span> <!-- --><span class="token class-name">PhotoCell</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">        cell<!-- --><span class="token punctuation">.</span>titleLabel<!-- --><span class="token punctuation">.</span>text <!-- --><span class="token operator">=</span> photoFeed<!-- --><span class="token punctuation">.</span>captial
<!-- --></span><span class="code-line">        cell<!-- --><span class="token punctuation">.</span>descriptionLabel<!-- --><span class="token punctuation">.</span>text <!-- --><span class="token operator">=</span> photoFeed<!-- --><span class="token punctuation">.</span>description
<!-- --></span><span class="code-line">        cell<!-- --><span class="token punctuation">.</span>coverImageView<!-- --><span class="token punctuation">.</span>image <!-- --><span class="token operator">=</span> photoFeed<!-- --><span class="token punctuation">.</span>image
<!-- --></span><span class="code-line">        <!-- --><span class="token keyword">return</span> cell
<!-- --></span><span class="code-line">    <!-- --><span class="token punctuation">}</span> <!-- --><span class="token keyword">else</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">            <!-- --><span class="token function">fatalError</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Unhandled feed </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">feed</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token punctuation">}</span>
<!-- --></span><span class="code-line"><span class="token punctuation">}</span>
<!-- --></span></code></pre>
<!-- --><p>我们把请求的数据保存在 <!-- --><code>feeds: [Feed]</code> 中，<!-- --><code>func tableView(tableView:, indexPath:) -&gt; UITableViewCell</code> 通过 if-else 处理两种 feed 。<!-- --></p>
<!-- --><p>然后我们要处理 Member Cell 的加载状态。通常我们使用数组保存所有 cell 的加载状态。</p>
<!-- --><pre class="language-swift"><code class="language-Swift code-highlight"><span class="code-line"><span class="token keyword">var</span> cellLoadingStatus<!-- --><span class="token punctuation">:</span> <!-- --><span class="token punctuation">[</span><span class="token class-name">Bool</span><span class="token punctuation">]</span>
<!-- --></span></code></pre>
<!-- --><p>然后这样更新 cell ：</p>
<!-- --><pre class="language-swift"><code class="language-swift code-highlight"><span class="code-line"><span class="token keyword">if</span> cellLoadingStatus<!-- --><span class="token punctuation">[</span>indexPath<!-- --><span class="token punctuation">.</span>row<!-- --><span class="token punctuation">]</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">    cell<!-- --><span class="token punctuation">.</span>loadingIndicator<!-- --><span class="token punctuation">.</span><span class="token function">startAnimation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<!-- --></span><span class="code-line"><span class="token punctuation">}</span> <!-- --><span class="token keyword">else</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">    cell<!-- --><span class="token punctuation">.</span>loadingIndicator<!-- --><span class="token punctuation">.</span><span class="token function">stopAnimation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<!-- --></span><span class="code-line"><span class="token punctuation">}</span>
<!-- --></span></code></pre>
<!-- --><p>我们还有一件事要做。处理状态更新，如下所示：</p>
<!-- --><pre class="language-swift"><code class="language-swift code-highlight"><span class="code-line"><span class="token keyword">func</span> <!-- --><span class="token function-definition function">updateLoadingState</span><span class="token punctuation">(</span>isLoading<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">Bool</span><span class="token punctuation">,</span> at indexPath<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">IndexPath</span><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">    cellLoadingStates<!-- --><span class="token punctuation">[</span>indexPath<!-- --><span class="token punctuation">.</span>row<!-- --><span class="token punctuation">]</span> <!-- --><span class="token operator">=</span> isLoading
<!-- --></span><span class="code-line">    tableView<!-- --><span class="token punctuation">.</span><span class="token function">reloadRows</span><span class="token punctuation">(</span>at indexPaths<!-- --><span class="token punctuation">:</span> <!-- --><span class="token punctuation">[</span>indexPath<!-- --><span class="token punctuation">]</span><span class="token punctuation">,</span> with animation<!-- --><span class="token punctuation">:</span> <!-- --><span class="token punctuation">.</span><span class="token keyword">none</span><span class="token punctuation">)</span>
<!-- --></span><span class="code-line"><span class="token punctuation">}</span>
<!-- --></span></code></pre>
<!-- --><p>看起来没有什么问题，但是当我们被要求添加一个 cell 类型时，我们应该怎么做呢？在 <!-- --><code>func tableView(tableView:,indexPath:) -&gt; UITableViewCell</code> 添加一个 else-if 处理。
如果新 Cell 具有不同的状态，我们将添加一个数组来处理状态更改并添加一个函数来更新状态。唷！碎片化代码使需求变更成为一项具有挑战性的任务。<!-- --></p>
<!-- --><p>下图显示了体系结构：</p>
<!-- --><div><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%27727%27%20height=%27480%27/%3e"/></span><img alt="" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="" srcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/media/mvvm-table-architecture.png 1x, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/media/mvvm-table-architecture.png 2x" src="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/media/mvvm-table-architecture.png" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div>
<!-- --><p>在上面的示例中，dataSource 具有以下职责：</p>
<!-- --><ul>
<!-- --><li>设置 cell 的 UI 组件，例如 nameLabel，imageView</li>
<!-- --><li>记录 cell 的状态，如 cellLoadingStatus</li>
<!-- --><li>调用 API 并且保存 model 数据</li>
<!-- --></ul>
<!-- --><p>每当我们添加一个单元格类型时，我们都会在 FeedListViewController 中执行这些任务，而这些任务根本不可扩展。
更好的方法是分离职责以提高可扩展性。添加单元格类型应该更像是将 USB 设备插入计算机，这不会改变计算机的设计。</p>
<!-- --><h2 id="分拆-cell-ui-设定"><a aria-hidden="true" tabindex="-1" href="#分拆-cell-ui-设定"><span class="icon icon-link"></span></a>分拆 cell UI 设定<!-- --></h2>
<!-- --><p>回到 <!-- --><code>func tableView(tableView:, cellForRowAt indexPath: ) -&gt; UITableViewCell</code> ，这里面有 UI 设定，对于 dataSource 来说，了解 cell 的实现细节并不是一个好的主意。所以我们的第一步就是将 UI 设定从 dataSource 转移到 cell 中去。<!-- --></p>
<!-- --><p>基于这个想法，我们在 MemberCell 中添加一个方法：</p>
<!-- --><pre class="language-swift"><code class="language-swift code-highlight"><span class="code-line"><span class="token comment">// In MemberCell.swift</span>
<!-- --></span><span class="code-line"><span class="token keyword">func</span> <!-- --><span class="token function-definition function">setup</span><span class="token punctuation">(</span>name<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">String</span><span class="token punctuation">,</span> profileImage<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">UIImage</span><span class="token punctuation">,</span> isFollowing<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">Bool</span><span class="token punctuation">,</span> isLoading<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">Bool</span><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">self</span><span class="token punctuation">.</span>nameLabel<!-- --><span class="token punctuation">.</span>text <!-- --><span class="token operator">=</span> name
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">self</span><span class="token punctuation">.</span>profileImageView<!-- --><span class="token punctuation">.</span>image <!-- --><span class="token operator">=</span> profileImage
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">self</span><span class="token punctuation">.</span>addBtn<!-- --><span class="token punctuation">.</span>isSelected <!-- --><span class="token operator">=</span> isFollowing
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">if</span> isLoading <!-- --><span class="token punctuation">{</span> 
<!-- --></span><span class="code-line">        <!-- --><span class="token keyword">self</span><span class="token punctuation">.</span>loadingIndicator<!-- --><span class="token punctuation">.</span><span class="token function">startAnimation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token punctuation">}</span> <!-- --><span class="token keyword">else</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">        <!-- --><span class="token keyword">self</span><span class="token punctuation">.</span>loadingIndicator<!-- --><span class="token punctuation">.</span><span class="token function">stopAnimation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token punctuation">}</span>
<!-- --></span><span class="code-line"><span class="token punctuation">}</span>
<!-- --></span></code></pre>
<!-- --><p>在 setup 的帮助下，<!-- --><code>func tableView(tableView:, indexPath:) -&gt; UITableViewCell</code> 会变得更加简单：<!-- --></p>
<!-- --><pre class="language-swift"><code class="language-swift code-highlight"><span class="code-line"><span class="token keyword">if</span> <!-- --><span class="token keyword">let</span> memberFeed <!-- --><span class="token operator">=</span> feed <!-- --><span class="token keyword">as</span><span class="token operator">?</span> <!-- --><span class="token class-name">Member</span><span class="token punctuation">,</span> <!-- --><span class="token keyword">let</span> cell <!-- --><span class="token operator">=</span> tableView<!-- --><span class="token punctuation">.</span><span class="token function">dequeueReusableCell</span><span class="token punctuation">(</span>withIdentifier<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">MemberCell</span><span class="token punctuation">.</span><span class="token function">cellIdentifier</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <!-- --><span class="token keyword">for</span><span class="token punctuation">:</span> indexPath<!-- --><span class="token punctuation">)</span> <!-- --><span class="token keyword">as</span><span class="token operator">?</span> <!-- --><span class="token class-name">MemberCell</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">    cell<!-- --><span class="token punctuation">.</span><span class="token function">setup</span><span class="token punctuation">(</span>name<!-- --><span class="token punctuation">:</span> memberFeed<!-- --><span class="token punctuation">.</span>name<!-- --><span class="token punctuation">,</span> 
<!-- --></span><span class="code-line">                     profileImage<!-- --><span class="token punctuation">:</span> memberFeed<!-- --><span class="token punctuation">.</span>image<!-- --><span class="token punctuation">,</span>
<!-- --></span><span class="code-line">                     isFollowing<!-- --><span class="token punctuation">:</span> memberFeed<!-- --><span class="token punctuation">.</span>isFollowing<!-- --><span class="token punctuation">,</span>
<!-- --></span><span class="code-line">                     isLoading<!-- --><span class="token punctuation">:</span> <!-- --><span class="token keyword">self</span><span class="token punctuation">.</span>loadingStatus<!-- --><span class="token punctuation">[</span>indexPath<!-- --><span class="token punctuation">.</span>row<!-- --><span class="token punctuation">]</span><span class="token punctuation">)</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">return</span> cell
<!-- --></span><span class="code-line"><span class="token punctuation">}</span> <!-- --><span class="token keyword">else</span> <!-- --><span class="token keyword">if</span> <!-- --><span class="token keyword">let</span> photoFeed <!-- --><span class="token operator">=</span> feed <!-- --><span class="token keyword">as</span><span class="token operator">?</span> <!-- --><span class="token class-name">Photo</span><span class="token punctuation">,</span> <!-- --><span class="token keyword">let</span> cell <!-- --><span class="token operator">=</span> tableView<!-- --><span class="token punctuation">.</span><span class="token function">dequeueReusableCell</span><span class="token punctuation">(</span>withIdentifier<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">PhotoCell</span><span class="token punctuation">.</span><span class="token function">cellIdentifier</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <!-- --><span class="token keyword">for</span><span class="token punctuation">:</span> indexPath<!-- --><span class="token punctuation">)</span> <!-- --><span class="token keyword">as</span><span class="token operator">?</span> <!-- --><span class="token class-name">PhotoCell</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">    cell<!-- --><span class="token punctuation">.</span><span class="token function">setup</span><span class="token punctuation">(</span>title<!-- --><span class="token punctuation">:</span> photoFeed<!-- --><span class="token punctuation">.</span>title<!-- --><span class="token punctuation">,</span> 
<!-- --></span><span class="code-line">                      description<!-- --><span class="token punctuation">:</span> photoFeed<!-- --><span class="token punctuation">.</span>description<!-- --><span class="token punctuation">,</span>
<!-- --></span><span class="code-line">                      image<!-- --><span class="token punctuation">:</span> photoFeed<!-- --><span class="token punctuation">.</span>image<!-- --><span class="token punctuation">)</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">return</span> cell
<!-- --></span><span class="code-line"><span class="token punctuation">}</span> <!-- --><span class="token keyword">else</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token function">fatalError</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Unhandled feed </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">feed</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
<!-- --></span><span class="code-line"><span class="token punctuation">}</span>
<!-- --></span></code></pre>
<!-- --><p>我们可以看到有超过三个参数的函数。有一个对象包装这些参数会更好。因此，这是 MVVM 的好处！ MVVM 可以帮助您将所有 UI 逻辑封装到一个简单的对象中。</p>
<!-- --><p>通过将 UI 操作转换为对象操作，我们可以显着减少 dataSource 和 ViewController 的开销。</p>
<!-- --><h2 id="为-cell-设计-viewmodel"><a aria-hidden="true" tabindex="-1" href="#为-cell-设计-viewmodel"><span class="icon icon-link"></span></a>为 Cell 设计 ViewModel<!-- --></h2>
<!-- --><p>先看架构：</p>
<!-- --><div><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%27566%27%20height=%27321%27/%3e"/></span><img alt="" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="" srcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/media/mvvm-architecture-viewmodel.png 1x, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/media/mvvm-architecture-viewmodel.png 2x" src="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/media/mvvm-architecture-viewmodel.png" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div>
<!-- --><p>我们用两种 viewmodel ：MemberViewModel 和 PhotoViewModel ，分别代表 MemberCell 和 PhotoCell 。 我们使用绑定技术将 ViewModel 的属性绑定到相应 Cell 中的UI组件。这意味着每当我们更改ViewModel的属性时，单元格中的绑定UI组件都会相应地更改。</p>
<!-- --><p>MemberViewModel 的实现如下：</p>
<!-- --><pre class="language-swift"><code class="language-swift code-highlight"><span class="code-line"><span class="token keyword">class</span> <!-- --><span class="token class-name">MemberCellViewModel</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">let</span> name<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">String</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">let</span> avatar<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">UIImage</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">let</span> isLoading<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">Observable</span><span class="token operator">&lt;</span><span class="token class-name">Bool</span><span class="token operator">&gt;</span>
<!-- --></span><span class="code-line"><span class="token punctuation">}</span>
<!-- --></span></code></pre>
<!-- --><p>我们使用自定义对象 Observable 作为绑定工具。它保留泛型类型值，并通过触发名为 valueChanged的闭包来通知将存储值更改为观察者。实现非常简单</p>
<!-- --><pre class="language-swift"><code class="language-swift code-highlight"><span class="code-line"><span class="token keyword">class</span> <!-- --><span class="token class-name">Observable</span><span class="token operator">&lt;</span><span class="token class-name">T</span><span class="token operator">&gt;</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">var</span> value<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">T</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">        <!-- --><span class="token keyword">didSet</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">            <!-- --><span class="token class-name">DispatchQueue</span><span class="token punctuation">.</span>main<!-- --><span class="token punctuation">.</span><span class="token keyword">async</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">                <!-- --><span class="token keyword">self</span><span class="token punctuation">.</span>valueChanged<!-- --><span class="token operator">?</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">.</span>value<!-- --><span class="token punctuation">)</span>
<!-- --></span><span class="code-line">            <!-- --><span class="token punctuation">}</span>
<!-- --></span><span class="code-line">        <!-- --><span class="token punctuation">}</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token punctuation">}</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">var</span> valueChanged<!-- --><span class="token punctuation">:</span> <!-- --><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">)</span> <!-- --><span class="token operator">-&gt;</span> <!-- --><span class="token class-name">Void</span><span class="token punctuation">)</span><span class="token operator">?</span>
<!-- --></span><span class="code-line"><span class="token punctuation">}</span>
<!-- --></span></code></pre>
<!-- --><p>如果你对更多的 绑定技术感兴趣，请看 Srđan Rašić 的文章 <!-- --><a href="https://five.agency/solving-the-binding-problem-with-swift/">Solving the binding problem with Swfit - Five</a></p>
<!-- --><p>回到文章， 相应的 MemberCell 看起来如下：</p>
<!-- --><pre class="language-swift"><code class="language-swift code-highlight"><span class="code-line"><span class="token comment">// In MemberCell.swift</span>
<!-- --></span><span class="code-line"><span class="token keyword">func</span> <!-- --><span class="token function-definition function">setup</span><span class="token punctuation">(</span>viewModel<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">MemberViewModel</span><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token comment">// The imange and the name won&#x27;t be changed after setup </span>
<!-- --></span><span class="code-line">    profileImageView<!-- --><span class="token punctuation">.</span>image <!-- --><span class="token operator">=</span> viewModel<!-- --><span class="token punctuation">.</span>image 
<!-- --></span><span class="code-line">    nameLabel<!-- --><span class="token punctuation">.</span>text <!-- --><span class="token operator">=</span> viewModel<!-- --><span class="token punctuation">.</span>name
<!-- --></span><span class="code-line">        
</span><span class="code-line">    <!-- --><span class="token comment">// Listen to the change of the isLoading property to update the UI state</span>
<!-- --></span><span class="code-line">    viewModel<!-- --><span class="token punctuation">.</span>isLoading<!-- --><span class="token punctuation">.</span>valueChanged <!-- --><span class="token punctuation">{</span> <!-- --><span class="token punctuation">[</span><span class="token keyword">weak</span> <!-- --><span class="token keyword">self</span><span class="token punctuation">]</span> <!-- --><span class="token punctuation">(</span>isLoading<!-- --><span class="token punctuation">)</span> <!-- --><span class="token keyword">in</span>
<!-- --></span><span class="code-line">        <!-- --><span class="token keyword">if</span> isLoading <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">            <!-- --><span class="token keyword">self</span><span class="token operator">?</span><span class="token punctuation">.</span>loadingIndicator<!-- --><span class="token punctuation">.</span><span class="token function">startAnimating</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<!-- --></span><span class="code-line">        <!-- --><span class="token punctuation">}</span> <!-- --><span class="token keyword">else</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">            <!-- --><span class="token keyword">self</span><span class="token operator">?</span><span class="token punctuation">.</span>loadingIndicator<!-- --><span class="token punctuation">.</span><span class="token function">stopAnimating</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<!-- --></span><span class="code-line">        <!-- --><span class="token punctuation">}</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token punctuation">}</span>
<!-- --></span><span class="code-line"><span class="token punctuation">}</span>
<!-- --></span></code></pre>
<!-- --><p>在 <!-- --><code>setup(viewModel:)</code> 函数中，我们使用 viewModel 参数中的信息在单元格上设置 UI 组件。
此外，我们设置 valueChanged 闭包来监听 isLoading 属性的值更改。 当用户按下单元格上的 “+” 按钮时，isLoading 变为 “true” 。通过使用 MVVM ，我们简化了设置功能的参数。
此外，将 UI 逻辑转换为对象操作对于更多Swift技术非常有益，这将在下一节中介绍。<!-- --></p>
<!-- --><p>在这里，我们还有一件事要做。在单元格中，我们使用转义闭包 valueChanged 来通知单元格 UI 更新。基本上，当用户滚动表视图时，将重用该单元格。 ViewModel 和 Cell 之间的关系可以用下图表示</p>
<!-- --><div><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%27556%27%20height=%27333%27/%3e"/></span><img alt="" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="" srcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/media/mvvm-img1.004-3.png 1x, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/media/mvvm-img1.004-3.png 2x" src="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/media/mvvm-img1.004-3.png" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div>
<!-- --><p>当用户不断地向下滚动，离开屏幕的 <!-- --><em>MemberCell A</em> 原本是与 <!-- --><em>MemberViewModel 1</em> 绑定的，现在被 reuse ,给 <!-- --><em>MemberViewModel 3</em> 使用，但是因为 <!-- --><em>MemberViewModel 1</em> 的 valueChanged closure 还没有释放，所以当 MemberViewModel 的 isLoading 修改后， <!-- --><em>MemberViewModel 1</em> 仍然会通知 <!-- --><em>MemberCell A</em> 。也就是说, <!-- --><em>MemberViewModel 1</em> 和 <!-- --><em>MemberViewModel 3</em> 的 isLoading 属性更新了同一个单元格。<!-- --></p>
<!-- --><p>所以在设定绑定的同时，也要记得在 reuse 时把 closure 清空：</p>
<!-- --><pre class="language-swift"><code class="language-swift code-highlight"><span class="code-line"><span class="token keyword">override</span> <!-- --><span class="token keyword">func</span> <!-- --><span class="token function-definition function">prepareForReuse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">prepareForReuse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<!-- --></span><span class="code-line">    viewModel<!-- --><span class="token operator">?</span><span class="token punctuation">.</span>isLoading<!-- --><span class="token punctuation">.</span>valueChanged <!-- --><span class="token operator">=</span> <!-- --><span class="token nil constant">nil</span>
<!-- --></span><span class="code-line"><span class="token punctuation">}</span>
<!-- --></span></code></pre>
<!-- --><p>这样就可以确保 cell 只针对正确的 ViewModel 做反应，而不会因为 reuse 造成错误的更新。</p>
<!-- --><p>现在，可以对 dataSource 再进一步简化：</p>
<!-- --><pre class="language-swift"><code class="language-swift code-highlight"><span class="code-line"><span class="token keyword">let</span> viewModel <!-- --><span class="token operator">=</span> viewModels<!-- --><span class="token punctuation">[</span>indexPath<!-- --><span class="token punctuation">.</span>row<!-- --><span class="token punctuation">]</span>
<!-- --></span><span class="code-line"><span class="token keyword">if</span> <!-- --><span class="token keyword">let</span> memberViewModel <!-- --><span class="token operator">=</span> viewModel <!-- --><span class="token keyword">as</span><span class="token operator">?</span> <!-- --><span class="token class-name">MemberViewModel</span><span class="token punctuation">,</span> <!-- --><span class="token keyword">let</span> cell <!-- --><span class="token operator">=</span> tableView<!-- --><span class="token punctuation">.</span><span class="token function">dequeueReusableCell</span><span class="token punctuation">(</span>withIdentifier<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">MemberCell</span><span class="token punctuation">.</span><span class="token function">cellIdentifier</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <!-- --><span class="token keyword">for</span><span class="token punctuation">:</span> indexPath<!-- --><span class="token punctuation">)</span> <!-- --><span class="token keyword">as</span><span class="token operator">?</span> <!-- --><span class="token class-name">MemberCell</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">    cell<!-- --><span class="token punctuation">.</span><span class="token function">setup</span><span class="token punctuation">(</span>viewModel<!-- --><span class="token punctuation">:</span> memberViewModel<!-- --><span class="token punctuation">)</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">return</span> cell
<!-- --></span><span class="code-line"><span class="token punctuation">}</span> <!-- --><span class="token keyword">else</span> <!-- --><span class="token keyword">if</span> <!-- --><span class="token keyword">let</span> photoViewModel <!-- --><span class="token operator">=</span> viewModel <!-- --><span class="token keyword">as</span><span class="token operator">?</span> <!-- --><span class="token class-name">PhotoViewModel</span><span class="token punctuation">,</span> <!-- --><span class="token keyword">let</span> cell <!-- --><span class="token operator">=</span> tableView<!-- --><span class="token punctuation">.</span><span class="token function">dequeueReusableCell</span><span class="token punctuation">(</span>withIdentifier<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">PhotoCell</span><span class="token punctuation">.</span><span class="token function">cellIdentifier</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <!-- --><span class="token keyword">for</span><span class="token punctuation">:</span> indexPath<!-- --><span class="token punctuation">)</span> <!-- --><span class="token keyword">as</span><span class="token operator">?</span> <!-- --><span class="token class-name">PhotoCell</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">    cell<!-- --><span class="token punctuation">.</span><span class="token function">setup</span><span class="token punctuation">(</span>viewModel<!-- --><span class="token punctuation">:</span> photoViewModel<!-- --><span class="token punctuation">)</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">return</span> cell
<!-- --></span><span class="code-line"><span class="token punctuation">}</span> <!-- --><span class="token keyword">else</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token function">fatalError</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Unhandled feed </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">feed</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
<!-- --></span><span class="code-line"><span class="token punctuation">}</span>
<!-- --></span><span class="code-line">
</span></code></pre>
<!-- --><p>dataSource 的职责非常简单：使用 cell 的 ViewModel 设置 tableview 。 另一方面，设置 UI 组件的细节被委托给 cell 。cell 的状态储存在 ViewModel 中（由Controller 而不是 ViewController 拥有）。</p>
<!-- --><p>实际上，还有改进的余地！由于我们统一了单元的接口，我们可以通过使用 Protocol 来减少冗余！</p>
<!-- --><h2 id="利用-protocol-减少冗余"><a aria-hidden="true" tabindex="-1" href="#利用-protocol-减少冗余"><span class="icon icon-link"></span></a>利用 Protocol 减少冗余<!-- --></h2>
<!-- --><p><code>func tableView(tableView:, indexPath:) -&gt; UITableViewCell</code> 中调用了两次 <!-- --><code>setup(viewModel:) </code>。我们可以使用 Swift Protocol 为各种 cell 创建通用设置函数。
让我们创建一个名为 CellConfigurable 的协议<!-- --></p>
<!-- --><pre class="language-swift"><code class="language-swift code-highlight"><span class="code-line"><span class="token keyword">protocol</span> <!-- --><span class="token class-name">CellConfigurable</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">func</span> <!-- --><span class="token function-definition function">setup</span><span class="token punctuation">(</span>viewModel<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">RowViewModel</span><span class="token punctuation">)</span> <!-- --><span class="token comment">// Provide a generic function</span>
<!-- --></span><span class="code-line"><span class="token punctuation">}</span>
<!-- --></span></code></pre>
<!-- --><p>这是 cell 协议。可以使用 RowViewModel 实例设置确认协议的单元。
同时，RowViewModel是另一种协议：</p>
<!-- --><pre class="language-swift"><code class="language-swift code-highlight"><span class="code-line"><span class="token keyword">protocol</span> <!-- --><span class="token class-name">RowViewModel</span> <!-- --><span class="token punctuation">{</span><span class="token punctuation">}</span>
<!-- --></span><span class="code-line">
</span><span class="code-line"><span class="token comment">// make view models conform the RowViewModel protocol</span>
<!-- --></span><span class="code-line"><span class="token keyword">class</span> <!-- --><span class="token class-name">MemberViewModel</span><span class="token punctuation">:</span> <!-- --><span class="token class-name">RowViewModel</span> <!-- --><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<!-- --></span><span class="code-line"><span class="token keyword">class</span> <!-- --><span class="token class-name">PhotoViewModel</span><span class="token punctuation">:</span> <!-- --><span class="token class-name">RowViewModel</span> <!-- --><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<!-- --></span></code></pre>
<!-- --><p>符合 RowViewModel 的 ViewModel 可以用来设置 CellConfigurable 。通过使用协议，我们可以进一步简化 dataSource :</p>
<!-- --><pre class="language-swift"><code class="language-swift code-highlight"><span class="code-line"><span class="token keyword">func</span> <!-- --><span class="token function-definition function">tableView</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> tableView<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">UITableView</span><span class="token punctuation">,</span> cellForRowAt indexPath<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">IndexPath</span><span class="token punctuation">)</span> <!-- --><span class="token operator">-&gt;</span> <!-- --><span class="token class-name">UITableViewCell</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">let</span> rowViewModel <!-- --><span class="token operator">=</span> <!-- --><span class="token keyword">self</span><span class="token punctuation">.</span>viewModels<!-- --><span class="token punctuation">[</span>indexPath<!-- --><span class="token punctuation">.</span>row<!-- --><span class="token punctuation">]</span>
<!-- --></span><span class="code-line">
</span><span class="code-line">    <!-- --><span class="token keyword">let</span> cell <!-- --><span class="token operator">=</span> tableView<!-- --><span class="token punctuation">.</span><span class="token function">dequeueReusableCell</span><span class="token punctuation">(</span>withIdentifier<!-- --><span class="token punctuation">:</span> <!-- --><span class="token keyword">self</span><span class="token punctuation">.</span><span class="token function">cellIdentifier</span><span class="token punctuation">(</span><span class="token keyword">for</span><span class="token punctuation">:</span> rowViewModel<!-- --><span class="token punctuation">)</span><span class="token punctuation">,</span> <!-- --><span class="token keyword">for</span><span class="token punctuation">:</span> indexPath<!-- --><span class="token punctuation">)</span>
<!-- --></span><span class="code-line">
</span><span class="code-line">    <!-- --><span class="token keyword">if</span> <!-- --><span class="token keyword">let</span> cell <!-- --><span class="token operator">=</span> cell <!-- --><span class="token keyword">as</span><span class="token operator">?</span> <!-- --><span class="token class-name">CellConfigurable</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">        cell<!-- --><span class="token punctuation">.</span><span class="token function">setup</span><span class="token punctuation">(</span>viewModel<!-- --><span class="token punctuation">:</span> rowViewModel<!-- --><span class="token punctuation">)</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token punctuation">}</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">return</span> cell
<!-- --></span><span class="code-line"><span class="token punctuation">}</span>
<!-- --></span><span class="code-line">
</span><span class="code-line"><span class="token comment">/// Map the view model with the cell identifier (which will be moved to the Controller)</span>
<!-- --></span><span class="code-line"><span class="token keyword">private</span> <!-- --><span class="token keyword">func</span> <!-- --><span class="token function-definition function">cellIdentifier</span><span class="token punctuation">(</span><span class="token keyword">for</span> viewModel<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">RowViewModel</span><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">switch</span> viewModel <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">case</span> <!-- --><span class="token keyword">is</span> <!-- --><span class="token class-name">PhotoCellViewModel</span><span class="token punctuation">:</span>
<!-- --></span><span class="code-line">        <!-- --><span class="token keyword">return</span> <!-- --><span class="token class-name">PhotoCell</span><span class="token punctuation">.</span><span class="token function">cellIdentifier</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">case</span> <!-- --><span class="token keyword">is</span> <!-- --><span class="token class-name">MemberCellViewModel</span><span class="token punctuation">:</span>
<!-- --></span><span class="code-line">        <!-- --><span class="token keyword">return</span> <!-- --><span class="token class-name">MemberCell</span><span class="token punctuation">.</span><span class="token function">cellIdentifier</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">default</span><span class="token punctuation">:</span>
<!-- --></span><span class="code-line">        <!-- --><span class="token function">fatalError</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Unexpected view model type: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">viewModel</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token punctuation">}</span>
<!-- --></span><span class="code-line"><span class="token punctuation">}</span>
<!-- --></span></code></pre>
<!-- --><p>现在添加一个单元格类型不会改变 <!-- --><code>func tableView（tableView：，indexPath :)  - &gt; UITableViewCell</code> 的实现！换句话说，dataSource 的可扩展性变得很好：无论我们添加多少种 cell，复杂性都保持不变！<!-- --></p>
<!-- --><h2 id="更多的-protocol"><a aria-hidden="true" tabindex="-1" href="#更多的-protocol"><span class="icon icon-link"></span></a>更多的 Protocol<!-- --></h2>
<!-- --><p>Protocol 还可以用来简化与 cell 的交互：</p>
<!-- --><pre class="language-swift"><code class="language-swift code-highlight"><span class="code-line"><span class="token keyword">protocol</span> <!-- --><span class="token class-name">ViewModelPressible</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">var</span> cellPressed<!-- --><span class="token punctuation">:</span> <!-- --><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token class-name">Void</span><span class="token punctuation">)</span><span class="token operator">?</span> <!-- --><span class="token punctuation">{</span> <!-- --><span class="token keyword">get</span> <!-- --><span class="token keyword">set</span> <!-- --><span class="token punctuation">}</span>
<!-- --></span><span class="code-line"><span class="token punctuation">}</span>
<!-- --></span><span class="code-line">
</span><span class="code-line"><span class="token keyword">class</span> <!-- --><span class="token class-name">PhotoViewModel</span><span class="token punctuation">:</span> <!-- --><span class="token class-name">RowViewModel</span><span class="token punctuation">,</span> <!-- --><span class="token class-name">ViewModelPressible</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">let</span> title<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">String</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">let</span> desc<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">String</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">var</span> image<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">AsyncImage</span>
<!-- --></span><span class="code-line">
</span><span class="code-line">    <!-- --><span class="token keyword">var</span> cellPressed<!-- --><span class="token punctuation">:</span> <!-- --><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <!-- --><span class="token operator">-&gt;</span> <!-- --><span class="token class-name">Void</span><span class="token punctuation">)</span><span class="token operator">?</span> <!-- --><span class="token comment">// Conform the ViewModelPressible protocol</span>
<!-- --></span><span class="code-line"><span class="token punctuation">}</span>
<!-- --></span></code></pre>
<!-- --><p>创建一个 ViewModelPressible 协议。有一个必需的实现：一个名为cellPressed的闭包变量。
然后，我们通过添加变量 cellPressed 使 PhotoViewModel 符合 ViewModelPressible 。符合 ViewModelPressible 意味着 ViewModel 能够处理用户按下事件。</p>
<!-- --><p>在 tableView 的代理，我们添加 <!-- --><code>func tableView(_ tableView:, indexPath:)</code> 的实现代码：<!-- --></p>
<!-- --><pre class="language-swift"><code class="language-swift code-highlight"><span class="code-line"><span class="token keyword">func</span> <!-- --><span class="token function-definition function">tableView</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> tableView<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">UITableView</span><span class="token punctuation">,</span> didSelectRowAt indexPath<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">IndexPath</span><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">let</span> viewModel <!-- --><span class="token operator">=</span> <!-- --><span class="token keyword">self</span><span class="token punctuation">.</span>viewModels<!-- --><span class="token punctuation">[</span>indexPath<!-- --><span class="token punctuation">.</span>row<!-- --><span class="token punctuation">]</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">if</span> <!-- --><span class="token keyword">let</span> viewModel <!-- --><span class="token operator">=</span> viewModel <!-- --><span class="token keyword">as</span><span class="token operator">?</span> <!-- --><span class="token class-name">ViewModelPressible</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">        rowViewModel<!-- --><span class="token punctuation">.</span>cellPressed<!-- --><span class="token operator">?</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token punctuation">}</span>
<!-- --></span><span class="code-line"><span class="token punctuation">}</span>
<!-- --></span></code></pre>
<!-- --><p>现在所有 didSelectRow 事件都转换为相应的 ViewModel 。以下示例显示了用法：</p>
<!-- --><pre><code class="language-swfit code-highlight"><span class="code-line">// When creating the view model
</span><span class="code-line">let photoCellViewModel = PhotoCellViewModel()
</span><span class="code-line">photoCellViewModel.cellPressed = {
</span><span class="code-line">                    print(&quot;Ask the coordinator or the view controller to open a photo viewer!&quot;)
</span><span class="code-line">                }
</span></code></pre>
<!-- --><p>同样，我们成功地将交互包装到 ViewModel 对象中，并保持表视图委托的干净！</p>
<!-- --><p>完成所有这些工作后，我們稍微把镜头拉远一点，回头看一下我们的 FeedListViewController 。</p>
<!-- --><h2 id="处理业务逻辑"><a aria-hidden="true" tabindex="-1" href="#处理业务逻辑"><span class="icon icon-link"></span></a>处理业务逻辑<!-- --></h2>
<!-- --><p>FeedListViewController还有一个不相关的作业：</p>
<!-- --><ul>
<!-- --><li>设定 cell 的 UI 组件，如 nameLabel, imageView</li>
<!-- --><li>记录单元格的状态，例如 cellLoadingStates</li>
<!-- --><li>进行 API 调用并保存数据</li>
<!-- --></ul>
<!-- --><p>新的构架：</p>
<!-- --><div><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%27746%27%20height=%27444%27/%3e"/></span><img alt="" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="" srcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/media/mvvm-img1.006-3.png 1x, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/media/mvvm-img1.006-3.png 2x" src="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/media/mvvm-img1.006-3.png" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div>
<!-- --><p>我们想让 FeedListViewController 成为一个简单的视图，并将业务逻辑移动到另一个：FeedListController 。 FeedListController 负责进行 API 调用并保存数据模型。
我们可以说 FeedListController 的职责是处理业务逻辑。基于这个想法，让我们创建一个FeedListController：</p>
<!-- --><pre class="language-swift"><code class="language-swift code-highlight"><span class="code-line"><span class="token comment">// FeedListController.swift</span>
<!-- --></span><span class="code-line"><span class="token keyword">let</span> viewModels <!-- --><span class="token operator">=</span> <!-- --><span class="token class-name">Observable</span><span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token class-name">RowViewModel</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>value<!-- --><span class="token punctuation">:</span> <!-- --><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<!-- --></span><span class="code-line">
</span><span class="code-line"><span class="token keyword">func</span> <!-- --><span class="token function-definition function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">    service<!-- --><span class="token punctuation">.</span>fetchFeed <!-- --><span class="token punctuation">{</span> <!-- --><span class="token punctuation">[</span><span class="token keyword">weak</span> <!-- --><span class="token keyword">self</span><span class="token punctuation">]</span> feeds <!-- --><span class="token keyword">in</span>
<!-- --></span><span class="code-line">        <!-- --><span class="token keyword">self</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">buildViewModels</span><span class="token punctuation">(</span>feeds<!-- --><span class="token punctuation">:</span> feeds<!-- --><span class="token punctuation">)</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token punctuation">}</span>
<!-- --></span><span class="code-line"><span class="token punctuation">}</span>
<!-- --></span><span class="code-line">
</span><span class="code-line"><span class="token keyword">func</span> <!-- --><span class="token function-definition function">buildViewModels</span><span class="token punctuation">(</span>feeds<!-- --><span class="token punctuation">:</span> <!-- --><span class="token punctuation">[</span><span class="token class-name">Feed</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">var</span> viewModels <!-- --><span class="token operator">=</span> <!-- --><span class="token punctuation">[</span><span class="token class-name">RowViewModel</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">for</span> feed <!-- --><span class="token keyword">in</span> feeds <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">        <!-- --><span class="token keyword">if</span> <!-- --><span class="token keyword">let</span> feed <!-- --><span class="token operator">=</span> feed <!-- --><span class="token keyword">as</span><span class="token operator">?</span> <!-- --><span class="token class-name">Member</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">            viewModels<!-- --><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span> <!-- --><span class="token class-name">MemberViewModel</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>feed<!-- --><span class="token punctuation">)</span> <!-- --><span class="token punctuation">)</span>
<!-- --></span><span class="code-line">        <!-- --><span class="token punctuation">}</span> <!-- --><span class="token keyword">else</span> <!-- --><span class="token keyword">if</span> <!-- --><span class="token keyword">let</span> feed <!-- --><span class="token operator">=</span> feed <!-- --><span class="token keyword">as</span><span class="token operator">?</span> <!-- --><span class="token class-name">Photo</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">            <!-- --><span class="token keyword">var</span> photoViewModel <!-- --><span class="token operator">=</span> <!-- --><span class="token class-name">PhotoViewModel</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>feed<!-- --><span class="token punctuation">)</span>
<!-- --></span><span class="code-line">            photoViewModel<!-- --><span class="token punctuation">.</span>cellPressed <!-- --><span class="token operator">=</span> <!-- --><span class="token punctuation">{</span> <!-- --><span class="token punctuation">[</span><span class="token keyword">weak</span> <!-- --><span class="token keyword">self</span><span class="token punctuation">]</span> <!-- --><span class="token keyword">in</span>  
<!-- --></span><span class="code-line">                <!-- --><span class="token keyword">self</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">handleCellPressed</span><span class="token punctuation">(</span>feed<!-- --><span class="token punctuation">)</span>
<!-- --></span><span class="code-line">            <!-- --><span class="token punctuation">}</span>
<!-- --></span><span class="code-line">            viewModels<!-- --><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>photoViewModel<!-- --><span class="token punctuation">)</span>
<!-- --></span><span class="code-line">        <!-- --><span class="token punctuation">}</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token punctuation">}</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">self</span><span class="token punctuation">.</span>viewModels<!-- --><span class="token punctuation">.</span>value <!-- --><span class="token operator">=</span> viewModels
<!-- --></span><span class="code-line"><span class="token punctuation">}</span>
<!-- --></span><span class="code-line">
</span><span class="code-line"><span class="token keyword">func</span> <!-- --><span class="token function-definition function">handleCellPressed</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> feed<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">Feed</span><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token comment">// Send analytics, fetch detail data, etc</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token comment">// Open detail photo view</span>
<!-- --></span><span class="code-line"><span class="token punctuation">}</span>
<!-- --></span></code></pre>
<!-- --><p>从上面的代码中可以看到，controller 不知道任何 UI 组件的逻辑，相反， ViewModel 在此处成为了 View 和 ViewController 的中间人。</p>
<!-- --><p>从另一个角度来看，FeedListViewController变为：</p>
<!-- --><pre class="language-swift"><code class="language-swift code-highlight"><span class="code-line"><span class="token keyword">var</span> viewModels<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">Observable</span><span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token class-name">RowViewModel</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">return</span> controller<!-- --><span class="token punctuation">.</span>viewModels
<!-- --></span><span class="code-line"><span class="token punctuation">}</span>
<!-- --></span><span class="code-line">
</span><span class="code-line"><span class="token keyword">override</span> <!-- --><span class="token keyword">func</span> <!-- --><span class="token function-definition function">viewDidLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">    viewModels<!-- --><span class="token punctuation">.</span>valueUpdate <!-- --><span class="token punctuation">{</span> <!-- --><span class="token punctuation">[</span><span class="token keyword">weak</span> <!-- --><span class="token keyword">self</span><span class="token punctuation">]</span> <!-- --><span class="token punctuation">(</span><span class="token omit keyword">_</span><span class="token punctuation">)</span> <!-- --><span class="token keyword">in</span>
<!-- --></span><span class="code-line">        <!-- --><span class="token keyword">self</span><span class="token operator">?</span><span class="token punctuation">.</span>tableView<!-- --><span class="token punctuation">.</span><span class="token function">reloadData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token punctuation">}</span>
<!-- --></span><span class="code-line">    controller<!-- --><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<!-- --></span><span class="code-line"><span class="token punctuation">}</span>
<!-- --></span><span class="code-line">
</span><span class="code-line"><span class="token keyword">func</span> <!-- --><span class="token function-definition function">tableView</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> tableView<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">UITableView</span><span class="token punctuation">,</span> numberOfRowsInSection section<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">Int</span><span class="token punctuation">)</span> <!-- --><span class="token operator">-&gt;</span> <!-- --><span class="token class-name">Int</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">return</span> rowViewModels<!-- --><span class="token punctuation">.</span>value<!-- --><span class="token punctuation">.</span>count
<!-- --></span><span class="code-line"><span class="token punctuation">}</span>
<!-- --></span><span class="code-line">
</span><span class="code-line"><span class="token keyword">func</span> <!-- --><span class="token function-definition function">tableView</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> tableView<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">UITableView</span><span class="token punctuation">,</span> cellForRowAt indexPath<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">IndexPath</span><span class="token punctuation">)</span> <!-- --><span class="token operator">-&gt;</span> <!-- --><span class="token class-name">UITableViewCell</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">let</span> rowViewModel <!-- --><span class="token operator">=</span> <!-- --><span class="token keyword">self</span><span class="token punctuation">.</span>rowViewModels<!-- --><span class="token punctuation">.</span>value<!-- --><span class="token punctuation">[</span>indexPath<!-- --><span class="token punctuation">.</span>row<!-- --><span class="token punctuation">]</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">let</span> cell <!-- --><span class="token operator">=</span> tableView<!-- --><span class="token punctuation">.</span><span class="token function">dequeueReusableCell</span><span class="token punctuation">(</span>withIdentifier<!-- --><span class="token punctuation">:</span> controller<!-- --><span class="token punctuation">.</span><span class="token function">cellIdentifier</span><span class="token punctuation">(</span><span class="token keyword">for</span><span class="token punctuation">:</span> rowViewModel<!-- --><span class="token punctuation">)</span><span class="token punctuation">,</span> <!-- --><span class="token keyword">for</span><span class="token punctuation">:</span> indexPath<!-- --><span class="token punctuation">)</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">if</span> <!-- --><span class="token keyword">let</span> cell <!-- --><span class="token operator">=</span> cell <!-- --><span class="token keyword">as</span><span class="token operator">?</span> <!-- --><span class="token class-name">CellConfigurable</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">        cell<!-- --><span class="token punctuation">.</span><span class="token function">setup</span><span class="token punctuation">(</span>viewModel<!-- --><span class="token punctuation">:</span> rowViewModel<!-- --><span class="token punctuation">)</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token punctuation">}</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">return</span> cell
<!-- --></span><span class="code-line"><span class="token punctuation">}</span>
<!-- --></span><span class="code-line">
</span><span class="code-line"><span class="token keyword">func</span> <!-- --><span class="token function-definition function">tableView</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> tableView<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">UITableView</span><span class="token punctuation">,</span> didSelectRowAt indexPath<!-- --><span class="token punctuation">:</span> <!-- --><span class="token class-name">IndexPath</span><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token keyword">if</span> <!-- --><span class="token keyword">let</span> rowViewModel <!-- --><span class="token operator">=</span> rowViewModels<!-- --><span class="token punctuation">.</span>value<!-- --><span class="token punctuation">[</span>indexPath<!-- --><span class="token punctuation">.</span>row<!-- --><span class="token punctuation">]</span> <!-- --><span class="token keyword">as</span><span class="token operator">?</span> <!-- --><span class="token class-name">ViewModelPressible</span> <!-- --><span class="token punctuation">{</span>
<!-- --></span><span class="code-line">        rowViewModel<!-- --><span class="token punctuation">.</span>cellPressed<!-- --><span class="token operator">?</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<!-- --></span><span class="code-line">    <!-- --><span class="token punctuation">}</span>
<!-- --></span><span class="code-line"><span class="token punctuation">}</span>
<!-- --></span></code></pre>
<!-- --><p>FeedViewController 的唯一职责是设置表视图，充当 dataSource 和表视图的委托。添加单元格类型或修改交互不会更改此 ViewController。</p>
<!-- --><p>这样做有很多好处：可以编写单元测试来测试 UI 状态，用户交互以及服务器连接行为！
除了可测试性的提高外，整个 feed 模块的可扩展性也得到了提高！</p>
<!-- --><h2 id="summary"><a aria-hidden="true" tabindex="-1" href="#summary"><span class="icon icon-link"></span></a>Summary<!-- --></h2>
<!-- --><p>在本文中，我们展示了如何通过执行这些更改来简化复杂的 TableView ：</p>
<!-- --><ol>
<!-- --><li>使单元格处理UI组件设置;</li>
<!-- --></ol>
<!-- --><ul>
<!-- --><li>使用MVVM抽象UI组件和交互;</li>
<!-- --><li>使用协议来整合设置界面;</li>
<!-- --><li>使用 Controller 来处理业务逻辑。</li>
<!-- --></ul>
<!-- --><p>Massive View Controller 是一个臭名昭着的反模式。现在我们知道问题不是 MVC 模式本身。有许多方法可以分离系统的职责，包括但不限于 MVVM 模式。我会说 MVVM 模式是提高代码质量的少数工具，但它不是一个灵丹妙药。
除了 MVVM 之外，我们还需要处理诸如可扩展性，可测试性以及 <!-- --><a href="https://en.wikipedia.org/wiki/SOLID">SOLID-Wikipedia</a> 等更多原则之类的事情。
因此，在采用任何架构之前，请彻底了解架构的设计，仔细选择最适合您需求的架构。<!-- --></p>
<!-- --><h2 id="相关文章"><a aria-hidden="true" tabindex="-1" href="#相关文章"><span class="icon icon-link"></span></a>相关文章<!-- --></h2>
<!-- --><ul>
<!-- --><li><a href="https://medium.com/@stasost/ios-how-to-build-a-table-view-with-multiple-cell-types-2df91a206429">iOS: How to build a Table View with multiple cell types</a></li>
<!-- --><li><a href="https://medium.cobeisfresh.com/dealing-with-complex-table-views-in-ios-and-keeping-your-sanity-ff5fee1fbb83">Dealing with Complex Table Views in iOS and Keeping Your Sanity</a></li>
<!-- --><li><a href="https://academy.realm.io/posts/doios-natasha-murashev-protocol-oriented-mvvm/">Introduction to Protocol-Oriented MVVM</a></li>
<!-- --><li><a href="https://blog.jayway.com/2016/11/15/clean-table-view-code-using-swift-protocols/">Clean Table View Code Using Swift Protocols - Jayway</a></li>
<!-- --></ul></div></section><section class="post-full-content"><div class="post-full-comments"><div class="giscus" id="comments-container"></div></div></section></article></div></main><aside class="read-next outer"><div class="inner"><div class="read-next-feed"><article class="read-next-card"><header class="read-next-card-header"><h3><span>More in</span> <!-- --><a href="/tag/ios/">iOS</a></h3></header><div class="read-next-card-content"><ul><li><h4><a href="/posts/2016/arc-in-swift/">Swift:Automatic Reference Counting in Swift</a></h4><div class="read-next-card-meta"><p><time dateTime="2016-12-30T00:00:00.000Z">30 December, 2016</time> – <!-- -->24 min read<!-- --></p></div></li><li><h4><a href="/posts/2016/ios-remotenotification/">iOS:关于iOS的推送</a></h4><div class="read-next-card-meta"><p><time dateTime="2016-12-23T00:00:00.000Z">23 December, 2016</time> – <!-- -->5 min read<!-- --></p></div></li><li><h4><a href="/posts/2017/ios-carthage/">Carthage 的简单使用</a></h4><div class="read-next-card-meta"><p><time dateTime="2017-06-19T12:57:37.000Z">19 June, 2017</time> – <!-- -->2 min read<!-- --></p></div></li></ul></div><footer class="read-next-card-footer"><a href="/tag/ios/">See all 12 posts<!-- --> <!-- -->→<!-- --></a></footer></article><article class="post-card post tag-debian "><a class="post-card-image-link" aria-label="Notes About Debian" href="/posts/2019/debian/"><div class="post-card-image"><span style="box-sizing:border-box;display:block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:absolute;top:0;left:0;bottom:0;right:0"><img alt="Notes About Debian" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="fill" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover"/><noscript><img alt="Notes About Debian" sizes="100vw" srcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/computer.jpg 640w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/computer.jpg 750w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/computer.jpg 828w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/computer.jpg 1080w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/computer.jpg 1200w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/computer.jpg 1920w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/computer.jpg 2048w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/computer.jpg 3840w" src="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/computer.jpg" decoding="async" data-nimg="fill" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></a><div class="post-card-content"><a class="post-card-content-link" href="/posts/2019/debian/"><header class="post-card-header"><div class="post-card-primary-tag">debian</div><h2 class="post-card-title">Notes About Debian</h2></header><section class="post-card-excerpt"><p>使用 TUNA 的软件源镜像</p></section></a><footer class="post-card-meta"><ul class="author-list"><li class="author-list-item"><div class="author-name-tooltip">Roninro</div><a class="static-avatar" aria-label="Roninro" href="/author/roninro/"><span style="box-sizing:border-box;display:block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;padding-top:100%"></span><img alt="Roninro" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="responsive" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="Roninro" sizes="100vw" srcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 640w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 750w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 828w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 1080w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 1200w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 1920w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 2048w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 3840w" src="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg" decoding="async" data-nimg="responsive" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></a></li></ul><div class="post-card-byline-content"><span><span><a href="/author/roninro/">Roninro</a></span></span><span class="post-card-byline-date"><time dateTime="2019-05-29T05:33:48.000Z">29 May 2019<!-- --> <!-- --></time><span class="bull">• </span> <!-- -->2 min read<!-- --></span></div></footer></div></article><article class="post-card post tag-git "><a class="post-card-image-link" aria-label="git-flow 工作流程" href="/posts/2019/git-flow/"><div class="post-card-image"><span style="box-sizing:border-box;display:block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:absolute;top:0;left:0;bottom:0;right:0"><img alt="git-flow 工作流程" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="fill" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover"/><noscript><img alt="git-flow 工作流程" sizes="100vw" srcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/git-flow.png 640w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/git-flow.png 750w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/git-flow.png 828w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/git-flow.png 1080w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/git-flow.png 1200w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/git-flow.png 1920w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/git-flow.png 2048w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/git-flow.png 3840w" src="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/git-flow.png" decoding="async" data-nimg="fill" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></a><div class="post-card-content"><a class="post-card-content-link" href="/posts/2019/git-flow/"><header class="post-card-header"><div class="post-card-primary-tag">git</div><h2 class="post-card-title">git-flow 工作流程</h2></header><section class="post-card-excerpt"><p>当我们选择 Git 作为版本控制系统时，使用一个统一的工作流程是非常重要的。 Git 在分支控制上面做得非常好，但是如果团队在开发中没有使用有效的工作流程，混乱将是不可避免的。</p></section></a><footer class="post-card-meta"><ul class="author-list"><li class="author-list-item"><div class="author-name-tooltip">Roninro</div><a class="static-avatar" aria-label="Roninro" href="/author/roninro/"><span style="box-sizing:border-box;display:block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;padding-top:100%"></span><img alt="Roninro" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="responsive" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="Roninro" sizes="100vw" srcSet="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 640w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 750w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 828w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 1080w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 1200w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 1920w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 2048w, https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg 3840w" src="https://cdn.jsdelivr.net/gh/roninro/roninro.github.io@main/images/avatar.jpg" decoding="async" data-nimg="responsive" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></a></li></ul><div class="post-card-byline-content"><span><span><a href="/author/roninro/">Roninro</a></span></span><span class="post-card-byline-date"><time dateTime="2019-04-19T03:37:38.000Z">19 Apr 2019<!-- --> <!-- --></time><span class="bull">• </span> <!-- -->6 min read<!-- --></span></div></footer></div></article></div></div></aside><footer class="site-footer outer"><div class="site-footer-content inner"><section class="copyright"><a href="https://fninit.com/">RoninRo&#x27;s Blog</a> © <!-- -->2022<!-- --></section><nav class="site-footer-nav"><a href="/">Latest Posts</a><a href="https://fninit.com" target="_blank" rel="noopener noreferrer">Roninro</a></nav></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"cmsData":{"settings":{"darkMode":{"defaultMode":"light","overrideOS":true},"nextImages":{"feature":true,"inline":true,"quality":80,"source":false},"rssFeed":true,"toc":{"enable":true,"maxDepth":2},"commenting":{"system":"giscus","disqusShortname":"","giscusConfig":{"repo":"roninro/blog","repoId":"MDEwOlJlcG9zaXRvcnkzMDkyNTUzODI","category":"Comments","categoryId":"DIC_kwDOEm7c1s4B_sst","mapping":"pathname","emitMetadata":false,"reactionsEnabled":true}},"siteUrl":"https://fninit.com","title":"RoninRo's Blog","description":"Thoughts, stories and ideas.","logo":"/images/logo.png","cover_image":"","facebook":"","twitter":"","lang":"en","navigation":[{"label":"Home","url":"/"},{"label":"About","url":"/about/"}],"secondary_navigation":[],"logoImage":{"url":"/images/logo.png","dimensions":{"width":500,"height":405}}},"post":{"slug":"/posts/2019/ios-mvvm-tableview","title":"iOS 高级教程：用 MVVM 处理复杂的TableView","date":"2019-05-16T02:15:54.000Z","excerpt":"在本文，我们将讨论如何 用 Model-View-ViewModel(MVVM) 模式来组织 table view 代码。MVVM 是一种架构模型，它使用数据模型表示视图状态。我们可以使用很多 Swift 技术， 使 UI 逻辑包装成数据模型。例如使用协议和闭包简化 table view 中的代码。","draft":false,"page":false,"comment":true,"featureImage":{"url":"/images/ian-keefe-unsplash.jpg","dimensions":{"width":2000,"height":1333}},"toc":[{"id":"newsfeed-app","heading":"Newsfeed App","items":[{"id":"membercell","heading":"MemberCell"},{"id":"photocell","heading":"PhotoCell"}]},{"id":"开始","heading":"开始"},{"id":"分拆-cell-ui-设定","heading":"分拆 cell UI 设定"},{"id":"为-cell-设计-viewmodel","heading":"为 Cell 设计 ViewModel"},{"id":"利用-protocol-减少冗余","heading":"利用 Protocol 减少冗余"},{"id":"更多的-protocol","heading":"更多的 Protocol"},{"id":"处理业务逻辑","heading":"处理业务逻辑"},{"id":"summary","heading":"Summary"},{"id":"相关文章","heading":"相关文章"}],"tags":[{"name":"iOS","slug":"ios","count":12}],"authors":[{"slug":"roninro","name":"Roninro","cover_image":"/images/publication-cover.png","profileImage":{"url":"/images/avatar.jpg","dimensions":{"width":1080,"height":1080}},"location":"THE INTERNET","bio":"Software Development Engineer","twitter":"@xxxxx","facebook":"xxxxxx"}],"primary_tag":{"name":"iOS","slug":"ios","count":12},"reading_time":"17 min read","mdxSource":"var Component=(()=\u003e{var p=Object.create;var i=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var t=a=\u003ei(a,\"__esModule\",{value:!0});var k=(a,s)=\u003e()=\u003e(s||a((s={exports:{}}).exports,s),s.exports),w=(a,s)=\u003e{for(var c in s)i(a,c,{get:s[c],enumerable:!0})},o=(a,s,c,n)=\u003e{if(s\u0026\u0026typeof s==\"object\"||typeof s==\"function\")for(let l of m(s))!N.call(a,l)\u0026\u0026(c||l!==\"default\")\u0026\u0026i(a,l,{get:()=\u003es[l],enumerable:!(n=h(s,l))||n.enumerable});return a},f=(a,s)=\u003eo(t(i(a!=null?p(u(a)):{},\"default\",!s\u0026\u0026a\u0026\u0026a.__esModule?{get:()=\u003ea.default,enumerable:!0}:{value:a,enumerable:!0})),a),g=(a=\u003e(s,c)=\u003ea\u0026\u0026a.get(s)||(c=o(t({}),s,1),a\u0026\u0026a.set(s,c),c))(typeof WeakMap!=\"undefined\"?new WeakMap:0);var r=k((I,d)=\u003e{d.exports=_jsx_runtime});var M={};w(M,{default:()=\u003eb,frontmatter:()=\u003ey});var e=f(r()),y={categories:[\"iOS\"],date:\"2019-05-16T10:15:54+08:00\",excerpt:\"\\u5728\\u672C\\u6587\\uFF0C\\u6211\\u4EEC\\u5C06\\u8BA8\\u8BBA\\u5982\\u4F55 \\u7528 Model-View-ViewModel(MVVM) \\u6A21\\u5F0F\\u6765\\u7EC4\\u7EC7 table view \\u4EE3\\u7801\\u3002MVVM \\u662F\\u4E00\\u79CD\\u67B6\\u6784\\u6A21\\u578B\\uFF0C\\u5B83\\u4F7F\\u7528\\u6570\\u636E\\u6A21\\u578B\\u8868\\u793A\\u89C6\\u56FE\\u72B6\\u6001\\u3002\\u6211\\u4EEC\\u53EF\\u4EE5\\u4F7F\\u7528\\u5F88\\u591A Swift \\u6280\\u672F\\uFF0C \\u4F7F UI \\u903B\\u8F91\\u5305\\u88C5\\u6210\\u6570\\u636E\\u6A21\\u578B\\u3002\\u4F8B\\u5982\\u4F7F\\u7528\\u534F\\u8BAE\\u548C\\u95ED\\u5305\\u7B80\\u5316 table view \\u4E2D\\u7684\\u4EE3\\u7801\\u3002\",tags:[\"iOS\"],title:\"iOS \\u9AD8\\u7EA7\\u6559\\u7A0B\\uFF1A\\u7528 MVVM \\u5904\\u7406\\u590D\\u6742\\u7684TableView\",toc:!0,authors:[\"Roninro\"],feature_image:\"/images/ian-keefe-unsplash.jpg\"};function V(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(c,{})})):c();function c(){let n=Object.assign({blockquote:\"blockquote\",p:\"p\",a:\"a\",h2:\"h2\",span:\"span\",ol:\"ol\",li:\"li\",ul:\"ul\",div:\"div\",img:\"img\",h3:\"h3\",strong:\"strong\",pre:\"pre\",code:\"code\",em:\"em\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u539F\\u6587\\uFF1A\",(0,e.jsx)(n.a,{href:\"https://flawlessapp.io/blog/advanced-mvvm-tableview-tutorial/#viewmodel\",children:\"Advanced iOS tutorial: Use MVVM to tackle complicated TableView\"})]}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[`\\u5728\\u672C\\u6587\\uFF0C\\u6211\\u4EEC\\u5C06\\u8BA8\\u8BBA\\u5982\\u4F55 \\u7528 Model-View-ViewModel(MVVM) \\u6A21\\u5F0F\\u6765\\u7EC4\\u7EC7 table view \\u4EE3\\u7801\\u3002\nMVVM \\u662F\\u4E00\\u79CD\\u67B6\\u6784\\u6A21\\u578B\\uFF0C\\u5B83\\u4F7F\\u7528\\u6570\\u636E\\u6A21\\u578B\\u8868\\u793A\\u89C6\\u56FE\\u72B6\\u6001\\u3002\\u6211\\u4EEC\\u53EF\\u4EE5\\u4F7F\\u7528\\u5F88\\u591A Swift \\u6280\\u672F\\uFF0C \\u4F7F UI \\u903B\\u8F91\\u5305\\u88C5\\u6210\\u6570\\u636E\\u6A21\\u578B\\u3002\\u4F8B\\u5982\\u4F7F\\u7528\\u534F\\u8BAE\\u548C\\u95ED\\u5305\\u7B80\\u5316 table view \\u4E2D\\u7684\\u4EE3\\u7801\\u3002\\u5EFA\\u8BAE\\u67E5\\u770B `,(0,e.jsx)(n.a,{href:\"https://medium.com/flawless-app-stories/how-to-use-a-model-view-viewmodel-architecture-for-ios-46963c67be1b\",children:\"\\u6587\\u7AE0\"}),\" \\u4EE5\\u5168\\u9762\\u4E86\\u89E3 MVVM \\u6A21\\u5F0F\\u3002\"]}),`\n`,(0,e.jsxs)(n.h2,{id:\"newsfeed-app\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#newsfeed-app\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Newsfeed App\"]}),`\n`,(0,e.jsx)(n.p,{children:`\\u4ECA\\u5929\\uFF0C\\u6211\\u4EEC\\u5C06\\u8981\\u505A\\u4E00\\u4E2A newsfeed app \\u3002App \\u4E3B\\u9875\\u662F\\u4E00\\u4E2A\\u5899\\uFF08wall\\uFF09\\u3002\\u5728\\u5899\\u4E0A\\uFF0C\\u6709\\u4E24\\u79CD feed \\uFF0C\\u4E00\\u79CD\\u662F\\u7167\\u7247\\u7684 feed\\uFF0C\\u4E00\\u79CD\\u662F\\u7528\\u6237\\u7684 feed\\u3002\n\\u6211\\u4EEC\\u5305\\u542B\\u4ECB\\u7ECD\\u4EE5\\u4E0B\\u7528\\u4F8B\\uFF1A`}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:\"tableView \\u6B63\\u786E\\u663E\\u793A Member \\u7684\\u5355\\u5143\\u683C\\u548C Photo \\u7684\\u5355\\u5143\\u683C\\u3002\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u201C+\\u201D \\u6309\\u94AE\\u663E\\u793A\\u5728\\u7B49\\u5F85 follow-a-member API \\u7684\\u54CD\\u5E94\\u65F6\\u7684\\u52A0\\u8F7D\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u5F53\\u7528\\u6237\\u6309\\u4E0B Photo \\u5355\\u5143\\u683C\\u65F6\\u89E6\\u53D1 open-detail \\u4E8B\\u4EF6\\u3002\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u754C\\u9762\\u5982\\u4E0B\\uFF1A\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(n.img,{src:\"/media/mvvm-screen.gif\",alt:\"\",width:\"300\",height:\"534\"})}),`\n`,(0,e.jsxs)(n.h3,{id:\"membercell\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#membercell\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"MemberCell\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"member cell \\u53EF\\u4EE5\\u63A8\\u8350\\u4E00\\u4E9B\\u4F60\\u53EF\\u4EE5\\u60F3\\u8981\\u5173\\u6CE8\\u7684\\u7528\\u6237\\uFF0C\\u4F60\\u53EF\\u4EE5\\u70B9\\u51FB Cell \\u4E0A\\u7684 \",(0,e.jsx)(n.strong,{children:\"+\"}),\" \\u6309\\u94AE\\uFF0CCell \\u6709 3\\u79CD\\u72B6\\u6001\\uFF1A\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.div,{children:[`Normal\n`,(0,e.jsx)(n.img,{src:\"/media/state_normal-3.png\",alt:\"\",width:\"1000\",height:\"129\"})]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.div,{children:[`Loading\n`,(0,e.jsx)(n.img,{src:\"/media/state_checked-3.png\",alt:\"\",width:\"1000\",height:\"129\"})]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.div,{children:[`Checked\n`,(0,e.jsx)(n.img,{src:\"/media/state_loading-3.png\",alt:\"\",width:\"1000\",height:\"129\"})]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"photocell\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#photocell\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"PhotoCell\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u7B2C\\u4E8C\\u4E2A cell \\u4F1A\\u5C55\\u793A\\u7167\\u7247\\u8DDF\\u5B83\\u7684\\u6807\\u9898\\u4E0E\\u4ECB\\u7ECD\\uFF0C\\u7528\\u6237\\u70B9\\u51FB\\u4E86\\u8FD9\\u4E2A cell \\u5C31\\u4F1A\\u6253\\u5F00\\u7167\\u7247\\u7684\\u8BE6\\u7EC6\\u4ECB\\u7ECD\\u3002\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(n.img,{src:\"/media/state_normal-3.png\",alt:\"\",width:\"1000\",height:\"129\"})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6211\\u4EEC\\u5047\\u8BBE API \\u7684\\u54CD\\u5E94\\u88AB\\u89E3\\u6790\\u4E3A\\u4E24\\u79CD model: Member \\u548C Photo.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u4F60\\u53EF\\u4EE5\\u5728 Github \\u4E0A\\u627E\\u5230\\u8FD9\\u4E2A\\u9879\\u76EE\\u7684\\u5B8C\\u6574\\u4EE3\\u7801\\uFF1A\",(0,e.jsx)(n.a,{href:\"https://github.com/koromiko/TheGreatWall\",children:\"GitHub \\u2013 koromiko/TheGreatWall: Using MVVM to tackle complicated feed view\"}),\"\\u3002\"]}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u5F00\\u59CB\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u5F00\\u59CB\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u5F00\\u59CB\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6211\\u4EEC\\u65B0\\u5EFA\\u4E00\\u4E2A FeedListViewController \\uFF0C\\u5E76\\u5C06\\u5B83\\u8BBE\\u7F6E\\u4E3A tableView \\u7684 dataSource\\uFF0C\\u8FD9\\u4E2A viewController \\u5927\\u6982\\u4F1A\\u957F\\u8FD9\\u4E2A\\u6837\\u5B50\\uFF1A\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-swift\",children:(0,e.jsxs)(n.code,{className:\"language-swift code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" feeds\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Feed\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Feed\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:` \n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" tableView\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"UITableView\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:` \n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"func\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"viewDidLoad\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"self\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"service\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"fetchFeeds \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"weak\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"self\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" feeds \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"in\"}),` \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"self\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"feeds \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),` feeds\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"self\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"tableView\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"reloadData\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:` \n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"func\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"tableView\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token omit keyword\",children:\"_\"}),\" tableView\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"UITableView\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" numberOfRowsInSection section\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Int\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"-\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Int\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),\" feeds\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),`count\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:` \n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"func\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"tableView\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token omit keyword\",children:\"_\"}),\" tableView\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"UITableView\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" cellForRowAt indexPath\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"IndexPath\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"-\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"UITableViewCell\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" feed \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" feeds\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"indexPath\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"row\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:` \n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" memberFeed \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" feed \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"as\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Member\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" cell \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" tableView\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"dequeueReusableCell\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"withIdentifier\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"MemberCell\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"cellIdentifier\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"for\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" indexPath\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"as\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"MemberCell\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        cell\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"nameLabel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"text \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" memberFeed\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),`name\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        cell\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"profileImageView\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"image \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" memberFeed\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),`image\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        cell\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"addBtn\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"isSelected \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" memberFeed\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),`isFollwing\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),` cell\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"else\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" photoFeed \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" feed \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"as\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Photo\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" cell \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" tableView\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"dequeueReusableCell\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"withIdentifier\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"PhotoCell\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"cellIdentifier\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"for\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" indexPath\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"as\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"PhotoCell\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        cell\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"titleLabel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"text \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" photoFeed\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),`captial\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        cell\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"descriptionLabel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"text \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" photoFeed\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),`description\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        cell\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"coverImageView\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"image \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" photoFeed\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),`image\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),` cell\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"else\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token function\",children:\"fatalError\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token string-literal\",children:[(0,e.jsx)(n.span,{className:\"token string\",children:'\"Unhandled feed '}),(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"\\\\(\"}),(0,e.jsx)(n.span,{className:\"token interpolation\",children:\"feed\"}),(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"'})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u6211\\u4EEC\\u628A\\u8BF7\\u6C42\\u7684\\u6570\\u636E\\u4FDD\\u5B58\\u5728 \",(0,e.jsx)(n.code,{children:\"feeds: [Feed]\"}),\" \\u4E2D\\uFF0C\",(0,e.jsx)(n.code,{children:\"func tableView(tableView:, indexPath:) -\u003e UITableViewCell\"}),\" \\u901A\\u8FC7 if-else \\u5904\\u7406\\u4E24\\u79CD feed \\u3002\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u7136\\u540E\\u6211\\u4EEC\\u8981\\u5904\\u7406 Member Cell \\u7684\\u52A0\\u8F7D\\u72B6\\u6001\\u3002\\u901A\\u5E38\\u6211\\u4EEC\\u4F7F\\u7528\\u6570\\u7EC4\\u4FDD\\u5B58\\u6240\\u6709 cell \\u7684\\u52A0\\u8F7D\\u72B6\\u6001\\u3002\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-swift\",children:(0,e.jsx)(n.code,{className:\"language-Swift code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" cellLoadingStatus\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Bool\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]})})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u7136\\u540E\\u8FD9\\u6837\\u66F4\\u65B0 cell \\uFF1A\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-swift\",children:(0,e.jsxs)(n.code,{className:\"language-swift code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"if\"}),\" cellLoadingStatus\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"indexPath\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"row\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    cell\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"loadingIndicator\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"startAnimation\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"else\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    cell\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"loadingIndicator\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"stopAnimation\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6211\\u4EEC\\u8FD8\\u6709\\u4E00\\u4EF6\\u4E8B\\u8981\\u505A\\u3002\\u5904\\u7406\\u72B6\\u6001\\u66F4\\u65B0\\uFF0C\\u5982\\u4E0B\\u6240\\u793A\\uFF1A\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-swift\",children:(0,e.jsxs)(n.code,{className:\"language-swift code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"func\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"updateLoadingState\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"isLoading\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Bool\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" at indexPath\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"IndexPath\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    cellLoadingStates\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"indexPath\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"row\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),` isLoading\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    tableView\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"reloadRows\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"at indexPaths\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"indexPath\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" with animation\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"none\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u770B\\u8D77\\u6765\\u6CA1\\u6709\\u4EC0\\u4E48\\u95EE\\u9898\\uFF0C\\u4F46\\u662F\\u5F53\\u6211\\u4EEC\\u88AB\\u8981\\u6C42\\u6DFB\\u52A0\\u4E00\\u4E2A cell \\u7C7B\\u578B\\u65F6\\uFF0C\\u6211\\u4EEC\\u5E94\\u8BE5\\u600E\\u4E48\\u505A\\u5462\\uFF1F\\u5728 \",(0,e.jsx)(n.code,{children:\"func tableView(tableView:,indexPath:) -\u003e UITableViewCell\"}),` \\u6DFB\\u52A0\\u4E00\\u4E2A else-if \\u5904\\u7406\\u3002\n\\u5982\\u679C\\u65B0 Cell \\u5177\\u6709\\u4E0D\\u540C\\u7684\\u72B6\\u6001\\uFF0C\\u6211\\u4EEC\\u5C06\\u6DFB\\u52A0\\u4E00\\u4E2A\\u6570\\u7EC4\\u6765\\u5904\\u7406\\u72B6\\u6001\\u66F4\\u6539\\u5E76\\u6DFB\\u52A0\\u4E00\\u4E2A\\u51FD\\u6570\\u6765\\u66F4\\u65B0\\u72B6\\u6001\\u3002\\u5537\\uFF01\\u788E\\u7247\\u5316\\u4EE3\\u7801\\u4F7F\\u9700\\u6C42\\u53D8\\u66F4\\u6210\\u4E3A\\u4E00\\u9879\\u5177\\u6709\\u6311\\u6218\\u6027\\u7684\\u4EFB\\u52A1\\u3002`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4E0B\\u56FE\\u663E\\u793A\\u4E86\\u4F53\\u7CFB\\u7ED3\\u6784\\uFF1A\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(n.img,{src:\"/media/mvvm-table-architecture.png\",alt:\"\",width:\"727\",height:\"480\"})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5728\\u4E0A\\u9762\\u7684\\u793A\\u4F8B\\u4E2D\\uFF0CdataSource \\u5177\\u6709\\u4EE5\\u4E0B\\u804C\\u8D23\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u8BBE\\u7F6E cell \\u7684 UI \\u7EC4\\u4EF6\\uFF0C\\u4F8B\\u5982 nameLabel\\uFF0CimageView\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u8BB0\\u5F55 cell \\u7684\\u72B6\\u6001\\uFF0C\\u5982 cellLoadingStatus\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u8C03\\u7528 API \\u5E76\\u4E14\\u4FDD\\u5B58 model \\u6570\\u636E\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:`\\u6BCF\\u5F53\\u6211\\u4EEC\\u6DFB\\u52A0\\u4E00\\u4E2A\\u5355\\u5143\\u683C\\u7C7B\\u578B\\u65F6\\uFF0C\\u6211\\u4EEC\\u90FD\\u4F1A\\u5728 FeedListViewController \\u4E2D\\u6267\\u884C\\u8FD9\\u4E9B\\u4EFB\\u52A1\\uFF0C\\u800C\\u8FD9\\u4E9B\\u4EFB\\u52A1\\u6839\\u672C\\u4E0D\\u53EF\\u6269\\u5C55\\u3002\n\\u66F4\\u597D\\u7684\\u65B9\\u6CD5\\u662F\\u5206\\u79BB\\u804C\\u8D23\\u4EE5\\u63D0\\u9AD8\\u53EF\\u6269\\u5C55\\u6027\\u3002\\u6DFB\\u52A0\\u5355\\u5143\\u683C\\u7C7B\\u578B\\u5E94\\u8BE5\\u66F4\\u50CF\\u662F\\u5C06 USB \\u8BBE\\u5907\\u63D2\\u5165\\u8BA1\\u7B97\\u673A\\uFF0C\\u8FD9\\u4E0D\\u4F1A\\u6539\\u53D8\\u8BA1\\u7B97\\u673A\\u7684\\u8BBE\\u8BA1\\u3002`}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u5206\\u62C6-cell-ui-\\u8BBE\\u5B9A\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u5206\\u62C6-cell-ui-\\u8BBE\\u5B9A\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u5206\\u62C6 cell UI \\u8BBE\\u5B9A\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u56DE\\u5230 \",(0,e.jsx)(n.code,{children:\"func tableView(tableView:, cellForRowAt indexPath: ) -\u003e UITableViewCell\"}),\" \\uFF0C\\u8FD9\\u91CC\\u9762\\u6709 UI \\u8BBE\\u5B9A\\uFF0C\\u5BF9\\u4E8E dataSource \\u6765\\u8BF4\\uFF0C\\u4E86\\u89E3 cell \\u7684\\u5B9E\\u73B0\\u7EC6\\u8282\\u5E76\\u4E0D\\u662F\\u4E00\\u4E2A\\u597D\\u7684\\u4E3B\\u610F\\u3002\\u6240\\u4EE5\\u6211\\u4EEC\\u7684\\u7B2C\\u4E00\\u6B65\\u5C31\\u662F\\u5C06 UI \\u8BBE\\u5B9A\\u4ECE dataSource \\u8F6C\\u79FB\\u5230 cell \\u4E2D\\u53BB\\u3002\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u57FA\\u4E8E\\u8FD9\\u4E2A\\u60F3\\u6CD5\\uFF0C\\u6211\\u4EEC\\u5728 MemberCell \\u4E2D\\u6DFB\\u52A0\\u4E00\\u4E2A\\u65B9\\u6CD5\\uFF1A\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-swift\",children:(0,e.jsxs)(n.code,{className:\"language-swift code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// In MemberCell.swift\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"func\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"setup\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"name\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"String\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" profileImage\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"UIImage\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" isFollowing\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Bool\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" isLoading\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Bool\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"self\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"nameLabel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"text \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),` name\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"self\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"profileImageView\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"image \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),` profileImage\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"self\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"addBtn\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"isSelected \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),` isFollowing\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"if\"}),\" isLoading \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),` \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"self\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"loadingIndicator\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"startAnimation\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"else\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"self\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"loadingIndicator\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"stopAnimation\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5728 setup \\u7684\\u5E2E\\u52A9\\u4E0B\\uFF0C\",(0,e.jsx)(n.code,{children:\"func tableView(tableView:, indexPath:) -\u003e UITableViewCell\"}),\" \\u4F1A\\u53D8\\u5F97\\u66F4\\u52A0\\u7B80\\u5355\\uFF1A\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-swift\",children:(0,e.jsxs)(n.code,{className:\"language-swift code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" memberFeed \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" feed \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"as\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Member\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" cell \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" tableView\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"dequeueReusableCell\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"withIdentifier\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"MemberCell\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"cellIdentifier\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"for\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" indexPath\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"as\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"MemberCell\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    cell\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"setup\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"name\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" memberFeed\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"name\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),` \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"                     profileImage\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" memberFeed\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"image\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"                     isFollowing\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" memberFeed\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"isFollowing\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"                     isLoading\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"self\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"loadingStatus\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"indexPath\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"row\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),` cell\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"else\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" photoFeed \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" feed \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"as\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Photo\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" cell \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" tableView\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"dequeueReusableCell\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"withIdentifier\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"PhotoCell\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"cellIdentifier\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"for\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" indexPath\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"as\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"PhotoCell\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    cell\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"setup\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"title\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" photoFeed\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"title\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),` \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"                      description\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" photoFeed\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"description\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"                      image\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" photoFeed\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"image\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),` cell\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"else\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function\",children:\"fatalError\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token string-literal\",children:[(0,e.jsx)(n.span,{className:\"token string\",children:'\"Unhandled feed '}),(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"\\\\(\"}),(0,e.jsx)(n.span,{className:\"token interpolation\",children:\"feed\"}),(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"'})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6211\\u4EEC\\u53EF\\u4EE5\\u770B\\u5230\\u6709\\u8D85\\u8FC7\\u4E09\\u4E2A\\u53C2\\u6570\\u7684\\u51FD\\u6570\\u3002\\u6709\\u4E00\\u4E2A\\u5BF9\\u8C61\\u5305\\u88C5\\u8FD9\\u4E9B\\u53C2\\u6570\\u4F1A\\u66F4\\u597D\\u3002\\u56E0\\u6B64\\uFF0C\\u8FD9\\u662F MVVM \\u7684\\u597D\\u5904\\uFF01 MVVM \\u53EF\\u4EE5\\u5E2E\\u52A9\\u60A8\\u5C06\\u6240\\u6709 UI \\u903B\\u8F91\\u5C01\\u88C5\\u5230\\u4E00\\u4E2A\\u7B80\\u5355\\u7684\\u5BF9\\u8C61\\u4E2D\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u901A\\u8FC7\\u5C06 UI \\u64CD\\u4F5C\\u8F6C\\u6362\\u4E3A\\u5BF9\\u8C61\\u64CD\\u4F5C\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u663E\\u7740\\u51CF\\u5C11 dataSource \\u548C ViewController \\u7684\\u5F00\\u9500\\u3002\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u4E3A-cell-\\u8BBE\\u8BA1-viewmodel\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u4E3A-cell-\\u8BBE\\u8BA1-viewmodel\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u4E3A Cell \\u8BBE\\u8BA1 ViewModel\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5148\\u770B\\u67B6\\u6784\\uFF1A\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(n.img,{src:\"/media/mvvm-architecture-viewmodel.png\",alt:\"\",width:\"566\",height:\"321\"})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6211\\u4EEC\\u7528\\u4E24\\u79CD viewmodel \\uFF1AMemberViewModel \\u548C PhotoViewModel \\uFF0C\\u5206\\u522B\\u4EE3\\u8868 MemberCell \\u548C PhotoCell \\u3002 \\u6211\\u4EEC\\u4F7F\\u7528\\u7ED1\\u5B9A\\u6280\\u672F\\u5C06 ViewModel \\u7684\\u5C5E\\u6027\\u7ED1\\u5B9A\\u5230\\u76F8\\u5E94 Cell \\u4E2D\\u7684UI\\u7EC4\\u4EF6\\u3002\\u8FD9\\u610F\\u5473\\u7740\\u6BCF\\u5F53\\u6211\\u4EEC\\u66F4\\u6539ViewModel\\u7684\\u5C5E\\u6027\\u65F6\\uFF0C\\u5355\\u5143\\u683C\\u4E2D\\u7684\\u7ED1\\u5B9AUI\\u7EC4\\u4EF6\\u90FD\\u4F1A\\u76F8\\u5E94\\u5730\\u66F4\\u6539\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"MemberViewModel \\u7684\\u5B9E\\u73B0\\u5982\\u4E0B\\uFF1A\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-swift\",children:(0,e.jsxs)(n.code,{className:\"language-swift code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"MemberCellViewModel\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" name\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"String\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" avatar\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"UIImage\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" isLoading\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Observable\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Bool\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6211\\u4EEC\\u4F7F\\u7528\\u81EA\\u5B9A\\u4E49\\u5BF9\\u8C61 Observable \\u4F5C\\u4E3A\\u7ED1\\u5B9A\\u5DE5\\u5177\\u3002\\u5B83\\u4FDD\\u7559\\u6CDB\\u578B\\u7C7B\\u578B\\u503C\\uFF0C\\u5E76\\u901A\\u8FC7\\u89E6\\u53D1\\u540D\\u4E3A valueChanged\\u7684\\u95ED\\u5305\\u6765\\u901A\\u77E5\\u5C06\\u5B58\\u50A8\\u503C\\u66F4\\u6539\\u4E3A\\u89C2\\u5BDF\\u8005\\u3002\\u5B9E\\u73B0\\u975E\\u5E38\\u7B80\\u5355\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-swift\",children:(0,e.jsxs)(n.code,{className:\"language-swift code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Observable\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"T\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" value\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"T\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"didSet\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"DispatchQueue\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"main\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"                \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"self\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"valueChanged\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"self\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"value\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" valueChanged\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"T\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"-\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Void\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5982\\u679C\\u4F60\\u5BF9\\u66F4\\u591A\\u7684 \\u7ED1\\u5B9A\\u6280\\u672F\\u611F\\u5174\\u8DA3\\uFF0C\\u8BF7\\u770B Sr\\u0111an Ra\\u0161i\\u0107 \\u7684\\u6587\\u7AE0 \",(0,e.jsx)(n.a,{href:\"https://five.agency/solving-the-binding-problem-with-swift/\",children:\"Solving the binding problem with Swfit - Five\"})]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u56DE\\u5230\\u6587\\u7AE0\\uFF0C \\u76F8\\u5E94\\u7684 MemberCell \\u770B\\u8D77\\u6765\\u5982\\u4E0B\\uFF1A\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-swift\",children:(0,e.jsxs)(n.code,{className:\"language-swift code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// In MemberCell.swift\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"func\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"setup\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"viewModel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"MemberViewModel\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// The imange and the name won't be changed after setup \"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    profileImageView\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"image \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" viewModel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),`image \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    nameLabel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"text \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" viewModel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),`name\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`        \n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Listen to the change of the isLoading property to update the UI state\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    viewModel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"isLoading\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"valueChanged \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"weak\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"self\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"isLoading\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"in\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"if\"}),\" isLoading \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"self\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"loadingIndicator\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"startAnimating\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"else\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"self\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"loadingIndicator\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"stopAnimating\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5728 \",(0,e.jsx)(n.code,{children:\"setup(viewModel:)\"}),` \\u51FD\\u6570\\u4E2D\\uFF0C\\u6211\\u4EEC\\u4F7F\\u7528 viewModel \\u53C2\\u6570\\u4E2D\\u7684\\u4FE1\\u606F\\u5728\\u5355\\u5143\\u683C\\u4E0A\\u8BBE\\u7F6E UI \\u7EC4\\u4EF6\\u3002\n\\u6B64\\u5916\\uFF0C\\u6211\\u4EEC\\u8BBE\\u7F6E valueChanged \\u95ED\\u5305\\u6765\\u76D1\\u542C isLoading \\u5C5E\\u6027\\u7684\\u503C\\u66F4\\u6539\\u3002 \\u5F53\\u7528\\u6237\\u6309\\u4E0B\\u5355\\u5143\\u683C\\u4E0A\\u7684 \\u201C+\\u201D \\u6309\\u94AE\\u65F6\\uFF0CisLoading \\u53D8\\u4E3A \\u201Ctrue\\u201D \\u3002\\u901A\\u8FC7\\u4F7F\\u7528 MVVM \\uFF0C\\u6211\\u4EEC\\u7B80\\u5316\\u4E86\\u8BBE\\u7F6E\\u529F\\u80FD\\u7684\\u53C2\\u6570\\u3002\n\\u6B64\\u5916\\uFF0C\\u5C06 UI \\u903B\\u8F91\\u8F6C\\u6362\\u4E3A\\u5BF9\\u8C61\\u64CD\\u4F5C\\u5BF9\\u4E8E\\u66F4\\u591ASwift\\u6280\\u672F\\u975E\\u5E38\\u6709\\u76CA\\uFF0C\\u8FD9\\u5C06\\u5728\\u4E0B\\u4E00\\u8282\\u4E2D\\u4ECB\\u7ECD\\u3002`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5728\\u8FD9\\u91CC\\uFF0C\\u6211\\u4EEC\\u8FD8\\u6709\\u4E00\\u4EF6\\u4E8B\\u8981\\u505A\\u3002\\u5728\\u5355\\u5143\\u683C\\u4E2D\\uFF0C\\u6211\\u4EEC\\u4F7F\\u7528\\u8F6C\\u4E49\\u95ED\\u5305 valueChanged \\u6765\\u901A\\u77E5\\u5355\\u5143\\u683C UI \\u66F4\\u65B0\\u3002\\u57FA\\u672C\\u4E0A\\uFF0C\\u5F53\\u7528\\u6237\\u6EDA\\u52A8\\u8868\\u89C6\\u56FE\\u65F6\\uFF0C\\u5C06\\u91CD\\u7528\\u8BE5\\u5355\\u5143\\u683C\\u3002 ViewModel \\u548C Cell \\u4E4B\\u95F4\\u7684\\u5173\\u7CFB\\u53EF\\u4EE5\\u7528\\u4E0B\\u56FE\\u8868\\u793A\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(n.img,{src:\"/media/mvvm-img1.004-3.png\",alt:\"\",width:\"556\",height:\"333\"})}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5F53\\u7528\\u6237\\u4E0D\\u65AD\\u5730\\u5411\\u4E0B\\u6EDA\\u52A8\\uFF0C\\u79BB\\u5F00\\u5C4F\\u5E55\\u7684 \",(0,e.jsx)(n.em,{children:\"MemberCell A\"}),\" \\u539F\\u672C\\u662F\\u4E0E \",(0,e.jsx)(n.em,{children:\"MemberViewModel 1\"}),\" \\u7ED1\\u5B9A\\u7684\\uFF0C\\u73B0\\u5728\\u88AB reuse ,\\u7ED9 \",(0,e.jsx)(n.em,{children:\"MemberViewModel 3\"}),\" \\u4F7F\\u7528\\uFF0C\\u4F46\\u662F\\u56E0\\u4E3A \",(0,e.jsx)(n.em,{children:\"MemberViewModel 1\"}),\" \\u7684 valueChanged closure \\u8FD8\\u6CA1\\u6709\\u91CA\\u653E\\uFF0C\\u6240\\u4EE5\\u5F53 MemberViewModel \\u7684 isLoading \\u4FEE\\u6539\\u540E\\uFF0C \",(0,e.jsx)(n.em,{children:\"MemberViewModel 1\"}),\" \\u4ECD\\u7136\\u4F1A\\u901A\\u77E5 \",(0,e.jsx)(n.em,{children:\"MemberCell A\"}),\" \\u3002\\u4E5F\\u5C31\\u662F\\u8BF4, \",(0,e.jsx)(n.em,{children:\"MemberViewModel 1\"}),\" \\u548C \",(0,e.jsx)(n.em,{children:\"MemberViewModel 3\"}),\" \\u7684 isLoading \\u5C5E\\u6027\\u66F4\\u65B0\\u4E86\\u540C\\u4E00\\u4E2A\\u5355\\u5143\\u683C\\u3002\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6240\\u4EE5\\u5728\\u8BBE\\u5B9A\\u7ED1\\u5B9A\\u7684\\u540C\\u65F6\\uFF0C\\u4E5F\\u8981\\u8BB0\\u5F97\\u5728 reuse \\u65F6\\u628A closure \\u6E05\\u7A7A\\uFF1A\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-swift\",children:(0,e.jsxs)(n.code,{className:\"language-swift code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"override\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"func\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"prepareForReuse\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"super\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"prepareForReuse\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    viewModel\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"isLoading\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"valueChanged \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token nil constant\",children:\"nil\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u8FD9\\u6837\\u5C31\\u53EF\\u4EE5\\u786E\\u4FDD cell \\u53EA\\u9488\\u5BF9\\u6B63\\u786E\\u7684 ViewModel \\u505A\\u53CD\\u5E94\\uFF0C\\u800C\\u4E0D\\u4F1A\\u56E0\\u4E3A reuse \\u9020\\u6210\\u9519\\u8BEF\\u7684\\u66F4\\u65B0\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u73B0\\u5728\\uFF0C\\u53EF\\u4EE5\\u5BF9 dataSource \\u518D\\u8FDB\\u4E00\\u6B65\\u7B80\\u5316\\uFF1A\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-swift\",children:(0,e.jsxs)(n.code,{className:\"language-swift code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" viewModel \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" viewModels\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"indexPath\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"row\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" memberViewModel \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" viewModel \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"as\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"MemberViewModel\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" cell \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" tableView\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"dequeueReusableCell\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"withIdentifier\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"MemberCell\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"cellIdentifier\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"for\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" indexPath\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"as\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"MemberCell\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    cell\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"setup\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"viewModel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" memberViewModel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),` cell\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"else\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" photoViewModel \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" viewModel \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"as\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"PhotoViewModel\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" cell \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" tableView\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"dequeueReusableCell\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"withIdentifier\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"PhotoCell\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"cellIdentifier\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"for\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" indexPath\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"as\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"PhotoCell\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    cell\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"setup\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"viewModel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" photoViewModel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),` cell\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"else\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function\",children:\"fatalError\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token string-literal\",children:[(0,e.jsx)(n.span,{className:\"token string\",children:'\"Unhandled feed '}),(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"\\\\(\"}),(0,e.jsx)(n.span,{className:\"token interpolation\",children:\"feed\"}),(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"'})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`})]})}),`\n`,(0,e.jsx)(n.p,{children:\"dataSource \\u7684\\u804C\\u8D23\\u975E\\u5E38\\u7B80\\u5355\\uFF1A\\u4F7F\\u7528 cell \\u7684 ViewModel \\u8BBE\\u7F6E tableview \\u3002 \\u53E6\\u4E00\\u65B9\\u9762\\uFF0C\\u8BBE\\u7F6E UI \\u7EC4\\u4EF6\\u7684\\u7EC6\\u8282\\u88AB\\u59D4\\u6258\\u7ED9 cell \\u3002cell \\u7684\\u72B6\\u6001\\u50A8\\u5B58\\u5728 ViewModel \\u4E2D\\uFF08\\u7531Controller \\u800C\\u4E0D\\u662F ViewController \\u62E5\\u6709\\uFF09\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5B9E\\u9645\\u4E0A\\uFF0C\\u8FD8\\u6709\\u6539\\u8FDB\\u7684\\u4F59\\u5730\\uFF01\\u7531\\u4E8E\\u6211\\u4EEC\\u7EDF\\u4E00\\u4E86\\u5355\\u5143\\u7684\\u63A5\\u53E3\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u901A\\u8FC7\\u4F7F\\u7528 Protocol \\u6765\\u51CF\\u5C11\\u5197\\u4F59\\uFF01\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u5229\\u7528-protocol-\\u51CF\\u5C11\\u5197\\u4F59\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u5229\\u7528-protocol-\\u51CF\\u5C11\\u5197\\u4F59\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u5229\\u7528 Protocol \\u51CF\\u5C11\\u5197\\u4F59\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"func tableView(tableView:, indexPath:) -\u003e UITableViewCell\"}),\" \\u4E2D\\u8C03\\u7528\\u4E86\\u4E24\\u6B21 \",(0,e.jsx)(n.code,{children:\"setup(viewModel:) \"}),`\\u3002\\u6211\\u4EEC\\u53EF\\u4EE5\\u4F7F\\u7528 Swift Protocol \\u4E3A\\u5404\\u79CD cell \\u521B\\u5EFA\\u901A\\u7528\\u8BBE\\u7F6E\\u51FD\\u6570\\u3002\n\\u8BA9\\u6211\\u4EEC\\u521B\\u5EFA\\u4E00\\u4E2A\\u540D\\u4E3A CellConfigurable \\u7684\\u534F\\u8BAE`]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-swift\",children:(0,e.jsxs)(n.code,{className:\"language-swift code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"protocol\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"CellConfigurable\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"func\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"setup\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"viewModel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"RowViewModel\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Provide a generic function\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:`\\u8FD9\\u662F cell \\u534F\\u8BAE\\u3002\\u53EF\\u4EE5\\u4F7F\\u7528 RowViewModel \\u5B9E\\u4F8B\\u8BBE\\u7F6E\\u786E\\u8BA4\\u534F\\u8BAE\\u7684\\u5355\\u5143\\u3002\n\\u540C\\u65F6\\uFF0CRowViewModel\\u662F\\u53E6\\u4E00\\u79CD\\u534F\\u8BAE\\uFF1A`}),`\n`,(0,e.jsx)(n.pre,{className:\"language-swift\",children:(0,e.jsxs)(n.code,{className:\"language-swift code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"protocol\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"RowViewModel\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// make view models conform the RowViewModel protocol\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"MemberViewModel\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"RowViewModel\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"...\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"PhotoViewModel\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"RowViewModel\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"...\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u7B26\\u5408 RowViewModel \\u7684 ViewModel \\u53EF\\u4EE5\\u7528\\u6765\\u8BBE\\u7F6E CellConfigurable \\u3002\\u901A\\u8FC7\\u4F7F\\u7528\\u534F\\u8BAE\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u8FDB\\u4E00\\u6B65\\u7B80\\u5316 dataSource :\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-swift\",children:(0,e.jsxs)(n.code,{className:\"language-swift code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"func\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"tableView\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token omit keyword\",children:\"_\"}),\" tableView\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"UITableView\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" cellForRowAt indexPath\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"IndexPath\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"-\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"UITableViewCell\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" rowViewModel \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"self\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"viewModels\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"indexPath\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"row\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" cell \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" tableView\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"dequeueReusableCell\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"withIdentifier\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"self\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"cellIdentifier\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"for\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" rowViewModel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"for\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" indexPath\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" cell \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" cell \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"as\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"CellConfigurable\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        cell\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"setup\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"viewModel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" rowViewModel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),` cell\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"/// Map the view model with the cell identifier (which will be moved to the Controller)\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"private\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"func\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"cellIdentifier\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"for\"}),\" viewModel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"RowViewModel\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"switch\"}),\" viewModel \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"case\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"is\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"PhotoCellViewModel\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"PhotoCell\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"cellIdentifier\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"case\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"is\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"MemberCellViewModel\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"MemberCell\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"cellIdentifier\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"default\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token function\",children:\"fatalError\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token string-literal\",children:[(0,e.jsx)(n.span,{className:\"token string\",children:'\"Unexpected view model type: '}),(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"\\\\(\"}),(0,e.jsx)(n.span,{className:\"token interpolation\",children:\"viewModel\"}),(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"'})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u73B0\\u5728\\u6DFB\\u52A0\\u4E00\\u4E2A\\u5355\\u5143\\u683C\\u7C7B\\u578B\\u4E0D\\u4F1A\\u6539\\u53D8 \",(0,e.jsx)(n.code,{children:\"func tableView\\uFF08tableView\\uFF1A\\uFF0CindexPath :)  - \u003e UITableViewCell\"}),\" \\u7684\\u5B9E\\u73B0\\uFF01\\u6362\\u53E5\\u8BDD\\u8BF4\\uFF0CdataSource \\u7684\\u53EF\\u6269\\u5C55\\u6027\\u53D8\\u5F97\\u5F88\\u597D\\uFF1A\\u65E0\\u8BBA\\u6211\\u4EEC\\u6DFB\\u52A0\\u591A\\u5C11\\u79CD cell\\uFF0C\\u590D\\u6742\\u6027\\u90FD\\u4FDD\\u6301\\u4E0D\\u53D8\\uFF01\"]}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u66F4\\u591A\\u7684-protocol\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u66F4\\u591A\\u7684-protocol\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u66F4\\u591A\\u7684 Protocol\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Protocol \\u8FD8\\u53EF\\u4EE5\\u7528\\u6765\\u7B80\\u5316\\u4E0E cell \\u7684\\u4EA4\\u4E92\\uFF1A\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-swift\",children:(0,e.jsxs)(n.code,{className:\"language-swift code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"protocol\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"ViewModelPressible\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" cellPressed\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"-\u003e\"}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Void\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"get\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"set\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"PhotoViewModel\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"RowViewModel\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"ViewModelPressible\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" title\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"String\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" desc\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"String\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" image\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"AsyncImage\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" cellPressed\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"-\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Void\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Conform the ViewModelPressible protocol\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:`\\u521B\\u5EFA\\u4E00\\u4E2A ViewModelPressible \\u534F\\u8BAE\\u3002\\u6709\\u4E00\\u4E2A\\u5FC5\\u9700\\u7684\\u5B9E\\u73B0\\uFF1A\\u4E00\\u4E2A\\u540D\\u4E3AcellPressed\\u7684\\u95ED\\u5305\\u53D8\\u91CF\\u3002\n\\u7136\\u540E\\uFF0C\\u6211\\u4EEC\\u901A\\u8FC7\\u6DFB\\u52A0\\u53D8\\u91CF cellPressed \\u4F7F PhotoViewModel \\u7B26\\u5408 ViewModelPressible \\u3002\\u7B26\\u5408 ViewModelPressible \\u610F\\u5473\\u7740 ViewModel \\u80FD\\u591F\\u5904\\u7406\\u7528\\u6237\\u6309\\u4E0B\\u4E8B\\u4EF6\\u3002`}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5728 tableView \\u7684\\u4EE3\\u7406\\uFF0C\\u6211\\u4EEC\\u6DFB\\u52A0 \",(0,e.jsx)(n.code,{children:\"func tableView(_ tableView:, indexPath:)\"}),\" \\u7684\\u5B9E\\u73B0\\u4EE3\\u7801\\uFF1A\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-swift\",children:(0,e.jsxs)(n.code,{className:\"language-swift code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"func\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"tableView\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token omit keyword\",children:\"_\"}),\" tableView\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"UITableView\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" didSelectRowAt indexPath\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"IndexPath\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" viewModel \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"self\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"viewModels\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"indexPath\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"row\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" viewModel \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" viewModel \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"as\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"ViewModelPressible\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        rowViewModel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"cellPressed\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u73B0\\u5728\\u6240\\u6709 didSelectRow \\u4E8B\\u4EF6\\u90FD\\u8F6C\\u6362\\u4E3A\\u76F8\\u5E94\\u7684 ViewModel \\u3002\\u4EE5\\u4E0B\\u793A\\u4F8B\\u663E\\u793A\\u4E86\\u7528\\u6CD5\\uFF1A\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"language-swfit code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`// When creating the view model\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`let photoCellViewModel = PhotoCellViewModel()\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`photoCellViewModel.cellPressed = {\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`                    print(\"Ask the coordinator or the view controller to open a photo viewer!\")\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`                }\n`})]})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u540C\\u6837\\uFF0C\\u6211\\u4EEC\\u6210\\u529F\\u5730\\u5C06\\u4EA4\\u4E92\\u5305\\u88C5\\u5230 ViewModel \\u5BF9\\u8C61\\u4E2D\\uFF0C\\u5E76\\u4FDD\\u6301\\u8868\\u89C6\\u56FE\\u59D4\\u6258\\u7684\\u5E72\\u51C0\\uFF01\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5B8C\\u6210\\u6240\\u6709\\u8FD9\\u4E9B\\u5DE5\\u4F5C\\u540E\\uFF0C\\u6211\\u5011\\u7A0D\\u5FAE\\u628A\\u955C\\u5934\\u62C9\\u8FDC\\u4E00\\u70B9\\uFF0C\\u56DE\\u5934\\u770B\\u4E00\\u4E0B\\u6211\\u4EEC\\u7684 FeedListViewController \\u3002\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u5904\\u7406\\u4E1A\\u52A1\\u903B\\u8F91\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u5904\\u7406\\u4E1A\\u52A1\\u903B\\u8F91\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u5904\\u7406\\u4E1A\\u52A1\\u903B\\u8F91\"]}),`\n`,(0,e.jsx)(n.p,{children:\"FeedListViewController\\u8FD8\\u6709\\u4E00\\u4E2A\\u4E0D\\u76F8\\u5173\\u7684\\u4F5C\\u4E1A\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u8BBE\\u5B9A cell \\u7684 UI \\u7EC4\\u4EF6\\uFF0C\\u5982 nameLabel, imageView\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u8BB0\\u5F55\\u5355\\u5143\\u683C\\u7684\\u72B6\\u6001\\uFF0C\\u4F8B\\u5982 cellLoadingStates\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u8FDB\\u884C API \\u8C03\\u7528\\u5E76\\u4FDD\\u5B58\\u6570\\u636E\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u65B0\\u7684\\u6784\\u67B6\\uFF1A\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(n.img,{src:\"/media/mvvm-img1.006-3.png\",alt:\"\",width:\"746\",height:\"444\"})}),`\n`,(0,e.jsx)(n.p,{children:`\\u6211\\u4EEC\\u60F3\\u8BA9 FeedListViewController \\u6210\\u4E3A\\u4E00\\u4E2A\\u7B80\\u5355\\u7684\\u89C6\\u56FE\\uFF0C\\u5E76\\u5C06\\u4E1A\\u52A1\\u903B\\u8F91\\u79FB\\u52A8\\u5230\\u53E6\\u4E00\\u4E2A\\uFF1AFeedListController \\u3002 FeedListController \\u8D1F\\u8D23\\u8FDB\\u884C API \\u8C03\\u7528\\u5E76\\u4FDD\\u5B58\\u6570\\u636E\\u6A21\\u578B\\u3002\n\\u6211\\u4EEC\\u53EF\\u4EE5\\u8BF4 FeedListController \\u7684\\u804C\\u8D23\\u662F\\u5904\\u7406\\u4E1A\\u52A1\\u903B\\u8F91\\u3002\\u57FA\\u4E8E\\u8FD9\\u4E2A\\u60F3\\u6CD5\\uFF0C\\u8BA9\\u6211\\u4EEC\\u521B\\u5EFA\\u4E00\\u4E2AFeedListController\\uFF1A`}),`\n`,(0,e.jsx)(n.pre,{className:\"language-swift\",children:(0,e.jsxs)(n.code,{className:\"language-swift code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// FeedListController.swift\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" viewModels \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Observable\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"RowViewModel\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"value\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"func\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"start\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    service\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"fetchFeed \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"weak\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"self\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" feeds \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"in\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"self\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"buildViewModels\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"feeds\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" feeds\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"func\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"buildViewModels\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"feeds\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Feed\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" viewModels \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"RowViewModel\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"for\"}),\" feed \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"in\"}),\" feeds \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" feed \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" feed \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"as\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Member\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            viewModels\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"append\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"MemberViewModel\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"from\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"feed\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"else\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" feed \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" feed \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"as\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Photo\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" photoViewModel \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"PhotoViewModel\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"from\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"feed\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            photoViewModel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"cellPressed \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"weak\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"self\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"in\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"                \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"self\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"handleCellPressed\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"feed\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            viewModels\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"append\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"photoViewModel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"self\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"viewModels\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"value \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),` viewModels\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"func\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"handleCellPressed\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token omit keyword\",children:\"_\"}),\" feed\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Feed\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Send analytics, fetch detail data, etc\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Open detail photo view\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4ECE\\u4E0A\\u9762\\u7684\\u4EE3\\u7801\\u4E2D\\u53EF\\u4EE5\\u770B\\u5230\\uFF0Ccontroller \\u4E0D\\u77E5\\u9053\\u4EFB\\u4F55 UI \\u7EC4\\u4EF6\\u7684\\u903B\\u8F91\\uFF0C\\u76F8\\u53CD\\uFF0C ViewModel \\u5728\\u6B64\\u5904\\u6210\\u4E3A\\u4E86 View \\u548C ViewController \\u7684\\u4E2D\\u95F4\\u4EBA\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4ECE\\u53E6\\u4E00\\u4E2A\\u89D2\\u5EA6\\u6765\\u770B\\uFF0CFeedListViewController\\u53D8\\u4E3A\\uFF1A\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-swift\",children:(0,e.jsxs)(n.code,{className:\"language-swift code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" viewModels\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Observable\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"RowViewModel\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),\" controller\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),`viewModels\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"override\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"func\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"viewDidLoad\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    viewModels\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"valueUpdate \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"weak\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"self\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token omit keyword\",children:\"_\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"in\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"self\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"tableView\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"reloadData\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    controller\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"start\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"func\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"tableView\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token omit keyword\",children:\"_\"}),\" tableView\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"UITableView\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" numberOfRowsInSection section\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Int\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"-\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Int\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),\" rowViewModels\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"value\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),`count\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"func\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"tableView\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token omit keyword\",children:\"_\"}),\" tableView\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"UITableView\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" cellForRowAt indexPath\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"IndexPath\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"-\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"UITableViewCell\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" rowViewModel \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"self\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"rowViewModels\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"value\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"indexPath\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"row\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" cell \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" tableView\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"dequeueReusableCell\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"withIdentifier\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" controller\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"cellIdentifier\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"for\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" rowViewModel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"for\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" indexPath\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" cell \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" cell \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"as\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"CellConfigurable\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        cell\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"setup\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"viewModel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" rowViewModel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),` cell\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"func\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-definition function\",children:\"tableView\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token omit keyword\",children:\"_\"}),\" tableView\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"UITableView\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" didSelectRowAt indexPath\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"IndexPath\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" rowViewModel \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" rowViewModels\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"value\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"indexPath\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"row\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"as\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"ViewModelPressible\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        rowViewModel\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"cellPressed\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"FeedViewController \\u7684\\u552F\\u4E00\\u804C\\u8D23\\u662F\\u8BBE\\u7F6E\\u8868\\u89C6\\u56FE\\uFF0C\\u5145\\u5F53 dataSource \\u548C\\u8868\\u89C6\\u56FE\\u7684\\u59D4\\u6258\\u3002\\u6DFB\\u52A0\\u5355\\u5143\\u683C\\u7C7B\\u578B\\u6216\\u4FEE\\u6539\\u4EA4\\u4E92\\u4E0D\\u4F1A\\u66F4\\u6539\\u6B64 ViewController\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:`\\u8FD9\\u6837\\u505A\\u6709\\u5F88\\u591A\\u597D\\u5904\\uFF1A\\u53EF\\u4EE5\\u7F16\\u5199\\u5355\\u5143\\u6D4B\\u8BD5\\u6765\\u6D4B\\u8BD5 UI \\u72B6\\u6001\\uFF0C\\u7528\\u6237\\u4EA4\\u4E92\\u4EE5\\u53CA\\u670D\\u52A1\\u5668\\u8FDE\\u63A5\\u884C\\u4E3A\\uFF01\n\\u9664\\u4E86\\u53EF\\u6D4B\\u8BD5\\u6027\\u7684\\u63D0\\u9AD8\\u5916\\uFF0C\\u6574\\u4E2A feed \\u6A21\\u5757\\u7684\\u53EF\\u6269\\u5C55\\u6027\\u4E5F\\u5F97\\u5230\\u4E86\\u63D0\\u9AD8\\uFF01`}),`\n`,(0,e.jsxs)(n.h2,{id:\"summary\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#summary\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Summary\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5728\\u672C\\u6587\\u4E2D\\uFF0C\\u6211\\u4EEC\\u5C55\\u793A\\u4E86\\u5982\\u4F55\\u901A\\u8FC7\\u6267\\u884C\\u8FD9\\u4E9B\\u66F4\\u6539\\u6765\\u7B80\\u5316\\u590D\\u6742\\u7684 TableView \\uFF1A\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u4F7F\\u5355\\u5143\\u683C\\u5904\\u7406UI\\u7EC4\\u4EF6\\u8BBE\\u7F6E;\"}),`\n`]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u4F7F\\u7528MVVM\\u62BD\\u8C61UI\\u7EC4\\u4EF6\\u548C\\u4EA4\\u4E92;\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u4F7F\\u7528\\u534F\\u8BAE\\u6765\\u6574\\u5408\\u8BBE\\u7F6E\\u754C\\u9762;\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u4F7F\\u7528 Controller \\u6765\\u5904\\u7406\\u4E1A\\u52A1\\u903B\\u8F91\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[`Massive View Controller \\u662F\\u4E00\\u4E2A\\u81ED\\u540D\\u662D\\u7740\\u7684\\u53CD\\u6A21\\u5F0F\\u3002\\u73B0\\u5728\\u6211\\u4EEC\\u77E5\\u9053\\u95EE\\u9898\\u4E0D\\u662F MVC \\u6A21\\u5F0F\\u672C\\u8EAB\\u3002\\u6709\\u8BB8\\u591A\\u65B9\\u6CD5\\u53EF\\u4EE5\\u5206\\u79BB\\u7CFB\\u7EDF\\u7684\\u804C\\u8D23\\uFF0C\\u5305\\u62EC\\u4F46\\u4E0D\\u9650\\u4E8E MVVM \\u6A21\\u5F0F\\u3002\\u6211\\u4F1A\\u8BF4 MVVM \\u6A21\\u5F0F\\u662F\\u63D0\\u9AD8\\u4EE3\\u7801\\u8D28\\u91CF\\u7684\\u5C11\\u6570\\u5DE5\\u5177\\uFF0C\\u4F46\\u5B83\\u4E0D\\u662F\\u4E00\\u4E2A\\u7075\\u4E39\\u5999\\u836F\\u3002\n\\u9664\\u4E86 MVVM \\u4E4B\\u5916\\uFF0C\\u6211\\u4EEC\\u8FD8\\u9700\\u8981\\u5904\\u7406\\u8BF8\\u5982\\u53EF\\u6269\\u5C55\\u6027\\uFF0C\\u53EF\\u6D4B\\u8BD5\\u6027\\u4EE5\\u53CA `,(0,e.jsx)(n.a,{href:\"https://en.wikipedia.org/wiki/SOLID\",children:\"SOLID-Wikipedia\"}),` \\u7B49\\u66F4\\u591A\\u539F\\u5219\\u4E4B\\u7C7B\\u7684\\u4E8B\\u60C5\\u3002\n\\u56E0\\u6B64\\uFF0C\\u5728\\u91C7\\u7528\\u4EFB\\u4F55\\u67B6\\u6784\\u4E4B\\u524D\\uFF0C\\u8BF7\\u5F7B\\u5E95\\u4E86\\u89E3\\u67B6\\u6784\\u7684\\u8BBE\\u8BA1\\uFF0C\\u4ED4\\u7EC6\\u9009\\u62E9\\u6700\\u9002\\u5408\\u60A8\\u9700\\u6C42\\u7684\\u67B6\\u6784\\u3002`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"\\u76F8\\u5173\\u6587\\u7AE0\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\u76F8\\u5173\\u6587\\u7AE0\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u76F8\\u5173\\u6587\\u7AE0\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://medium.com/@stasost/ios-how-to-build-a-table-view-with-multiple-cell-types-2df91a206429\",children:\"iOS: How to build a Table View with multiple cell types\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://medium.cobeisfresh.com/dealing-with-complex-table-views-in-ios-and-keeping-your-sanity-ff5fee1fbb83\",children:\"Dealing with Complex Table Views in iOS and Keeping Your Sanity\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://academy.realm.io/posts/doios-natasha-murashev-protocol-oriented-mvvm/\",children:\"Introduction to Protocol-Oriented MVVM\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://blog.jayway.com/2016/11/15/clean-table-view-code-using-swift-protocols/\",children:\"Clean Table View Code Using Swift Protocols - Jayway\"})}),`\n`]})]})}}var b=V;return g(M);})();\n;return Component;"},"isPost":true,"seoImage":{"url":"https://fninit.com/site-meta.png","dimensions":{"width":1120,"height":768}},"previewPosts":[{"slug":"/posts/2016/arc-in-swift","title":"Swift:Automatic Reference Counting in Swift","date":"2016-12-30T00:00:00.000Z","excerpt":null,"draft":false,"page":false,"comment":true,"featureImage":{"url":"/images/altumcode-unsplash.webp","dimensions":{"width":1858,"height":1308}},"toc":null,"tags":[{"name":"iOS","slug":"ios"},{"name":"Swift","slug":"swift"}],"authors":[{"slug":"roninro","name":"Roninro","cover_image":"/images/publication-cover.png","profileImage":{"url":"/images/avatar.jpg","dimensions":{"width":1080,"height":1080}},"location":"THE INTERNET","bio":"Software Development Engineer","twitter":"@xxxxx","facebook":"xxxxxx"}],"primary_tag":{"name":"iOS","slug":"ios"},"reading_time":"24 min read"},{"slug":"/posts/2016/ios-remotenotification","title":"iOS:关于iOS的推送","date":"2016-12-23T00:00:00.000Z","excerpt":null,"draft":false,"page":false,"comment":true,"featureImage":{"url":"/images/faisal-waheed-unsplash.webp","dimensions":{"width":2000,"height":1333}},"toc":null,"tags":[{"name":"iOS","slug":"ios"}],"authors":[{"slug":"roninro","name":"Roninro","cover_image":"/images/publication-cover.png","profileImage":{"url":"/images/avatar.jpg","dimensions":{"width":1080,"height":1080}},"location":"THE INTERNET","bio":"Software Development Engineer","twitter":"@xxxxx","facebook":"xxxxxx"}],"primary_tag":{"name":"iOS","slug":"ios"},"reading_time":"5 min read"},{"slug":"/posts/2017/ios-carthage","title":"Carthage 的简单使用","date":"2017-06-19T12:57:37.000Z","excerpt":null,"draft":false,"page":false,"comment":true,"featureImage":{"url":"/images/dNjMqj4emkc-unsplash.jpg","dimensions":{"width":2000,"height":1333}},"toc":null,"tags":[{"name":"iOS","slug":"ios"}],"authors":[{"slug":"roninro","name":"Roninro","cover_image":"/images/publication-cover.png","profileImage":{"url":"/images/avatar.jpg","dimensions":{"width":1080,"height":1080}},"location":"THE INTERNET","bio":"Software Development Engineer","twitter":"@xxxxx","facebook":"xxxxxx"}],"primary_tag":{"name":"iOS","slug":"ios"},"reading_time":"2 min read"}],"prevPost":{"slug":"/posts/2019/debian","title":"Notes About Debian","date":"2019-05-29T05:33:48.000Z","excerpt":"使用 TUNA 的软件源镜像","draft":false,"page":false,"comment":true,"featureImage":{"url":"/images/computer.jpg","dimensions":{"width":1920,"height":1281}},"toc":[{"id":"debian-镜像更换","heading":"Debian 镜像更换"},{"id":"debian-英文环境下安装中文拼音","heading":"Debian 英文环境下安装中文拼音","items":[{"id":"chinese-support","heading":"Chinese Support"},{"id":"fcitx-googlepinyin-输入法","heading":"Fcitx googlepinyin 输入法"},{"id":"问题","heading":"问题"}]}],"tags":[{"name":"debian","slug":"debian"}],"authors":[{"slug":"roninro","name":"Roninro","cover_image":"/images/publication-cover.png","profileImage":{"url":"/images/avatar.jpg","dimensions":{"width":1080,"height":1080}},"location":"THE INTERNET","bio":"Software Development Engineer","twitter":"@xxxxx","facebook":"xxxxxx"}],"primary_tag":{"name":"debian","slug":"debian"},"reading_time":"2 min read"},"nextPost":{"slug":"/posts/2019/git-flow","title":"git-flow 工作流程","date":"2019-04-19T03:37:38.000Z","excerpt":"当我们选择 Git 作为版本控制系统时，使用一个统一的工作流程是非常重要的。 Git 在分支控制上面做得非常好，但是如果团队在开发中没有使用有效的工作流程，混乱将是不可避免的。","draft":false,"page":false,"comment":true,"featureImage":{"url":"/images/git-flow.png","dimensions":{"width":1636,"height":860}},"toc":null,"tags":[{"name":"git","slug":"git"}],"authors":[{"slug":"roninro","name":"Roninro","cover_image":"/images/publication-cover.png","profileImage":{"url":"/images/avatar.jpg","dimensions":{"width":1080,"height":1080}},"location":"THE INTERNET","bio":"Software Development Engineer","twitter":"@xxxxx","facebook":"xxxxxx"}],"primary_tag":{"name":"git","slug":"git"},"reading_time":"6 min read"},"bodyClass":"post-template tag-ios"}},"__N_SSG":true},"page":"/[...slug]","query":{"slug":["posts","2019","ios-mvvm-tableview"]},"buildId":"MSSxhpDAKLCq65cBS8UNC","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>